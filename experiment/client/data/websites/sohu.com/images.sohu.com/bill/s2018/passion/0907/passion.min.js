define("sjs/util/url",[],function(){return{query:function(e,t){var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),i=(t=t?t.substr(t.indexOf("?")+1):window.location.search.substr(1)).match(n);return null!=i?unescape(i[2]):null},getQueryJson:function(){var e,t={};if(!window.location.search)return{};e=window.location.search.substr(1).split("&");for(var n=0;n<e.length;n++){var i=e[n].split("=")||[];t[i[0]]=i[1]}return t},param:function(e){var t="",n="";for(var i in e)t+=n+i+"="+e[i],n="&";return t}}}),define("sjs/flash/swfobject",[],function(){var e=function(){function t(){if(!U){try{var e=A.getElementsByTagName("body")[0].appendChild(f("span"));e.parentNode.removeChild(e)}catch(e){return}U=!0;for(var t=L.length,n=0;n<t;n++)L[n]()}}function n(e){U?e():L[L.length]=e}function i(e){if(typeof C.addEventListener!=I)C.addEventListener("load",e,!1);else if(typeof A.addEventListener!=I)A.addEventListener("load",e,!1);else if(typeof C.attachEvent!=I)!function(e,t,n){e.attachEvent(t,n),P[P.length]=[e,t,n]}(C,"onload",e);else if("function"==typeof C.onload){var t=C.onload;C.onload=function(){t(),e()}}else C.onload=e}function r(){var e=R.length;if(e>0)for(var t=0;t<e;t++){var n=R[t].id,i=R[t].callbackFn,r={success:!1,id:n};if(B.pv[0]>0){var l=u(n);if(l)if(!p(R[t].swfVersion)||B.wk&&B.wk<312)if(R[t].expressInstall&&o()){var d={};d.data=R[t].expressInstall,d.width=l.getAttribute("width")||"0",d.height=l.getAttribute("height")||"0",l.getAttribute("class")&&(d.styleclass=l.getAttribute("class")),l.getAttribute("align")&&(d.align=l.getAttribute("align"));for(var h={},g=l.getElementsByTagName("param"),v=g.length,y=0;y<v;y++)"movie"!=g[y].getAttribute("name").toLowerCase()&&(h[g[y].getAttribute("name")]=g[y].getAttribute("value"));s(d,h,n,i)}else(function(e){if(B.ie&&B.win&&4!=e.readyState){var t=f("div");e.parentNode.insertBefore(t,e),t.parentNode.replaceChild(c(e),t),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}else e.parentNode.replaceChild(c(e),e)})(l),i&&i(r);else m(n,!0),i&&(r.success=!0,r.ref=a(n),i(r))}else if(m(n,!0),i){var b=a(n);b&&typeof b.SetVariable!=I&&(r.success=!0,r.ref=b),i(r)}}}function a(e){var t=null,n=u(e);if(n&&"OBJECT"==n.nodeName)if(typeof n.SetVariable!=I)t=n;else{var i=n.getElementsByTagName(E)[0];i&&(t=i)}return t}function o(){return!F&&p("6.0.65")&&(B.win||B.mac)&&!(B.wk&&B.wk<312)}function s(e,t,n,i){F=!0,b=i||null,_={success:!1,id:n};var r=u(n);if(r){"OBJECT"==r.nodeName?(v=c(r),y=null):(v=r,y=n),e.id=T,(typeof e.width==I||!/%$/.test(e.width)&&parseInt(e.width,10)<310)&&(e.width="310"),(typeof e.height==I||!/%$/.test(e.height)&&parseInt(e.height,10)<137)&&(e.height="137"),A.title=A.title.slice(0,47)+" - Flash Player Installation";var a=B.ie&&B.win?"ActiveX":"PlugIn",o="MMredirectURL="+encodeURI(C.location).toString().replace(/&/g,"%26")+"&MMplayerType="+a+"&MMdoctitle="+A.title;if(typeof t.flashvars!=I?t.flashvars+="&"+o:t.flashvars=o,B.ie&&B.win&&4!=r.readyState){var s=f("div");n+="SWFObjectNew",s.setAttribute("id",n),r.parentNode.insertBefore(s,r),r.style.display="none",function(){4==r.readyState?r.parentNode.removeChild(r):setTimeout(arguments.callee,10)}()}l(e,t,n)}}function c(e){var t=f("div");if(B.win&&B.ie)t.innerHTML=e.innerHTML;else{var n=e.getElementsByTagName(E)[0];if(n){var i=n.childNodes;if(i)for(var r=i.length,a=0;a<r;a++)1==i[a].nodeType&&"PARAM"==i[a].nodeName||8==i[a].nodeType||t.appendChild(i[a].cloneNode(!0))}}return t}function l(e,t,n){var i,r=u(n);if(B.wk&&B.wk<312)return i;if(r)if(typeof e.id==I&&(e.id=n),B.ie&&B.win){var a="";for(var o in e)e[o]!=Object.prototype[o]&&("data"==o.toLowerCase()?t.movie=e[o]:"styleclass"==o.toLowerCase()?a+=' class="'+e[o]+'"':"classid"!=o.toLowerCase()&&(a+=" "+o+'="'+e[o]+'"'));var s="";for(var c in t)t[c]!=Object.prototype[c]&&(s+='<param name="'+c+'" value="'+t[c]+'" />');r.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+a+">"+s+"</object>",D[D.length]=e.id,i=u(e.id)}else{var l=f(E);l.setAttribute("type",S);for(var d in e)e[d]!=Object.prototype[d]&&("styleclass"==d.toLowerCase()?l.setAttribute("class",e[d]):"classid"!=d.toLowerCase()&&l.setAttribute(d,e[d]));for(var p in t)t[p]!=Object.prototype[p]&&"movie"!=p.toLowerCase()&&function(e,t,n){var i=f("param");i.setAttribute("name",t),i.setAttribute("value",n),e.appendChild(i)}(l,p,t[p]);r.parentNode.replaceChild(l,r),i=l}return i}function d(e){var t=u(e);t&&"OBJECT"==t.nodeName&&(B.ie&&B.win?(t.style.display="none",function(){4==t.readyState?function(e){var t=u(e);if(t){for(var n in t)"function"==typeof t[n]&&(t[n]=null);t.parentNode.removeChild(t)}}(e):setTimeout(arguments.callee,10)}()):t.parentNode.removeChild(t))}function u(e){var t=null;try{t=A.getElementById(e)}catch(e){}return t}function f(e){return A.createElement(e)}function p(e){var t=B.pv,n=e.split(".");return n[0]=parseInt(n[0],10),n[1]=parseInt(n[1],10)||0,n[2]=parseInt(n[2],10)||0,t[0]>n[0]||t[0]==n[0]&&t[1]>n[1]||t[0]==n[0]&&t[1]==n[1]&&t[2]>=n[2]}function h(e,t,n,i){if(!B.ie||!B.mac){var r=A.getElementsByTagName("head")[0];if(r){var a=n&&"string"==typeof n?n:"screen";if(i&&(w=null,x=null),!w||x!=a){var o=f("style");o.setAttribute("type","text/css"),o.setAttribute("media",a),w=r.appendChild(o),B.ie&&B.win&&typeof A.styleSheets!=I&&A.styleSheets.length>0&&(w=A.styleSheets[A.styleSheets.length-1]),x=a}B.ie&&B.win?w&&typeof w.addRule==E&&w.addRule(e,t):w&&typeof A.createTextNode!=I&&w.appendChild(A.createTextNode(e+" {"+t+"}"))}}}function m(e,t){if(M){var n=t?"visible":"hidden";U&&u(e)?u(e).style.visibility=n:h("#"+e,"visibility:"+n)}}function g(e){return null!=/[\\\"<>\.;]/.exec(e)&&typeof encodeURIComponent!=I?encodeURIComponent(e):e}var v,y,b,_,w,x,I="undefined",E="object",j="Shockwave Flash",S="application/x-shockwave-flash",T="SWFObjectExprInst",O="onreadystatechange",C=window,A=document,k=navigator,N=!1,L=[function(){N?function(){var e=A.getElementsByTagName("body")[0],t=f(E);t.setAttribute("type",S);var n=e.appendChild(t);if(n){var i=0;!function(){if(typeof n.GetVariable!=I){var a=n.GetVariable("$version");a&&(a=a.split(" ")[1].split(","),B.pv=[parseInt(a[0],10),parseInt(a[1],10),parseInt(a[2],10)])}else if(i<10)return i++,void setTimeout(arguments.callee,10);e.removeChild(t),n=null,r()}()}else r()}():r()}],R=[],D=[],P=[],U=!1,F=!1,M=!0,B=function(){var e=typeof A.getElementById!=I&&typeof A.getElementsByTagName!=I&&typeof A.createElement!=I,t=k.userAgent.toLowerCase(),n=k.platform.toLowerCase(),i=/win/.test(n||t),r=/mac/.test(n||t),a=!!/webkit/.test(t)&&parseFloat(t.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")),o=!1,s=[0,0,0],c=null;if(typeof k.plugins!=I&&typeof k.plugins[j]==E)!(c=k.plugins[j].description)||typeof k.mimeTypes!=I&&k.mimeTypes[S]&&!k.mimeTypes[S].enabledPlugin||(N=!0,o=!1,c=c.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),s[0]=parseInt(c.replace(/^(.*)\..*$/,"$1"),10),s[1]=parseInt(c.replace(/^.*\.(.*)\s.*$/,"$1"),10),s[2]=/[a-zA-Z]/.test(c)?parseInt(c.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof C.ActiveXObject!=I)try{var l=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");l&&(c=l.GetVariable("$version"))&&(o=!0,c=c.split(" ")[1].split(","),s=[parseInt(c[0],10),parseInt(c[1],10),parseInt(c[2],10)])}catch(e){}return{w3:e,pv:s,wk:a,ie:o,win:i,mac:r}}();return B.w3&&((typeof A.readyState!=I&&"complete"==A.readyState||typeof A.readyState==I&&(A.getElementsByTagName("body")[0]||A.body))&&t(),U||(typeof A.addEventListener!=I&&A.addEventListener("DOMContentLoaded",t,!1),B.ie&&B.win&&(A.attachEvent(O,function(){"complete"==A.readyState&&(A.detachEvent(O,arguments.callee),t())}),C==top&&function(){if(!U){try{A.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}t()}}()),B.wk&&function(){if(!U)/loaded|complete/.test(A.readyState)?t():setTimeout(arguments.callee,0)}(),i(t))),B.ie&&B.win&&window.attachEvent("onunload",function(){for(var t=P.length,n=0;n<t;n++)P[n][0].detachEvent(P[n][1],P[n][2]);for(var i=D.length,r=0;r<i;r++)d(D[r]);for(var a in B)B[a]=null;B=null;for(var o in e)e[o]=null;e=null}),{registerObject:function(e,t,n,i){if(B.w3&&e&&t){var r={};r.id=e,r.swfVersion=t,r.expressInstall=n,r.callbackFn=i,R[R.length]=r,m(e,!1)}else i&&i({success:!1,id:e})},getObjectById:function(e){if(B.w3)return a(e)},embedSWF:function(e,t,i,r,a,c,d,u,f,h){var g={success:!1,id:t};B.w3&&!(B.wk&&B.wk<312)&&e&&t&&i&&r&&a?(m(t,!1),n(function(){i+="",r+="";var n={};if(f&&typeof f===E)for(var v in f)n[v]=f[v];n.data=e,n.width=i,n.height=r;var y={};if(u&&typeof u===E)for(var b in u)y[b]=u[b];if(d&&typeof d===E)for(var _ in d)typeof y.flashvars!=I?y.flashvars+="&"+_+"="+d[_]:y.flashvars=_+"="+d[_];if(p(a)){var w=l(n,y,t);n.id==t&&m(t,!0),g.success=!0,g.ref=w}else{if(c&&o())return n.data=c,void s(n,y,t,h);m(t,!0)}h&&h(g)})):h&&h(g)},switchOffAutoHideShow:function(){M=!1},ua:B,getFlashPlayerVersion:function(){return{major:B.pv[0],minor:B.pv[1],release:B.pv[2]}},hasFlashPlayerVersion:p,createSWF:function(e,t,n){return B.w3?l(e,t,n):void 0},showExpressInstall:function(e,t,n,i){B.w3&&o()&&s(e,t,n,i)},removeSWF:function(e){B.w3&&d(e)},createCSS:function(e,t,n,i){B.w3&&h(e,t,n,i)},addDomLoadEvent:n,addLoadEvent:i,getQueryParamValue:function(e){var t=A.location.search||A.location.hash;if(t){if(/\?/.test(t)&&(t=t.split("?")[1]),null==e)return g(t);for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i].substring(0,n[i].indexOf("="))==e)return g(n[i].substring(n[i].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var e=u(T);e&&v&&(e.parentNode.replaceChild(v,e),y&&(m(y,!0),B.ie&&B.win&&(v.style.display="block")),b&&b(_)),F=!1}}}}();return e}),define("sjs/base/core",["sjs/util/url","sjs/flash/swfobject"],function(url,swfobject){return{get_xy:function(e){var t={x:0,y:0},n=this,i=function(e){var t={x:0,y:0};if(e){var n=e.getBoundingClientRect();t={x:parseInt(n.left),y:parseInt(n.top)}}return t},r=function(e){if(!e)return!0;return"none"===n.get_style(e,"display")},a=e,o=i(a);for(t.x=o.x,t.y=o.y;r(a)&&0==t.x&&0==t.y;)a=a.parentNode,o=i(a),t.x=o.x,t.y=o.y;return t},get_style:function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView?document.defaultView.getComputedStyle(e,null)[t]:void 0},each:function(e,t,n){if(null!=e)if(e.length===+e.length)for(var i=0,r=e.length;i<r;i++)t.call(n,i,e[i],e);else for(var a in e)_.has(e,a)&&t.call(n,a,e[a],e)},extend:function(e){return this.each(Array.prototype.slice.call(arguments,1),function(t,n){if(n)for(var i in n)e[i]=n[i]}),e},get_el:function(e){return document.getElementById(e)},jsonp:function(e){var t="sjs_"+(Math.random()+"").substr(2,16),n=document.createElement("script"),i=document.getElementsByTagName("head")[0];n.charset="utf-8",n.unload=function(){n.onload=n.onreadystatechange=null,i.removeChild(n)},n.onload=n.onreadystatechange=function(){n.readyState&&!/loaded|complete/.test(n.readyState)||(n.unload(),n=void 0)};var r=e.success||function(){},a=e.error||function(){},o=function(e,t,n){t(e),window.clearTimeout(n.timepoint),n.complete&&n.complete(e)};window[t]=function(t){o(t,r,e)},e.timeout&&(e.timepoint=window.setTimeout(function(){o({code:"timeout"},a,e)},e.timeout)),n.src=e.url+(e.url.indexOf("?")>=0?"&":"?")+(e.jsonp||"callback")+"="+t+"&"+url.param(e.data),i.appendChild(n)},using:function(e,t,n){"string"==typeof e&&(n=t,t=e,e=window);var i=t.split(".");return this.each(i,function(t){e[i[t]]=e[i[t]]||(t===i.length-1?n||{}:{}),e=e[i[t]]}),e},tmpl:function(_html,obj){for(var arr=_html.match(/{{\w+}}/g),i=0,j=arr.length;i<j;i++){var pro=arr[i].replace("{{","").replace("}}","");_html=_html.replace(eval("/"+arr[i]+"/g"),obj[pro]||0)}return _html},sflash:function(){var e=swfobject.getFlashPlayerVersion();return e.major+e.minor+e.release?"1":"0"},bind:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):this.using(e,"events."+t,[]).push(n)},unbind:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):this.using(e,"events")[t]=void 0},fire:function(e,t,n){var i=this.using(e,"events");i[t]&&this.each(i[t],function(t){"function"==typeof this&&this.call(e,n)})},is_array:function(e){return"[object Array]"===Object.prototype.toString.call(e)},is_object:function(e){return"[object Object]"===Object.prototype.toString.call(e)},get_Pos:function(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+document.body.scrollLeft-document.body.clientLeft,y:e.clientY+document.body.scrollTop-document.body.clientTop}},domready:function(e){/loaded|complete/.test(document.readyState)?e():document.addEventListener?document.addEventListener("DOMContentLoaded",function(){document.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1):document.attachEvent&&document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&(document.detachEvent("onreadystatechange",arguments.callee),e())})}}}),define("sjs/ui/render",["sjs/base/core","sjs/util/url","sjs/flash/swfobject"],function(e,t,n){var i={insert:function(e,t){var n=document.getElementById(e.cont_id),i="insert"+e.type.replace(/\s[a-z]/g,function(e){return e.toLocaleUpperCase()}).replace(/^[a-z]/,function(e){return e.toLocaleUpperCase()});if(i in this)return this[i].call(n,e)},insertText:function(e){this.innerHTML='<a href="'+e.click+'" target="_blank">'+e.text+"</a>"},insertHTML:function(e){this.innerHTML=e.html},insertImage:function(e){this.innerHTML='<a href="'+e.click+'" target="_blank"><img src="'+e.file+'" border="0" width="'+e.width+'" height="'+e.height+'"/></a>'},insertIframe:function(e){this.innerHTML='<iframe width="'+e.width+'" height="'+e.height+'" frameborder="0" marginwidth="0" marginheight="0" scrolling="no" src="'+e.file+'"></iframe>'},insertScript:function(e){var t=document.createElement("script");t.charset="utf-8",t.src=e.file,this.appendChild(t)},insertFlash:function(i){var r=i.cont_id+"_flash",a=e.extend({swfVersionStr:"10.1",xiSwfUrlStr:"",flashvarsObj:{},parObj:{wmode:"opaque",allowScriptAccess:"always"},attObj:{wmode:"opaque",allowScriptAccess:"always"}},i);if(a.attObj.data=a.file,a.attObj.id=r,a.attObj.width=a.width,a.attObj.height=a.height,a.parObj.flashvars=a.attObj.flashvars=t.param(a.flashvarsObj),"isnot_flashcover"in i)var o='<div id="'+r+'" style="width:'+a.width+"px;height:"+a.height+'px;"></div>';else o='<div style="position:relative;width:'+a.width+"px;height:"+a.height+'px;margin:0 auto;"><div style="position:absolute;z-index:1;width:'+a.width+"px;height:"+a.height+'px;top:0px;left:0px;"><div id="'+r+'"></div></div><div style="width:'+a.width+"px;height:"+a.height+'px;position:absolute;z-index:2;top:0px;left:0px;"><a href="'+a.click+'" target="_blank"><img src="//images.sohu.com/bill/default/1x1.gif" border="0" width="'+a.width+'" height="'+a.height+'" /></a></div></div>';return this.innerHTML=o,n&&n.createSWF(a.attObj,a.parObj,r)}};return{insert:function(){i.insert.apply(i,arguments)}}}),define("sjs/data/guid",[],function(){return{create:function(){var e=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}),define("sjs/matrix/ad/config",["sjs/base/core","sjs/util/url","sjs/data/guid"],function(e,t,n){var i={},r={_db:{APPID:"pcnews",NAME:"config.passion",POSITION_ID_PREFIX:"beans_",COOKIE_ID_PREFIX:"beans_",PAGEID:void 0,CHANNELID:void 0,PAGEVIEWID:n.create(),IP:t.query("ip"),SOIP:t.query("soip")||window.sohu_IP_Loc,MAX_TURN:60,DEFAULT_TIMEOUT:1e3,RSLN:window.screen.width+"*"+window.screen.height,SWF:e.sflash(),CLICK_MACRO:"[_SOHU_CLICK_ENC_]",PAGEREF:encodeURIComponent(document.referrer),URL_DEFBEAN:"//images.sohu.com/bill/default/{{adps}}.html?pid={{itemspaceid}}",URL_ADSERVER:"//s.go.sohu.com/adgtr/",URL_ADSERVER_TEST:"//t.adrd.sohuno.com/adgtr/?bucketid=2",URL_PV_STAT:["//i.go.sohu.com/count/v"],URL_AV_STAT:["//i.go.sohu.com/count/av"],URL_CLICK_STAT:["//i.go.sohu.com/count/c"],URL_ERROR_STAT:["//i.go.sohu.com/count/e"]},set:function(e,t,n){if(i[e])throw'can NOT cover "'+e+'"!';return n&&(i[e]=!0),this._db[e]=t,t},get:function(e){return this._db[e]},del:function(e){var t=this._db[e];return delete this._db[e],delete i[e],t}};return e.extend(r._db,e.using("config.passion")),r}),define("sjs/data/cookie",[],function(){function e(e){return decodeURIComponent(e.replace(t," "))}var t=/\+/g;return function(t,n,i){if(void 0!==n){if(i=i||{},null===n&&(i.expires=-1),"number"==typeof i.expires){var r=i.expires,a=i.expires=new Date;a.setDate(a.getDate()+r)}return n+="",document.cookie=[encodeURIComponent(t),"=",encodeURIComponent(n),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var o=document.cookie.split("; "),s=0,c=o.length;s<c;s++){var l=o[s].split("=");if(e(l.shift())===t)return e(l.join("="))}return null}}),define("sjs/matrix/ad/stat",["sjs/base/core","sjs/matrix/ad/config","sjs/data/cookie"],function(e,t,n){var i=t._db;return{get:function(t,n){if(t){if(n&&n.cont_id){var r=document.getElementById(n.cont_id)||document.getElementById(n.cont_id+"_"+n.prePosition);if(r){var a=e.get_xy(r);n.x=a.x,n.y=a.y}}var o="string"==typeof t?i["URL_"+t.toUpperCase()+"_STAT"]||new Array(t):t,s=n?this.param(this.build(n)):"";void 0!=s.match(/apid=beans_[0-9]+_[0-9]+/)&&(s=s.replace(/(apid=beans_[0-9]+)_[0-9]+/,"$1")),n&&n.forpvcount&&(s+="&forpvcount=1"),n&&void 0!==n.source&&(s+=(s?"&":"?")+"source="+n.source);for(var c=0;c<o.length;c++)if(/^(http|\/\/)/i.test(o[c])){var l="="+Math.random(),d=window["_IMG"+l]=new Image;d.onload=d.onerror=function(){d=null,window["_IMG"+l]=null},d.src=o[c]+s+"&timestamp="+(new Date).getTime(),setTimeout(function(){},1e3)}}},build:function(e){var t=function(t){return void 0!==e[t]?e[t]:""};return{smuid:t("smuid")||"",suv:n("SUV")||"",subid:t("subid"),newsid:t("newsid"),appid:i.APPID,aid:t("adid"),apid:t("cont_id"),impid:t("impression_id"),at:1,mkey:t("monitorkey"),latcy:t("latency"),freq:t("freq"),turn:t("turn"),ax:t("x"),ay:t("y"),cx:t("cx"),cy:t("cy"),ed:t("ed"),bucket:t("bucket"),ext:t("ext"),uloc:t("uloc"),position:t("prePosition")||t("position"),shbd_monitor_ext:t("shbd_monitor_ext"),supplyid:""===t("supplyid")?"1":t("supplyid"),pagerefer:i.PAGEREF,rsln:i.RSLN,sf:t("sf"),pgid:i.PAGEID||"",newschn:i.CHANNELID||"",r:(Math.random()+"").substring(2,15),_r:+new Date}},param:function(e){var t="";for(var n in e)("cx"!=n&&"cy"!=n||e[n])&&(t+="&"+n+"="+e[n]);return t.replace("&","?")},get_url:function(e,t){if(!e)return"";if(e=e.toUpperCase(),!i["URL_"+e+"_STAT"])return"";if(t){var n=this.build(t);n=this.param(n);var r=i["URL_"+e+"_STAT"][0],a=window.location.protocol;return(0===r.indexOf("//")?a:"")+r+n}}}}),define("sjs/data/json",[],function(){return"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var n,i,r,a,o,s=gap,c=t[e];switch(c&&"object"==typeof c&&"function"==typeof c.toJSON&&(c=c.toJSON(e)),"function"==typeof rep&&(c=rep.call(t,e,c)),typeof c){case"string":return quote(c);case"number":return isFinite(c)?String(c):"null";case"boolean":case"null":return String(c);case"object":if(!c)return"null";if(gap+=indent,o=[],"[object Array]"===Object.prototype.toString.apply(c)){for(a=c.length,n=0;n<a;n+=1)o[n]=str(n,c)||"null";return r=0===o.length?"[]":gap?"[\n"+gap+o.join(",\n"+gap)+"\n"+s+"]":"["+o.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(a=rep.length,n=0;n<a;n+=1)"string"==typeof(i=rep[n])&&(r=str(i,c))&&o.push(quote(i)+(gap?": ":":")+r);else for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(r=str(i,c))&&o.push(quote(i)+(gap?": ":":")+r);return r=0===o.length?"{}":gap?"{\n"+gap+o.join(",\n"+gap)+"\n"+s+"}":"{"+o.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var n,i,r=e[t];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(void 0!==(i=walk(r,n))?r[n]=i:delete r[n]);return reviver.call(e,t,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),JSON}),define("sjs/matrix/ad/dmp",["sjs/base/core","sjs/data/json","sjs/data/cookie","sjs/util/url"],function(e,t,n,i){return{url:"//t.go.sohu.com/ask_cm.gif",init:function(){var r=this,a=n("SUV"),o=n("beans_dmp"),s=i.query("ref"),c={_:(Math.random()+"").substring(2,15)},l=n("beans_dmp_done"),d=new Date;tomorrow=new Date(d.getFullYear(),d.getMonth(),d.getDate()+1),l||(this.idstr=a,this.exp=t.parse(decodeURIComponent(o))||{},this.idstr&&(s&&(c.ref=s),e.jsonp({url:r.url,data:c,success:function(e,t){e&&e.data&&e.data.length&&(r.resolve(e.data),n("beans_dmp_done","1",{expires:tomorrow,domain:"sohu.com",path:"/"}))}})))},resolve:function(e){for(var i=Math.ceil((new Date).getTime()/1e3),r=this.exp,a=0,o=e.length;a<o;a++){var s=e[a].MID,c=e[a].MURL;this.report(c),this.exp[s]=i}n("beans_dmp",encodeURIComponent(t.stringify(r)),{domain:"sohu.com",path:"/",expires:30})},report:function(e){e=e.replace(/{{idstr}}/g,this.idstr);var t="="+Math.random(),n=window["_DMP_IMG"+t]=new Image(1,1);n.onload=n.onerror=function(){n=null,window["_DMP_IMG"+t]=null},n.src=e}}}),define("sjs/matrix/ad/data",["sjs/base/core","sjs/data/cookie","sjs/data/json","sjs/matrix/ad/config"],function(e,t,n,i){var r=i._db,a={get:function(t,n){var i=e.using("config.passion");r.CHANNELID!=i.CHANNELID&&(e.extend(r,e.using("config.passion")),this.turn=null),new o(t,n).get()},get_turn:function(e){if(!this.turn){var i=r.COOKIE_ID_PREFIX+"new_turn_"+r.CHANNELID,a=r.PAGEID||encodeURIComponent(document.location.hostname),o=t(i)||"{}",s=(o=n.parse(o))[a]||parseInt(Math.random()*r.MAX_TURN+1);this.turn=s;var c=s+1;c>r.MAX_TURN&&(c=1),window.bPassionTurnHasAdded||(o[a]=c,t(i,n.stringify(o),{path:"/",expires:1}),window.bPassionTurnHasAdded=!0)}return e?(this.turn-1)%e+1:this.turn}},o=function(e,t){this.callback=t,this.beans=e,this.data=[],this.maxreads=[]};return o.prototype={get:function(){var e=this.beans;if(e.itemspaceid){var t={};t[e.itemspaceid]=e,e=this.beans=t}for(var n in e){var i,r=e[n],a=201;r.adsrc?a=parseInt(r.adsrc):r.adsrc=a,r.itemspaceid=n,r.status=-1,r.position&&(r.prePosition=r.position),a>=200&&(i=this.get_from_cpds(r),200===a&&(r.status=0)),200===a||i||(r.adsrc=a%200,this.get_from_ads(r)),this.data.push(r)}this.check_complete()},get_from_cpds:function(t){var n=1,i=null,o=t.itemspaceid,s=!1,c=window.AD_DATA||{};if(/^\d{4,8}$/.test(o)&&(t.turn||(t.turn=a.get_turn(t.max_turn||1)),n=t.turn-1,i=c[o]&&c[o][n]&&c[o][n].data||{},s=c[o]&&c[o][n]&&c[o][n].isloc,i=s&&(r.IP||r.SOIP)?i[r.IP]||i[r.SOIP.substr(0,6)]||i[r.SOIP.substr(0,4)]||i.DEFAULT:i.DEFAULT))return t.adtype=6,t.status=0,e.extend(t,i),i},get_from_ads:function(n){var i=this,o=n.query||{};if(!n.itemspaceid||!(n.width&&n.height||n.adps))return n.status=0;if(o.itemspaceid=n.itemspaceid,!n.adps){var s=(n.height+"").length;n.adps=o.adps=n.width+(1<<(s>=4?0:4-s)).toString(2).substr(1)+n.height}o.adps||(o.adps=n.adps),o.adsrc||(o.adsrc=n.adsrc),o.turn||(o.turn=n.turn||a.get_turn(n.max_turn)),n.maxreads&&(o.maxreads=n.maxreads||1),n.position&&(o.position=n.position),n.multichn&&(o.multichn=n.multichn),r.TAG&&(o.ic=r.TAG),n.turn||(n.turn=o.turn),o.sf=n.sf="30000003"==n.adps?0:e.sflash(),o.pgid=r.PAGEVIEWID,o.newschn=r.CHANNELID,o.appid=n.appid||"",o.subid=n.subid||"",o.SUV=t("SUV")||"",o.newsid=n.newsid||"",o.yyid=n.yyid||"",o.smuid=n.smuid||"",o._=+new Date,n.needad&&n.needad.length&&(o.needad=n.needad.length),n.start_time=(new Date).getTime(),e.jsonp({url:location.href.indexOf("?test")>-1?r.URL_ADSERVER_TEST:r.URL_ADSERVER,timeout:r.DEFAULT_TIMEOUT,data:o,complete:function(e,t){i.complete(n)},success:function(e,t){i.success(e,n)}})},complete:function(e){e.status=0,this.check_complete()},success:function(t,n){if(t&&t.length)for(var i=0;i<t.length;i++)t[i].by_server="1",t[i].end_time=(new Date).getTime(),t[i].latency=t[i].end_time-n.start_time,n.needad&&n.needad.length&&(t[i].itemspaceid=n.needad[i]),n.maxreads?this.maxreads.push(t[i]):e.extend(n,t[i]);else if(n.end_time=(new Date).getTime(),n.callback)try{n.callback([])}catch(e){console.error("客户端传入回调函数执行时出现错误:",e.stack)}n.end_time&&(n.latency=n.end_time-n.start_time)},check_complete:function(){var e=this.beans;for(pro in e)if(-1===e[pro].status)return;this.data&&this.data[0].maxreads?this.callback.call(this,this.maxreads):this.callback.call(this,this.data)}},a}),define("sjs/matrix/ad/passion",["sjs/base/core","sjs/ui/render","sjs/matrix/ad/stat","sjs/matrix/ad/dmp","sjs/matrix/ad/data","sjs/matrix/ad/config"],function(core,render,stat,dmp,db,config){var CONFIG=config._db,a_av_collection=[],n_av_item_index=0,passion={init:function(){this.ad_list={},this.fReportGlobalPv(),dmp.init()},config:function(e){return core.extend(CONFIG,e),this},ones:function(e){if(e&&e.length){var t=this;core.each(e,function(e,n){var i=t.format(n);i&&t.load(i)})}},fReportGlobalPv:function(){window.sohu_mp&&window.sohu_mp.ext(function(e){CONFIG.PAGEID=e.get_pgid(),CONFIG.CHANNELID=e.get_news_chn()}),stat.get("pv",{cont_id:"beans_15568",turn:1,forpvcount:"1"})},get:function(e){var t=this;db.get(e,function(n){if(e.maxreads){core.each(n,function(t,n){core.extend(n,e),n.index=t});for(var i=0;i<e.maxreads-n.length;i++)e.cont_id=config._db.POSITION_ID_PREFIX+e.itemspaceid,t.after(e);if(e.callback)try{e.callback(n)}catch(e){console.error("客户端传入回调函数执行时出现错误:",e.stack)}}t.ones(n)})},load:function(e){var t=e.resource;if(t.cont_id=e.cont_id,e.callback&&"function"==typeof e.callback){if(!e.maxreads)try{e.callback(e)}catch(e){console.error("客户端传入回调函数执行时出现错误:",e.message,e.stack)}}else render.insert(t);"script"!==t.type&&this.after(e),"function"==typeof CONFIG.AFTERLOAD&&CONFIG.AFTERLOAD.call(this,e)},active:function(e){var t=function(e){for(var t=e.offsetTop,n=e.offsetParent;null!=n;)t+=n.offsetTop,n=n.offsetParent;return t}(e),n=t+e.offsetHeight,i=document.documentElement.scrollTop||document.body.scrollTop,r=i+(document.documentElement.clientHeight||document.body.clientHeight);return t>=i&&n<=r},after:function(e){var t=this,n=document.getElementById(e.cont_id)||document.getElementById(e.cont_id+"_"+e.prePosition);if(n&&e.resource){var i=core.get_xy(n);e.x=i.x,e.y=i.y}if(!e.no_vc){if(stat.get("pv",e),!e.resource)return;stat.get(e.imp),stat.get(e.resource.imp)}if(n){e.av_index=n_av_item_index;var r=function(){t.active(n)&&(e.no_av=1,stat.get("av",e),core.unbind(window,"scroll",r),a_av_collection[e.av_index]=null)},a=function(t){var n=(t=t||window.event).srcElement||t.target,i=!1,r=function(e,t){var i=t||n,r=i.className,a=!1;return e?(i&&(a=!!~r.indexOf(e)),a):a};if(n&&(i=r("got-i-icon")||r("god-mark")),i)return!1;var a=core.get_Pos(t),o=a.x>e.x?a.x-e.x:a.x,s=a.y>e.y?a.y-e.y:a.y,c=core.extend({},e,{cx:o,cy:s});e.resource.clkm?stat.get(e.resource.clkm):e.resource.click_imp&&stat.get(e.resource.click_imp),stat.get("click",c)};e.no_av||(core.bind(window,"scroll",r),r(),a_av_collection[n_av_item_index]=r,n_av_item_index++),e.no_cc||(e.maxreads>1?core.bind(n.getElementsByTagName("a")[e.index],"click",a):e.special?core.each(n.getElementsByTagName("a"),function(e,t){core.bind(t,"click",a)}):core.bind(n,"click",a)),e.callback||(1===e.adtype&&"text"!==e.resource.type&&this.iac(e),"text"!==e.resource.type&&this.icon(e))}},format:function(e){if(e.adps&&(e.width=Math.floor(e.adps/1e4),e.height=e.adps%1e4),!e.itemspaceid||!e.width||!e.height)return!1;if(!e.resource){if(e.nodefbeans)return e.cont_id=config._db.POSITION_ID_PREFIX+e.itemspaceid,this.after(e),!1;e=this.defbean(e)}return e.id=e.adid+"_"+e.itemspaceid,e.position=e.position>0?e.position:"",e.cont_id||(e.cont_id=CONFIG.POSITION_ID_PREFIX+e.itemspaceid),e.status=0,e=this.macro(e)},macro:function(bean){var res=bean.resource,repl=function(e){return e.replace(/\${TS}/g,(new Date).getTime()).replace(/@local@/g,window.location.href).replace(/\${SLOTID}/g,bean.itemspaceid+"&mk="+bean.monitorkey)},symb=function(e){return e.indexOf("?")>=0?"&":"?"},fmt=function(thr){try{var _imp=eval(thr);_imp&&(thr=_imp)}catch(e){}"string"==typeof thr&&(thr=thr.split("|"));for(var i=0,j=thr.length;i<j;i++)thr[i]=repl(thr[i]),thr[i].indexOf(".optaim.com")>0&&(thr[i]+=symb(thr[i])+"impid="+bean.impression_id+"&apid=beans_"+bean.itemspaceid);return thr};if(res.file&&(res.file=res.file.replace(/^http(s)?:/,"")),res.imp&&(res.imp=fmt(res.imp)),res.clkm&&(res.clkm=fmt(res.clkm)),res.click&&(res.click=repl(res.click),res.click.indexOf("//clk.optaim.com/event.ng")>=0&&(res.click+=symb(res.click)+"impid="+bean.impression_id+"&apid="+bean.cont_id)),"iframe"===res.type&&res.file){var container=document.getElementById(bean.cont_id);container&&(bean.x=parseInt(container.getBoundingClientRect().left),bean.y=parseInt(container.getBoundingClientRect().top)),res.file=res.file.replace("[impression_id]",bean.impression_id);var _oQuery=core.extend({},bean,{cx:bean.x,cy:bean.y}),_clickUrl=encodeURIComponent(stat.get_url("click",_oQuery));res.file.indexOf(CONFIG.CLICK_MACRO)>-1?res.file=res.file.replace(new RegExp(CONFIG.CLICK_MACRO.replace(/(\[|\])/g,"\\$1"),"g"),_clickUrl):res.file+=symb(res.file)+"clkm="+_clickUrl}return bean},defbean:function(e){var t=(e.height+"").length;e.adps=e.width+(1<<(t>=4?0:4-t)).toString(2).substr(1)+e.height;var n=e.defbeans&&e.defbeans[0]||e.defbean||{resource:{height:e.height,width:e.width,file:CONFIG.URL_DEFBEAN.replace("{{adps}}",e.adps).replace("{{itemspaceid}}",e.itemspaceid),type:"iframe"}};return n.adtype=0,core.extend(e,n)},iac:function(e){var t=document.getElementById(e.cont_id)||document.getElementById(e.cont_id+e.prePosition),n=document.createElement("a");t.style.position="relative",t.style.zIndex=0,n.href="//www.iac-i.org/privacy",n.target="_blank",n.style.top="0px",n.style.left=e.width-18+"px",n.style.position="absolute",n.style.zIndex=4,n.style.width="18px",n.style.height="18px",n.style.backgroundImage="url(//images.sohu.com/bill/static/logo4.png)",t.appendChild(n)},icon:function(e){var t=document.getElementById(e.cont_id);t.style.position="relative",t.style.zIndex=0,t.appendChild(function(){var t=document.createElement("div");return t.style.bottom="0",t.style.left="0",t.style.position="absolute",t.style.height="15px",t.style.lineHeight="15px",t.style.color="#fff",t.style.padding="1px 0 0 0",t.style.background="url(//images.sohu.com/bill/static/0/pcicon.png) repeat",t.style.zIndex=4,t.innerHTML=function(e){var t=e.dsp_source?e.dsp_source.replace(/^(\s+)|(\s+)$/g,""):"";return t&&t+"|"}(e)+"广告",t}())}};return passion.init(),{trigger_av:function(){if(a_av_collection&&a_av_collection.length)for(var e=0;e<a_av_collection.length;e++)a_av_collection[e]&&a_av_collection[e]()},ones:function(e){core.is_array(e)?passion.ones(e):core.is_object(e)&&passion.get(e)},config:function(e){return passion.config(e)},report:function(e,t){stat.get(e,t)},sflash:function(){return core.sflash()},get_turn:function(e){return db.get_turn(e)}}});