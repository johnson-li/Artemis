!function(t){function e(e){for(var s,l,n=e[0],r=e[1],a=e[2],c=0,u=[];c<n.length;c++)l=n[c],Object.prototype.hasOwnProperty.call(o,l)&&o[l]&&u.push(o[l][0]),o[l]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);for(h&&h(e);u.length;)u.shift()();return _.push.apply(_,a||[]),i()}function i(){for(var t,e=0;e<_.length;e++){for(var i=_[e],s=!0,n=1;n<i.length;n++){var r=i[n];0!==o[r]&&(s=!1)}s&&(_.splice(e--,1),t=l(l.s=i[0]))}return t}var s={},o={"web/ui_common":0},_=[];function l(e){if(s[e])return s[e].exports;var i=s[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,l),i.l=!0,i.exports}l.m=t,l.c=s,l.d=function(t,e,i){l.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},l.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},l.t=function(t,e){if(1&e&&(t=l(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(l.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)l.d(i,s,function(e){return t[e]}.bind(null,s));return i},l.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return l.d(e,"a",e),e},l.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},l.p="/js/cmodules/";var n=window.webpackJsonp=window.webpackJsonp||[],r=n.push.bind(n);n.push=e,n=n.slice();for(var a=0;a<n.length;a++)e(n[a]);var h=r;_.push([276,"bundles/common","bundles/4060411aa2c063eade7896c7daf24353","bundles/2bddcf8eba73bbb0902e1b2f9d33962b"]),i()}({276:function(t,e,i){t.exports=i("MpaO")},MpaO:function(t,e,i){"use strict";i.r(e);var s=i("hmKL"),o=i("qrY5"),_=i("59zB"),l=i("qUi/"),n=i("zxIV"),r=i("lXE5"),a={showSaved:function(t){var e=ge(t),i=e&&Object(n.gpeByClass)("page_block",e),s=i&&geByClass1("page_block_saved",i);if(e&&i&&s){var o=animate.pbind(s,{opacity:1},200,animate.pbind(s,{opacity:0},2e3));a.scrollToStart(i,o)}},scrollToStart:function(t,e){var i=Object(n.getXY)(t)[1];Object(r.scrollGetY)()>i-60?(Object(r.scrollToY)(i-60,200),e&&setTimeout(e,200)):e&&e()}},h=a,c=i("btP0"),u=i("zmTt"),d=i("gdug"),b=i("t7n3"),p=i("Egk5"),m={over:function(t,e,i){if(!d.browser.mobile&&!vk.widget){hasClass(t,"ui_zoom_wrap")||addClass(t,"ui_zoom_wrap"),cur.bigphCache=cur.bigphCache||{},i=i||{};var s=Object(n.domFC)(t),o=cur.bigphCache[e];if("A"!=s.tagName||!hasClass(s,"ui_zoom_outer")){var _=o&&o._id?"/photo"+o._id+"?all=1":"/albums"+e;(s=t.insertBefore(Object(n.se)(`<a class="ui_zoom_outer" href="${_}" aria-label="${Object(b.clean)(getLang("global_photo_full_size"))}"><div class="ui_zoom_inner"><div class="ui_zoom"><div class="ui_zoom_icon"></div></div></div></a>`),Object(n.domFC)(t)))._uid=e,s.offsetHeight,addClass(s,"ui_zoom_added")}s.onclick=m.click.pbind(t,e,i),i.fastLoad&&m.load(t,e,i)}},click:function(t,e,i,s){if(!s||!1===Object(p.checkEvent)(s)){i.fastLoad||m.load(t,e,i);var o=cur.bigphCache[e];if(o)return"load"==o||"show"==o?(cur.bigphCache[e]="show",Object(p.cancelEvent)(s)):(i.onBeforeShow&&i.onBeforeShow(),extend(o,extend({jumpTo:{z:"albums"+e}},i.showOpts||{})),showPhoto(o._id,"album"+e+"_0/rev",o,s))}},load:function(t,e,i){var s=Object(n.domFC)(t);void 0===cur.bigphCache[e]&&(cur.bigphCache[e]="load",ajax.post("al_photos.php",{act:"fast_get_photo",oid:e},{onDone:function(o){if(!o)return t.onmouseover=function(){},void Object(n.re)(s);var _="show"==cur.bigphCache[e];cur.bigphCache[e]=o,s.href="/photo"+o._id+"?all=1",_&&m.click(t,e,i)},onFail:function(){return t.onmouseover=function(){},Object(n.re)(Object(n.domFC)(t)),!0}}))}},E=m,O=(i("a1Th"),i("Btvt"),i("7jxN"));function v(t){if(!this.inited)return!1;if(t||(t=window.event),this.isHorizontal){var e=Math.floor((this.contWidth()-this.scrollWidth)*Math.min(1,(t.screenX-this.moveX)/(this.scrollbarSize-this.innerWidth-6)));Object(b.isFunction)(this.options.onScroll)&&this.options.onScroll(this.obj.scrollLeft-e,this),this.obj.scrollLeft=e}else{var i=Math.floor((this.contHeight()-this.scrollHeight)*Math.min(1,(t.screenY-this.moveY)/(this.scrollbarSize-this.innerHeight-6)));Object(b.isFunction)(this.options.onScroll)&&this.options.onScroll(this.obj.scrollTop-i,this),this.obj.scrollTop=i}return this.update(!0),!1}function g(){return!!this.inited&&(this.moveY=this.moveX=this.isDown=!1,this.isOut&&this.contOut(),removeEvent(document,"mousemove",this.mouseMove),removeEvent(document,"mouseup",this.mouseUp),setStyle(document.body,"cursor","default"),setStyle(this.obj,{pointerEvents:""}),removeClass(this.inner,"scrollbar_hovered"),Object(b.isFunction)(this.options.stopDrag)&&this.options.stopDrag(),Object(b.isFunction)(this.options.onHold)&&this.options.onHold(!1),!1)}function w(t){return!!this.inited&&(this.moveY||Object(p.checkEvent)(t)?void 0:(t||(t=window.event),addEvent(document,"mousemove",this.mouseMove),addEvent(document,"mouseup",this.mouseUp),setStyle(document.body,"cursor","pointer"),setStyle(this.obj,{pointerEvents:"none"}),this.isHorizontal?this.moveX=t.screenX-(this.inner.offsetLeft||0):this.moveY=t.screenY-(this.inner.offsetTop||0),addClass(this.inner,"scrollbar_hovered"),Object(b.isFunction)(this.options.startDrag)&&this.options.startDrag(),Object(b.isFunction)(this.options.onHold)&&this.options.onHold(!0),this.isDown=!0,Object(p.cancelEvent)(t)))}function f(t){switch(t||(t=window.event),t.keyCode){case 40:this.obj[this.scrollProp]+=40;break;case 38:this.obj[this.scrollProp]-=40;break;case 34:this.obj[this.scrollProp]+=this[this.scrollDimensionProp];break;case 33:this.obj[this.scrollProp]-=this[this.scrollDimensionProp];break;default:return!0}return this.update(!0),Object(p.cancelEvent)(t)}function M(t,e){var i=this.wheel.bind(this);this.obj=t=ge(t),this.options=extend({nomargin:!1,horizontal:!1,top:0,bottom:0,padding:3,prefix:"",hidden:0},e||{}),this.isHorizontal=this.options.horizontal,this.scrollProp=this.isHorizontal?"scrollLeft":"scrollTop",this.scrollDimensionProp=this.isHorizontal?"scrollWidth":"scrollHeight",this.topShadow=!1,this.bottomShadow=!1,this[this.scrollProp+"Last"]=this.obj[this.scrollProp],this.destroyList=[],this.mouseDown=w.bind(this),this.mouseMove=v.bind(this),this.mouseUp=g.bind(this),this.initObjMouseWheel=function(){addEvent(t,d.browserFeatures.wheelEvent,i)},this.destroyObjMouseWheel=function(){removeEvent(t,d.browserFeatures.wheelEvent,i)},this.initScrollBarMouseWheel=function(){addEvent(this.scrollbar,d.browserFeatures.wheelEvent,i)}.bind(this),this.destroyScrollBarMouseWheel=function(){removeEvent(this.scrollbar,d.browserFeatures.wheelEvent,i)}.bind(this),setTimeout(function(){setStyle(t,{overflow:"hidden"}),this.scrollbar=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_cont ":"")+"scrollbar_cont"+(this.isHorizontal?" scrollbar_cont_horiz":"")+(this.options.hidden?" scrollbar_hidden":"")}),this.inner=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_inner ":"")+"scrollbar_inner"}),this.scrollbar.appendChild(this.inner);var e=this.widthUpdated();this.options.shadows&&(t.parentNode.insertBefore(this.topShadowDiv=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_top ":"")+"scrollbar_top"},{width:e[0]}),t),t.parentNode.insertBefore(this.bottomShadowDiv=ce("div",{className:(this.options.prefix?this.options.prefix+"scrollbar_bottom ":"")+"scrollbar_bottom"},{width:e[0]}),t.nextSibling)),t.parentNode.insertBefore(this.scrollbar,t);var s=f.bind(this),o=function(){this.initObjMouseWheel(),removeEvent(t,"mousemove",o)}.bind(this);if(addEvent(t,"mouseleave",this.destroyObjMouseWheel),addEvent(t,"mouseenter",this.initObjMouseWheel),addEvent(t,"mousemove",o),addEvent(this.scrollbar,"mouseenter",this.initScrollBarMouseWheel),addEvent(this.scrollbar,"mouseleave",this.destroyScrollBarMouseWheel),this.options.scrollElements&&each(this.options.scrollElements,(function(t,e){addEvent(e,d.browserFeatures.wheelEvent,i)})),addEvent(this.scrollbar,"mouseover",this.contOver.bind(this)),addEvent(this.scrollbar,"mouseout",this.contOut.bind(this)),addEvent(this.scrollbar,"mousedown",this.contDown.bind(this)),d.browser.safari_mobile){var _=function(t){this.isHorizontal?cur.touchX=t.touches[0].pageX:cur.touchY=t.touches[0].pageY}.bind(this),l=function(e){return this.isHorizontal?(cur.touchDiff=cur.touchX-(cur.touchX=e.touches[0].pageX),t.scrollLeft+=cur.touchDiff,t.scrollLeft>0&&!1!==this.shown&&this.update(!0)):(cur.touchDiff=cur.touchY-(cur.touchY=e.touches[0].pageY),t.scrollTop+=cur.touchDiff,t.scrollTop>0&&!1!==this.shown&&this.update(!0)),Object(p.cancelEvent)(e)}.bind(this),r=function(){cur.animateInt=setInterval(function(){cur.touchDiff=.9*cur.touchDiff,cur.touchDiff<1&&cur.touchDiff>-1?clearInterval(cur.animateInt):(t[self.scrollProp]+=cur.touchDiff,this.update(!0))}.bind(this),0)}.bind(this);addEvent(t,"touchstart",_),addEvent(t,"touchmove",l),addEvent(t,"touchend",r),this.destroyList.push((function(){removeEvent(t,"touchstart",_),removeEvent(t,"touchmove",l),removeEvent(t,"touchend",r)}))}addEvent(this.inner,"mousedown",this.mouseDown),this.options.nokeys?this.onkeydown=s:addEvent(window,"keydown",s),this.destroyList.push(function(){removeEvent(t,d.browserFeatures.wheelEvent,i),this.options.scrollElements&&each(this.options.scrollElements,(function(t,e){removeEvent(e,d.browserFeatures.wheelEvent,i)})),removeEvent(this.inner,"mousedown",this.mouseDown),removeEvent(window,"keydown",s),removeEvent(t,"mousemove",o),Object(n.re)(this.scrollbar)}.bind(this)),this.isHorizontal||(this.contHeight()<=this.scrollHeight?hide(this.bottomShadowDiv):this.bottomShadow=!0),this.options.onInit&&this.options.onInit(),this.inited=!0,this.update(!0),this.options.global||cur.destroy.push(this.destroy.bind(this))}.bind(this),0)}M.prototype={wheel:function(t){if(!this.disabled){t||(t=window.event);var e=0,i=this.obj[this.scrollProp],s=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;if("wheel"==t.type?e=-(this.isHorizontal?t.deltaX:t.deltaY):void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*(this.isHorizontal?t.wheelDeltaX:t.wheelDeltaY),d.browser.mac&&d.browser.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*t.wheelDelta:t.detail&&t.axis===(this.isHorizontal?1:2)&&(e=-t.detail),e=1*e*(1==s?15:2==s?450:1))return this.obj[this.scrollProp]-=e,Object(b.isFunction)(this.options.onScroll)&&this.options.onScroll(e,this),i!=this.obj[this.scrollProp]&&!1!==this.shown&&(this.update(!0),addClass(this.inner,"scrollbar_hovered"),clearTimeout(this.moveTimeout),this.moveTimeout=setTimeout(function(){removeClass(this.inner,"scrollbar_hovered")}.bind(this),300)),!!(!this.shown&&!this.options.forceCancelEvent||this.isHorizontal&&i==this.obj[this.scrollProp])&&void 0}},setOptions:function(t){extend(this.options,t)},widthUpdated:function(){var t,e=Object(n.getSize)(this.obj);return t=this.isHorizontal?{marginLeft:this.options.top+"px",marginTop:e[1]+3+"px",width:e[0]-this.options.top-this.options.bottom+"px"}:{marginTop:this.options.top+"px",marginLeft:this.options.nomargin?0:e[0]-(this.options.mlDiff||7)+"px",height:e[1]-this.options.top-this.options.bottom+"px"},this.options.nomargin&&(void 0!==this.options.right&&"auto"!==this.options.right?(t.right=this.options.right,t.left="auto"):void 0!==this.options.left&&(t.right="auto",t.left=this.options.left)),this.scrollWidth=e[0],this.scrollHeight=e[1],this.scrollbarSize=e[this.isHorizontal?0:1]-this.options.top-this.options.bottom,setStyle(this.scrollbar,t),setTimeout(function(){removeClass(this.scrollbar,"no_transition")}.bind(this)),e},contOver:function(){this.isOut=!1,this.shown&&addClass(this.scrollbar,"scrollbar_c_overed")},contOut:function(){this.isOut=!0,this.isDown||removeClass(this.scrollbar,"scrollbar_c_overed")},contDown:function(t){if(t||(t=window.event),this.isHorizontal){var e=t.offsetX-this.innerWidth/2+5,i=this.scrollbarSize-this.innerWidth;this.obj.scrollLeft=Math.floor((this.contWidth()-this.scrollWidth)*Math.min(1,e/i))}else{var s=t.offsetY-this.innerHeight/2+5,o=this.scrollbarSize-this.innerHeight;this.obj.scrollTop=Math.floor((this.contHeight()-this.scrollHeight)*Math.min(1,s/o))}this.update(!0),this.mouseDown(t)},hide:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){hide(this.topShadowDiv,this.bottomShadowDiv,this.scrollbar),this.hidden=!0})),show:function(){Object(n.show)(this.topShadowDiv,this.bottomShadowDiv,this.scrollbar),this.hidden=!1},disable:function(){this.hide(),this[this.scrollProp](0),this.disabled=!0},enable:function(){this.show(),this.update(),this.disabled=!1},getScrollHeight:function(){return this.scrollHeight},scrollTop:function(t){if(void 0===t)return this.obj.scrollTop;this.obj.scrollTop=parseInt(t),this.update(!1,!0)},scrollBottom:function(t){if(void 0===t)return this.contHeight()-this.scrollHeight-this.obj.scrollTop;this.obj.scrollTop=this.contHeight(!0)-this.scrollHeight-t,this.update(!0,!0)},smoothScroll:function(t,e,i){var s=this.obj.scrollTop+t;void 0===i&&(i=300);var o=this;new O.Fx.Base({scrollTop:this.obj.scrollTop},{transition:O.Fx.Transitions.easeOutCubic,onStep:function(t){o.obj.scrollTop=t.scrollTop,o.update(!0)},duration:i,onComplete:function(){e&&e(scroll)}}).start({scrollTop:this.obj.scrollTop},{scrollTop:s})},scrollLeft:function(t){this.obj.scrollLeft=parseInt(t),this.update(!1,!0)},destroy:function(){each(this.destroyList||[],(function(t,e){e()}))},contHeight:function(){return Math.round(this.options.contHeight||this.obj.scrollHeight)},contWidth:function(){return Math.round(this.options.contWidth||this.obj.scrollWidth)},val:function(t){return t&&(this.obj[this.scrollProp]=t,this.update(!0,!0)),this.obj[this.scrollProp]},update:function(t,e){if(this.inited&&!this.hidden){if(!t&&(this.isHorizontal?this.moveX:this.moveY))return!0;var i,s;if(e&&(i=Object(n.getSize)(this.obj),this.isHorizontal?(this.scrollWidth=i[0],i=Math.round(this.scrollWidth-this.options.top-this.options.bottom),this.scrollbarSize!==i&&(this.scrollbar.style.width=i+"px")):(this.scrollHeight=i[1],i=Math.round(this.scrollHeight-this.options.top-this.options.bottom),this.scrollbarSize!==i&&(this.scrollbar.style.height=i+"px")),this.scrollbarSize=i),this.isHorizontal?(i=this.contWidth())<=Math.round(this.scrollWidth):(i=this.contHeight())<=Math.round(this.scrollHeight))return hide(this.inner,this.bottomShadowDiv,this.topShadowDiv),this.scrollbar.style.pointerEvents="none",this.topShadow=this.bottomShadow=this.shown=!1,Object(b.isFunction)(this.options.more)&&i-this.obj[this.scrollProp]<2*this[this.scrollDimensionProp]&&this.options.more(this),void(this[this.scrollProp+"Last"]=this.obj[this.scrollProp]);this.shown||(Object(n.show)(this.inner),this.scrollbar.style.pointerEvents="",this.shown=!0);var o=this.val();Object(b.isFunction)(this.options.scrollChange)&&this.options.scrollChange(o),this.lastProgress=Math.min(1,o/(i-(this.isHorizontal?this.scrollWidth:this.scrollHeight))),this.lastProgress>0!=this.topShadow&&((this.topShadow=!this.topShadow)?n.show:hide)(this.topShadowDiv),this.lastProgress<1!=this.bottomShadow&&((this.bottomShadow=!this.bottomShadow)?n.show:hide)(this.bottomShadowDiv),this.isHorizontal?((s=Math.max(40,Math.floor(this.scrollbarSize*this.scrollWidth/i)))!==this.innerWidth&&(this.inner.style.width=(this.innerWidth=s)+"px"),this.inner.style.marginLeft=(this.scrollbarSize-s-2*this.options.padding)*this.lastProgress+this.options.padding+"px"):((s=Math.max(40,Math.floor(this.scrollbarSize*this.scrollHeight/i)))!==this.innerHeight&&(this.inner.style.height=(this.innerHeight=s)+"px"),this.inner.style.marginTop=(this.scrollbarSize-s-2*this.options.padding)*this.lastProgress+this.options.padding+"px"),Object(b.isFunction)(this.options.more)&&i-this.obj[this.scrollProp]<2*this[this.scrollDimensionProp]&&this.options.more(this),this[this.scrollProp+"Last"]=this.obj[this.scrollProp]}},restore:function(){this.obj[this.scrollProp]=this[this.scrollProp+"Last"]}};var C=M,P=(i("KKXr"),i("Oyvg"),i("OG14"),i("pIFo"),i("SRfc"),i("4+be"));var D=class{constructor(t,e,i,o){0===i.length&&(i={}),o=o||{},this.indexer=new vkIndexer(e,o.getName?o.getName:function(t){var e=t[1];if(o.nameClass){var i=Object(n.se)(e);i&&(e=val(geByClass1(o.nameClass,i))||e)}return e}),this.owners=e,this.tpl=o.tpl,this.rsTpl=o.rsTpl,this.idIndex=o.idIndex||0,this.selected=i,this.getUnsorted=o.getUnsorted,this.unsortedIndex=o.unsortedIndex||0,this.box=t,this.filter=o.filter,o.onTabUpdate&&(this.onTabUpdate=o.onTabUpdate),o.onListClick&&(this.onListClick=o.onListClick),t.setButtons(getLang("global_save"),(function(i){var s={},l=[],n=[];Object(b.each)(e,(function(){!_.invertedSelection&&_.selected[this[_.idIndex]]||_.invertedSelection&&!_.selected[this[_.idIndex]]?(s[this[_.idIndex]]=this,l.push(this[_.idIndex])):n.push(this[_.idIndex])})),!1!==cur.onOListSave(l,n,s,o.ret||{},i)&&t.hide(200)}),getLang("global_cancel")),o.box_options&&t.setOptions(o.box_options);var _=this;this.scrollNode=geByClass1("privacy_olist",t.bodyNode),this.moreEl=geByClass1("olist_more",t.bodyNode,"a"),this.olistEl=geByClass1("olist",t.bodyNode,"div"),this.olistFilter=ge("olist_filter_actions"),this.sel=o.sel||0,this.tabs=geByClass1("ui_tabs",t.bodyNode),this.noSelMsg=o.noSelMsg||getLang("friends_no_user_selected"),this.invertedSelection=!1;var l=geByClass1("olist_tab_sel",this.tabs);this.selCnt=Object(b.intval)(val(geByClass1("ui_tab_count",l)));var r=this.filter?this.filter:this.filter=ge("olist_filter");setTimeout(elfocus.pbind(r),100),this.moreEl&&(Object(n.isVisible)(this.moreEl)?this.moreEl.onclick=function(t){return _.renderList("",60),Object(p.cancelEvent)(t)}:(Object(n.re)(this.moreEl),Object(n.show)(this.moreEl))),addEvent(this.olistEl,"click",this.onMouseEvent.bind(this)),addEvent(this.scrollNode,"scroll",this.onScroll.bind(this));var a=_.sel?_.sel>0?"sel":"unsel":"all",h=geByClass1("olist_tab_"+a,_.tabs);h=h&&geByClass1("ui_tab",h),(cur.onOListTabChange=function(t,e){t&&s.default.switchTab(t),void 0===e&&(e=void 0===_.selPrev?0:_.selPrev),_.selPrev=_.sel,_.sel=e,_.renderList(val(r),0,e),setTimeout(elfocus.pbind(r),100)})(h,_.sel),cur.onOlistChange=_.renderList.bind(this),cur.onOlistSelect=_.onOlistSelect.bind(this),cur.onOlistFilters=_.onOlistFilters.bind(this)}onScroll(){var t=Object(n.domPN)(this.box.bodyNode),e=this.moreEl,i=this.scrollNode,s=i.scrollHeight,o=i.scrollTop,_=i.offsetHeight||i.clientHeight;Object(n.toggleClass)(t,"olist_topsh",o>0),Object(n.toggleClass)(t,"olist_botsh",o+_<s),e&&e.offsetTop&&e.onclick&&o+_+200>=s&&e.onclick()}onMouseEvent(t){var e=t.originalTarget||t.target;if(hasClass(e,"olist_item_wrap")||(e=Object(n.gpeByClass)("olist_item_wrap",e)),e&&e!=bodyNode){if(hasClass(e,"olist_item_loading"))return Object(p.cancelEvent)(t);if(Object(p.checkEvent)(t))return!0;this.box.changed=!0;var i=e.id.match(/-?\d+/)[0],s=!this.invertedSelection&&this.selected[i]||this.invertedSelection&&!this.selected[i];if(Object(n.toggleClass)(e,"olist_item_wrap_on",!s),this.selected[i]=!s||this.invertedSelection,this.selCnt+=!s||this.invertedSelection?1:-1,this.selTabUpdate(),this.onListClick&&this.onListClick(e,s),this.scrollNode.scrollTop<50){var o=this.filter;setTimeout(elfocus.pbind(o),100)}return Object(p.cancelEvent)(t)}}onOlistSelect(t,e){o.default.toggle(this.olistFilter,!1);var i=this.selCnt,s=this.selected;switch(e.ctrlKey||e.metaKey||e.shiftKey||(s={},i=0),t){case"all":s={},i=0,Object(b.each)(this.owners,(function(){s[this[0]]=1,i++}));break;case"none":s={},i=0;break;case"people":Object(b.each)(this.owners,(function(){this[0]>0&&!s[this[0]]&&(s[this[0]]=1,i++)}));break;case"groups":Object(b.each)(this.owners,(function(){this[0]<0&&!s[this[0]]&&(s[this[0]]=1,i++)}));break;default:var _=1<<Object(b.intval)(t.replace("list",""));Object(b.each)(this.owners,(function(){this[4]&_&&!s[this[0]]&&(s[this[0]]=1,i++)}))}return this.selCnt=i,this.selected=s,this.selTabUpdate(),this.renderList(),!1}onOlistFilters(t,e){o.default.show(t,e);var i=e=>{o.default.toggle(t,!1),removeEvent(document,"mousedown",i)};return addEvent(document,"mousedown",i),e&&Object(p.cancelEvent)(e)}selTabUpdate(){if(this.isAlbumEdit)this.onTabUpdate&&this.onTabUpdate();else if(this.tabs){var t=this.selCnt,e=this.owners.length-t,i=geByClass1("olist_tab_sel",this.tabs),s=geByClass1("olist_tab_unsel",this.tabs);val(geByClass1("ui_tab_count",i),t||""),val(geByClass1("ui_tab_count",s),e||""),this.onTabUpdate&&this.onTabUpdate()}}renderList(t,e,i){e=e||0,i=i||this.sel;var s=e?60:120,o=this;t&&(t=t.replace(/\u2013|\u2014/g,"-"));var _=t?this.indexer.search(t):this.owners;o.unsortedIndex==i&&o.getUnsorted&&(_=o.getUnsorted(_));var l=this.selected,r=o.invertedSelection?!(this.sel<0):this.sel<0,a=o.tpl;if(i&&o.unsortedIndex!=i){var h=[];Object(b.each)(_,(function(){var t=this[o.idIndex];if((!r&&l[t]||r&&!l[t])&&(h.push(this),h.length>e+s))return!1})),_=h}var c=_.length;_=_.slice(e,e+s);var u,d=[];if(t){t=Object(b.clean)(t);var m=Object(b.escapeRE)(t),E=Object(P.parseLatin)(t);null!=E&&(m=m+"|"+Object(b.escapeRE)(E)),u=new RegExp("(?![^&;]+;)(?!<[^<>]*)((\\(*)("+m+"))(?![^<>]*>)(?![^&;]+;)","gi")}var O=o.rsTpl?o.rsTpl:function(t,e,i,s,o){var _=!i&&s[t[0]]||i&&!s[t[0]],l=t[1];if(e){l=-1==e.indexOf(" ")?l.split(" "):[l];var n="";for(var r in l)l.hasOwnProperty(r)&&(n+=(r>0?" ":"")+l[r].replace(o,"$2<em>$3</em>"));l=n}return{id:t[0],name:l,photo:t[2],classname:_?" olist_item_wrap_on":"",link:t[3]||(t[0]>0?"id"+t[0]:"club"+-t[0])}};Object(b.each)(_,(function(){d.push(Object(n.rs)(a,O(this,t,o.invertedSelection,l,u)))})),e||d.length||d.push('<div class="no_rows">'+(t?getLang("global_search_not_found").replace("{search}",t):o.noSelMsg)+"</div>"),Object(n.re)(this.moreEl),d=d.join(" "),e?this.olistEl.appendChild(Object(n.cf)(d)):val(this.olistEl,d),c>e+s&&(this.olistEl.appendChild(this.moreEl),this.moreEl.onclick=function(i){return o.renderList(t,e+s),Object(p.cancelEvent)(i)}),o.box&&o.box.scroll&&o.box.scroll.update(!1,!0),o.onScroll()}},T=i("gUSy");window.uiTabs=s.default,window.uiActionsMenu=o.default,window.uiRightMenu=l.default,window.uiPageBlock=h,window.uiSearch=c.default,window.uiScrollBox=u.default,window.uiPhotoZoom=E,window.Scrollbar=window.Scrollbar||C,window.OList=D,window.UiScroll=_.default,window.uiScroll=_.default,window.Slider=T.default;try{stManager.done("ui_common.js")}catch(t){}},gUSy:function(t,e,i){"use strict";i.r(e);var s=i("zxIV"),o=i("Egk5"),_=i("BJj/");function l(t,e){if(this.constructor!=l)throw new Error("Slider was called without 'new' operator");if(!t)throw new Error("No element was provided for Slider");t=ge(t),this.options=e||{size:1},this.options.backValue=this.options.backValue||0;var i=100*this.options.backValue,o=`<div class="slider_slide"><div class="slider_loading_bar" style="opacity: 0; display: none;"></div> ${this.options.withBackLine?'<div class="slider_back" style="width:'+i+'%"></div>':""} <div class="slider_amount"></div> <div class="slider_handler"></div> </div>`;this._el=ce("div",{innerHTML:o,className:"slider",id:t.getAttribute("id")||""});for(var n=t.classList||[],r=this,a=0,h=n.length;a<h;a++)addClass(this._el,n[a]);each(this._el.attributes,(function(t,e){"id"==e.name&&"class"==e.name||r._el.setAttribute(e.name,e.value)})),t.parentNode.replaceChild(this._el,t),Object(s.data)(this._el,"slider",this),this._amountEl=geByClass1("slider_amount",this._el),this._handlerEl=geByClass1("slider_handler",this._el),this._slideEl=geByClass1("slider_slide",this._el),this._backEl=geByClass1("slider_back",this._el),this._progressEl=geByClass1("slider_loading_bar",this._el),this.options.color&&(setStyle(this._amountEl,{backgroundColor:this.options.color}),setStyle(this._handlerEl,{backgroundColor:this.options.color})),this.options.handlerColor&&setStyle(this._handlerEl,{backgroundColor:this.options.handlerColor}),this.options.backColor&&setStyle(this._slideEl,{backgroundColor:this.options.backColor}),addClass(this._el,"slider_size_"+this.options.size),this.options.debounce&&(this._onValueChangeDebounced=Object(_.debounce)(this._onValueChange,this.options.debounce)),e.formatHint&&(addEvent(this._el,"mousemove",this._ev_onMouseOver=this._onMouseOver.bind(this)),addEvent(this._el,"mouseleave",this._ev_onMouseLeave=this._onMouseLeave.bind(this))),addEvent(this._el,"mousedown",this._ev_onMouseDown=this._onMouseDown.bind(this)),this.setValue(this.options.value||0,!this.options.fireChangeEventOnInit,!1),this.setBackValue(this.options.backValue)}l.prototype.toggleAdState=function(t){this._adState=!!t,Object(s.toggleClass)(this._el,"slider_ad_mode",!!t)},l.prototype.toggleAdMarker=function(t){t=!!t;var e=geByClass1("slider_ad_marker",this._el);if(t){if(!e){var i="onmouseover=\"showTooltip(this, {text: '"+getLang("global_audio_ad")+"', black: 1, shift: [16, 9, 10]})\"";e=Object(s.se)('<div class="slider_ad_marker_wrap" '+i+'><div class="slider_ad_marker"></div></div>'),Object(s.domPN)(this._slideEl).insertBefore(e,this._slideEl),delete this._width,addClass(this._el,"slider_ad_marker_shown")}}else Object(s.re)(e),delete this._width,removeClass(this._el,"slider_ad_marker_shown")},l.prototype.showAdMarker=function(t){var e=Object(s.se)('<div class="slider_ad_marker"></div>');Object(s.domPN)(this._slideEl).insertBefore(e,this._slideEl),delete this._width,addClass(this._el,"slider_ad_marker_shown")},l.prototype.isAdMode=function(){return hasClass(this._el,"slider_ad_mode")},l.prototype.setBlocked=function(t){this.blocked=t,addClass(this._el,"slider_blocked")},l.prototype.getBlocked=function(){return this.blocked},l.prototype.isBlocked=function(){return this.isAdMode()||this.getBlocked()},l.prototype.toggleLoading=function(t){t=!!t,Object(s.toggle)(this._progressEl,t),setStyle(this._progressEl,"opacity",t?1:0)},l.prototype.destroy=function(t){this.options.formatHint&&(removeEvent(this._el,"mousemove",this._ev_onMouseOver),removeEvent(this._el,"mouseleave",this._ev_onMouseLeave),removeEvent(this._el,"mousedown",this._ev_onMouseDown)),Object(s.re)(this._el),Object(s.re)(this._currHintEl)},l.prototype._updateHint=function(t,e){this._currHintEl||(this._currHintEl=Object(s.se)('<div class="slider_hint" id="slider_hint"></div>'),this.options.hintClass&&addClass(this._currHintEl,this.options.hintClass),this._el.appendChild(this._currHintEl)),this._width=this._width||getSize(this._slideEl)[0];var i=this._getPos(),o=Math.round(t.pageX-i[0]),_=this._width;if((o=e?Math.min(Math.max(0,o),_):o)>=0&&o<=_){var l=o/_;this._currHintEl.innerHTML=this.options.formatHint?this.options.formatHint.call(this,l):l;var n=getSize(this._currHintEl);setStyle(this._currHintEl,{left:this._slideEl.offsetLeft+o-n[0]/2,top:this._slideEl.offsetTop-n[1]-10}),!e&&this._toggleHint(!0)}else!e&&this._toggleHint(!1);this.options.formatHint||this._toggleHint(!1)},l.prototype._toggleHint=function(t){this.isAdMode()&&(t=!1),Object(s.toggleClass)(this._currHintEl,"visible",t)},l.prototype._onMouseOver=function(t){l._currenSliderDrag||hasClass(this._el,"active")||this._updateHint(t)},l.prototype._onMouseLeave=function(t){hasClass(this._el,"active")||this._toggleHint(!1)},l.prototype._onMouseDown=function(t){0==t.button&&(delete cur._sliderMouseUpNowEl,this._adState||this.getBlocked()||(addEvent(window,"mousemove",this._ev_onMouseMove=this._onMouseMove.bind(this)),addEvent(window,"mouseup",this._ev_onMouseUp=this._onMouseUp.bind(this)),this._width=getSize(this._slideEl)[0],this._onMouseMove(t),l._currenSliderDrag=this,addClass(this._el,"active"),Object(o.cancelEvent)(t)))},l.prototype._onMouseUp=function(t){cur._sliderMouseUpNowEl=this._el,removeEvent(window,"mousemove",this._ev_onMouseMove),removeEvent(window,"mouseup",this._ev_onMouseUp),clearTimeout(this._debounceto),this._onValueChange(),removeClass(this._el,"active"),l._currenSliderDrag=!1,this._toggleHint(!1),this.options.onEndDragging&&this.options.onEndDragging(this._currValue)},l.prototype._onMouseMove=function(t){var e=this._getPos(),i=Math.max(t.pageX,e[0]);i=Math.min(i,e[0]+this._width),i-=e[0],this.setValue(i/this._width,!0,!0),this._onValueChangeDebounced?this._onValueChangeDebounced():this._onValueChange(),this._toggleHint(!0),this._updateHint(t,!0),Object(o.cancelEvent)(t)},l.prototype._getPos=function(){return this._slidePos=getXY(this._slideEl)},l.LOGFBASE=35,l.prototype._logf=function(t){if(!this.options.log)return t;var e=l.LOGFBASE;return(Math.pow(e,t)-1)/(e-1)},l.prototype._unlogf=function(t){if(!this.options.log)return t;var e,i,s=l.LOGFBASE;return e=s,i=1+t*(s-1),Math.log(i)/Math.log(e)},l.prototype.setValue=function(t,e,i){if(!hasClass(this._el,"active")||i){var s=i?this._logf(t):t;if(this._currValue!=s){this._currValue=s;var o=i?t:this._unlogf(t);o=100*o+"%",setStyle(this._amountEl,{width:o}),setStyle(this._handlerEl,{left:o}),!e&&this._onValueChange()}}},l.prototype.setBackValue=function(t){Object(s.toggleClass)(this._backEl,"slider_back_transition",t>this._backValue),this._backValue=t;var e=100*t+"%";setStyle(this._backEl,{width:e})},l.prototype._onValueChange=function(){this._lastValue=this._lastValue||0,this._lastValue!=this._currValue&&(this._lastValue=this._currValue,this.options.onChange&&this.options.onChange(this._currValue))},e.default=l},"qUi/":function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _web_lib_browser__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("gdug"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("t7n3"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zxIV"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("Egk5"),_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("v+DW"),_web_lib_fx__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("7jxN"),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("El3O"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("98sY"),uiRightMenu={initMenu:function(t,e){if(!(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.msie&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.version)<10||_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.opera&&Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.version)<15||hasClass(t,"ui_rmenu_sliding"))){var i=geByClass1("ui_rmenu_item",t),s=geByClass1("ui_rmenu_item_sel",t),o=s||i,_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(o)[1],l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(o)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(t)[1],n=geByClass1("_ui_rmenu_slider",t);if(!e)setStyle(n,{height:_,top:s?l:0}),addClass(t,"ui_rmenu_sliding")}},go:function(t,e,i,s){if(Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_3__.checkEvent)(e))return!0;var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",t);return!(!(s||{}).ignoreSelected&&geByClass1("ui_rmenu_item_sel",o)==t)&&(uiRightMenu.switchMenu(t),uiRightMenu.showProgress(t),!1!==i&&nav.go(i||t,e,extend({fromMenu:!0},s||{})))},switchMenu:function(t,e){var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",t),s=geByClass1("ui_rmenu_item_sel",i);if(t==s&&!e)return!1;uiRightMenu.initMenu(i);var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(t)[1],_=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(t)[1]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(i)[1],l=[],n=[];if(hasClass(i,"_ui_rmenu_auto_expand")){var r=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.geByClass)("_ui_rmenu_sublist",i),a=hasClass(t,"_ui_rmenu_subitem")?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("_ui_rmenu_sublist",t):!!hasClass(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domNS)(t),"_ui_rmenu_sublist")&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domNS)(t);each(r,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(this)&&this!==a&&(l.push(this),hide(this))})),a&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(a)&&(n.push(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)(a)),_=t.offsetTop,each(l,(function(){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.show)(this)})),each(n,(function(){hide(this)}))}var h=geByClass1("_ui_rmenu_slider",i),c=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(h.style.top),u={height:o};return _web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.msie_edge?u.marginTop=_-c+"px":u[cssTransformProp]="translateY("+(_-c)+"px)",setStyle(h,u),removeClass(s,"ui_rmenu_item_sel"),addClass(t,"ui_rmenu_item_sel"),hasClass(i,"_ui_rmenu_auto_expand")?each(l.concat(n),(function(){uiRightMenu.toggleSubmenu(this)})):hasClass(t,"_ui_rmenu_subitem")&&!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domPN)(t))&&uiRightMenu.toggleSubmenu(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domPN)(t)),!1},fixScroller:function(t){var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",t);if(e&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(t)){var i=hasClass(e,"ui_rmenu_sliding"),s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(t)[1];i&&uiRightMenu.hideSliding(e);var o=t.offsetTop,_=geByClass1("_ui_rmenu_slider",e),l=Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_1__.intval)(_.style.top),n={height:s};_web_lib_browser__WEBPACK_IMPORTED_MODULE_0__.browser.msie_edge?n.marginTop=o-l+"px":n[cssTransformProp]="translateY("+(o-l)+"px)",setStyle(_,n),t.offsetLeft,i&&uiRightMenu.showSliding(e)}},unselectAll:function(t){removeClass(t,"ui_rmenu_sliding"),removeClass(geByClass1("ui_rmenu_item_sel",t),"ui_rmenu_item_sel")},hideSliding:function(t){removeClass(t,"ui_rmenu_sliding")},showSliding:function(t){addClass(t,"ui_rmenu_sliding")},showProgress:function(t){hasClass(t,"ui_rmenu")||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",t));var e=geByClass1("ui_rmenu_loading_item",t);e&&removeClass(e,"ui_rmenu_loading_item");var i=geByClass1("ui_rmenu_item_sel",t);Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.hideProgress)(t),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.showProgress)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domFC)(i).parentNode,"","",!1),addClass(t,"ui_rmenu_loading"),addClass(i,"ui_rmenu_loading_item")},hideProgress:function(t){hasClass(t,"ui_rmenu")||(t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",t)),Object(_web_lib_ui__WEBPACK_IMPORTED_MODULE_4__.hideProgress)(t);var e=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",t);removeClass(t,"ui_rmenu_loading"),uiRightMenu.hideSliding(e);var i=geByClass1("ui_rmenu_loading_item",e);i&&removeClass(i,"ui_rmenu_loading_item")},toggleSubmenu:function toggleSubmenu(name,ref){var menu=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gpeByClass)("ui_rmenu",ref),el,submenu;if("string"==typeof name?submenu=geByClass1("_ui_rmenu_"+name+"_list",menu):(submenu=name,name=submenu.getAttribute("data-sublist-id")),el=geByClass1("_ui_rmenu_"+name+"_toggle",menu),!submenu)return!1;void 0!==ref&&uiRightMenu.hideSliding(menu),el&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(el,"ui_rmenu_item_expanded",!Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.isVisible)(submenu)),Object(_web_lib_fx__WEBPACK_IMPORTED_MODULE_5__.slideToggle)(submenu,submenu&&Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(submenu)[1]?100:0),setTimeout(_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_6__.updateNarrow,100);var onToggle=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domData)(el,"on-toggle");return onToggle&&setTimeout((function(){try{eval(onToggle)}catch(t){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,onToggle)}}),150),!1}};__webpack_exports__.default=uiRightMenu},qrY5:function(__webpack_module__,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("pIFo"),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("Egk5"),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("zxIV"),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("t7n3"),_web_lib_browser__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("gdug"),_web_lib_scroll__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("lXE5"),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("98sY"),_web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("59zB"),uiActionsMenu={keyToggle:function(t,e){if(!Object(_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_1__.checkKeyboardEvent)(e))return!1;var i=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",t);i&&uiActionsMenu.toggle(i,!hasClass(i,"shown"))},toggle:function toggle(el,s,options){var dummyMenu=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(el,"dummyMenu");dummyMenu&&(el=dummyMenu),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(el,"shown",s);var onhide=attr(el,"onHide");if(onhide&&!hasClass(el,"shown"))try{eval(onhide)}catch(t){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(t,onhide)}if(options&&options.onToggle){var script=options.onToggle.replace("{isShow}",""+s);try{eval(script)}catch(t){Object(_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_6__.logEvalError)(t,script)}}},show:function(t,e,i){var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer");s&&(clearTimeout(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",0));var o=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"origMenu");if(o&&(s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(o,"hidetimer"))&&(clearTimeout(s),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",0)),i&&i.delay){cur.uiActionsMenuShowTimeout&&clearTimeout(cur.uiActionsMenuShowTimeout);var _=i.delay;return delete i.delay,void(cur.uiActionsMenuShowTimeout=setTimeout(uiActionsMenu.show.pbind(t,e,i),_))}if(cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout),i&&i.appendParentCls){var l,n,r=geByClass1("_ui_menu",t);if(r){n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.appendParentCls,r),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",t);var a=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.se)(`<div class="${l.className} ui_actions_menu_dummy_wrap" onmouseover="uiActionsMenu.show(this);" onmouseout="uiActionsMenu.hide(this);"></div>`);if(a.appendChild(r),n.appendChild(a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"dummyMenu",a),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(a,"origMenu",t),t=a,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"top",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(r,"top"))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"left",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(r,"left"))),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"right",Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getStyle)(r,"right"))),i.processHoverCls){var h=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.processHoverCls,l);addEvent(t,"mouseover",addClass.pbind(h,"hover")),addEvent(t,"mouseout",removeClass.pbind(h,"hover"))}}else t=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"dummyMenu");var c=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"origMenu");r=geByClass1("_ui_menu",t),l=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)("_ui_menu_wrap",c),n=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.domClosest)(i.appendParentCls,r),setStyle(r,{display:"block"});var u=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(n),d=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(l),b=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"top"),p=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"left"),m=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(r,"right"),E={top:d[1]-u[1]+b};m?E.right=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(n)[0]+u[0]-d[0]-Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(l)[0]+m:E.left=d[0]-u[0]+p,setStyle(r,E)}var O=geByClass1("_ui_menu",t);if(i&&i.autopos&&O&&!hasClass(t,"shown")){removeClass(t,"ui_actions_menu_left");var v=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(t)[1],g=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(t)[1],w=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)(O)[1],f=i.dy||10,M=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getXY)(O)[0];removeClass(t,"ui_actions_menu_top"),addClass(t,"no_transition"),v+g+f+w>(_web_lib_browser__WEBPACK_IMPORTED_MODULE_4__.browser.mozilla?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)("page_wrap")[1]:Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_5__.scrollGetY)()+(window.lastWindowHeight||0))&&addClass(t,"ui_actions_menu_top"),v-f-w<Object(_web_lib_scroll__WEBPACK_IMPORTED_MODULE_5__.scrollGetY)()+Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.getSize)("page_header_wrap")[1]&&removeClass(t,"ui_actions_menu_top"),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.toggleClass)(t,"ui_actions_menu_left",M<0),removeClass(t,"no_transition")}i&&i.hasOwnProperty("alwaysTop")&&O&&!hasClass(t,"shown")&&(removeClass(t,"ui_actions_menu_top"),i.alwaysTop&&addClass(t,"ui_actions_menu_top")),i&&i.scroll&&i.maxHeight&&(O.style.maxHeight=(Object(_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_3__.intval)(i.maxHeight)||200)+"px",O.__uiScroll__||new _web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_7__.default(O)),uiActionsMenu.toggle(t,!0,i)},hide:function(t,e,i){cur.uiActionsMenuShowTimeout&&(clearTimeout(cur.uiActionsMenuShowTimeout),delete cur.uiActionsMenuShowTimeout);var s=Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidedelay");s?Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidedelay",!1):s=200,Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer")||Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",setTimeout((function(){uiActionsMenu.toggle(t,!1,i),Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidetimer",0)}),s))},hideDelay:function(t,e){Object(_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.data)(t,"hidedelay",e)}};__webpack_exports__.default=uiActionsMenu},zmTt:function(t,e,i){"use strict";i.r(e);i("a1Th"),i("Btvt");var s=i("zxIV"),o=i("Egk5"),_=i("lXE5"),l={init:function(t,e){cur.lSTL&&Object(s.re)(cur.lSTL);var i=(e=e||{}).parent=e.parent||boxLayerWrap;extend(cur,{lSTLWrap:i,lSTL:i.appendChild(ce("div",{id:"layer_stl",innerHTML:`<div id="layer_stl_bg" class="fixed"></div><div id="layer_stl_cl"></div><nobr id="layer_stl_text" class="fixed">${getLang("global_to_top")}</nobr>`,el:t.bodyNode,onclick:o.cancelEvent,onmousedown:l.lSTLDown,sc:l.onScroll})),lSTLText:ge("layer_stl_text",i),lSTLShown:0,lSTLWas:0,lSTLWasSet:0,lSTLOpts:e}),t&&t.setOptions({onShow:l.show,onHide:l.hide}),t&&t.scrollInited||(addEvent(i,"scroll",l.onScroll),t&&(t.scrollInited=!0)),onBodyResize(),l.onScroll()},hide:function(t){function e(){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(){var t=cur.lSTLOpts;t&&t.parent&&(removeEvent(t.parent,"scroll",l.onScroll),hide(cur.lSTL),cur.lSTLShown=0,t.onHide&&t.onHide())})),show:function(){var t=cur.lSTLOpts;t&&t.parent&&(addEvent(t.parent,"scroll",l.onScroll),setTimeout(l.onScroll,0),t.onShow&&t.onShow())},lSTLDown:function(t){if(t=t||window.event,!Object(o.checkEvent)(t)){var e=cur.lSTLWrap;if(!__afterFocus){var i=0,s=e.scrollTop;cur.lSTLWasSet&&cur.lSTLWas?(i=cur.lSTLWas,cur.lSTLWas=0):cur.lSTLWas=s,e.scrollTop=i}return Object(o.cancelEvent)(t)}},onScroll:function(){if(cur.lSTL){var t=cur.lSTLWrap.scrollTop,e=cur.lSTLWas||t>200,i=0;if(cur.lSTL.style.marginTop=Math.min(t,boxLayer.scrollHeight-cur.lSTL.scrollHeight-1)+"px",vk.staticheader){var o=Object(s.getSize)("page_header_wrap")[1];cur.lSTLText.style.marginTop=Math.max(-Math.min(Object(_.scrollGetY)(),bodyNode.clientHeight-(window.lastWindowHeight||0)),-o)+"px"}e?(1!==cur.lSTLShown&&(Object(s.show)(cur.lSTL),cur.lSTLShown=1),cur.lSTLWas&&t>500&&(cur.lSTLWas=0),t>200?(i=(t-200)/200,cur.lSTLWasSet&&(cur.lSTLWasSet=0,val(Object(s.domLC)(cur.lSTL),getLang("global_to_top")),removeClass(Object(s.domLC)(cur.lSTL),"down"))):(i=(200-t)/200,cur.lSTLWas&&(cur.lSTLWasSet||(cur.lSTLWasSet=1,val(Object(s.domLC)(cur.lSTL),""),addClass(Object(s.domLC)(cur.lSTL),"down"))))):0!==cur.lSTLShown&&(hide(cur.lSTL),cur.lSTLShown=0),setStyle(cur.lSTL,{opacity:Math.min(Math.max(i,0),1)})}}};e.default=l}});