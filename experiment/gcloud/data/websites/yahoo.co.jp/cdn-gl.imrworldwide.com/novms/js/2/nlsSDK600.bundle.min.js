/*
 Nielsen SDK package v6.0.0.506 
 (c) 2020 The Nielsen Company 
*/
/*CryptoJS v3.1.2 License Info code.google.com / p / crypto - js - (c) 2009-2013 by Jeff Mott. All rights reserved. code.google.com / p / crypto - js / wiki / License Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met: 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/ or other materials provided with the distribution.3.Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */
var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){function t(e){n&&console&&console.log&&console.log(e)}var a=!0,n=!1;try{t("BSDK check: Checking for ES5 array functions that BSDK uses");var r=new Array("test1","test2","test3");r.forEach(function(e){}),r.indexOf("test"),t("BSDK check: Array functionality passed"),t("BSDK check: Checking for ES5 JSON functions that BSDK uses");var i={fname:"Bob",lname:"Lee",address:{street:"123 test",city:"NY",state:"NY"}},o=JSON.stringify(i);i=JSON.parse(o),t("BSDK check: JSON object functionality passed"),t("BSDK check: Checking for image tag functionality");(new Image).src="",t("BSDK check: Image tag functionality passed"),t("BSDK check: Checking for window.addEventListener functionality"),e.addEventListener||(a=!1),t("BSDK check: window.addEventListener functionality passed"),t("BSDK check: Checking for postMessage functionality"),e.postMessage||(a=!1),t("BSDK check: postMessage functionality passed"),t("BSDK check: Checking for date functionality"),t("DATE "+Date.now()),t("BSDK check: date functionality passed");var s=/(ANTGalio\/3.3)|(ANTGalio\/3.4)|(HbbTV\/1\.1\.1(;Samsung;SmartTV2012;;;)\s+WebKit)/i;t("BSDK check: Checking device useragent"),e.navigator.userAgent.match(s)&&(a=!1,t("BSDK check: Unsupported useragent"))}catch(e){t("ERROR: "+e.message),a=!1}t("****** RESULTS: JS support check "+(a?"PASSED":"FAILED")+" ******");try{a?(!function(e,t){function a(e){return void 0!==s&&void 0!==d&&void 0!==l?s+"//cdn-gl"+d:"https://sdk.imrworldwide.com/"}function n(e){e&&e.hasOwnProperty("target")&&(y="true"===String(e.target).toLowerCase())}function r(){v=Date.now(),g=Math.ceil((v-f)/1e3)}function i(e){if(e&&e.hasOwnProperty("target")&&!isNaN(e.target))for(var t in L)!function(t){var a,n;void 0!==(a=L[t])&&a.hasOwnProperty("staticPage")&&a.staticPage.hasOwnProperty("evtParams")&&(n=a.staticPage.evtParams,"static"===n.param1.type&&a.ggPM("48",e.target,"","",""))}(t)}function o(o,u){function p(e){j.staticPage.hasOwnProperty("evtParams")&&j.ggPM("56",j.staticPage.evtParams.param1,j.staticPage.evtParams.param2,j.staticPage.evtParams.param3,j.staticPage.evtParams.param4)}function m(e,t){if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(A[e.type]instanceof Array)for(var a=A[e.type],n=0,r=a.length;n<r;n++)a[n].call(j,t)}function f(e){try{if(!e||!e.hasOwnProperty("cmsMap"))return[];var t=[];for(var a in e.cmsMap)e.cmsMap.hasOwnProperty(a)&&-1!==e.cmsMap[a].indexOf("nol_")&&t.push(e.cmsMap[a].replace(/[{(\[\])}]/g,""));return t}catch(e){}}function _(t){try{var a="Error in retrieveMeta";if(t&&t.hasOwnProperty("fData")&&t.hasOwnProperty("ad")&&t.hasOwnProperty("content")&&t.hasOwnProperty("plid")){var n=f({cmsMap:e.GLCFG.PLDPR.getCmsMap(t.plid)});for(var r in t.fData)if(t.fData.hasOwnProperty(r)&&"count"!==r){var i=t.fData[r][Object.keys(t.fData[r]).splice(-1,1)];if(void 0!==i&&null!==i&&"object"===(void 0===i?"undefined":_typeof(i)))for(var o in i){var s=String(o);-1!==s.indexOf("nol_")&&-1===n.indexOf(s)||(t[r][o]=i[o])}}return t}return t&&t.hasOwnProperty("err")?(t.err=a+": Missing passedFdata, Ad, content or static properties",t):{err:a}}catch(e){}}function O(t){t&&(t.registerListener("ggPM",j),t._listeners&&(t._listeners.addListener("updateCmbStaticPage",j.handleUpdateOfStatic),t._listeners.addListener("removeCmbAssetId",j.removeAsset),t._listeners.addListener("tick",function(){r(),x=!1,m("globalTick",{time:v,seconds:g})}),t._listeners.addListener("dcrHeartbeat",i),t._listeners.addListener("flushQueue",j.emptyQueue),t._listeners.addListener("handleSessionReset",j.handleSessionReset),t._listeners.addListener("flushPauseEventQueue",j.flushPauseEventQueue),t._listeners.addListener("sendOptOutStatus",n)),e.GLCFG=t)}function L(e,t){I&&I.ggParams&&I.ggParams.nol_sdkDebug&&I.ggParams.nol_sdkDebug.toLowerCase().indexOf("debug","info","warn","true")>-1&&console&&console.log&&console.log("Nielsen Log: "+e,t||"")}function C(e,a){if(L("Firing ping "+e.url),void 0!==e&&(!e||e.hasOwnProperty("url")&&0!==e.url.length)&&e.hasOwnProperty("retryDelay")&&e.hasOwnProperty("currRetry")&&e.hasOwnProperty("maxRetry")){({requestUrl:function t(){var n=this;try{++e.currRetry>e.maxRetry?(n.logErr("maxRetry reached"),a&&a()):n.sendUrlRequest(e.url)}catch(e){n.logErr("Error in fireToUrl requestUrl: "+e),a&&a()}},sendUrlRequest:function n(r){var i=this;try{if(void 0===r)return;var o=new Image;o.onerror=function(a){t.setTimeout(function(){i.requestUrl()},e.retryDelay)},o.onload=function(e){a&&a()},o.src=r+"&retry="+e.currRetry}catch(e){i.logErr("Error in fireToUrl sendUrlRequest: "+e),a&&a()}},logErr:function e(a){a&&t.console&&t.console.log&&console.log("Error: ",a)}}).requestUrl()}}function E(e,t,a){e.addEventListener?e.addEventListener(t,a,!1):e.attachEvent&&e.attachEvent("on"+t,a)}function D(t){!x&&t&&("blur"===t.type||"scroll"===t.type||"touchstart"===t.type||"blur"!==t.type&&e.GLCFG.browser.hidden())&&(j.ggPM("flush","0"),x=!0,L("Data flushed on "+t.type+" event"))}var I,A={},M=[],N=[],R={},F=String(Date.now())+Math.round(1e4*Math.random()),B,V=5,G=-1,x=!1,j=u||{};if(j.id=F,j.name=o,j.initialized=!1,j.staticPage={},j.modules={allModInit:!1},j.configLoaded=!1,j.apid="",j.sdkv=P,j.sdkvForConfig=w,j.useCachedConfig=void 0!==u&&null!==u,j.sessionId="",j.sivt=null,j.state=null,j._pauseTimeoutEnabled=!1,j.isAdobe=!1,u){if(u.q){var U,K=null;for(U=0;U<u.q.length;U++)(K=u.q[U])&&K.length>0&&M.push({eventType:K[0],param1:K.length>1?K[1]:void 0,param2:K.length>2?K[2]:void 0,param3:K.length>3?K[3]:void 0,param4:K.length>4?K[4]:void 0});delete u.q}else u.getEventQue&&(M=u.getEventQue());N=u.te||[]}var z={_queueEventLog:!1,_eventLog:[],init:function t(){try{var a=e.controllers.util.queryParam("nol_eventHookDelay");if(z._queueEventLog=!1,a){var n=parseInt(a);"NaN"!==n.toString()&&(z._queueEventLog=!0,setTimeout(function(){z._queueEventLog=!1},1e3*(n<=20?n:20)))}}catch(e){z._queueEventLog=!1}},trigger:function t(a,n){try{if(n){var r=JSON.parse(JSON.stringify(n));r.name=a.name,r.sdkv=w,z._queueEventLog?z._eventLog.push(r):(z._eventLog&&z._eventLog.length>0&&(e.controllers.util.fireCustomEvent("NSDK_EventHook",z._eventLog),z._eventLog=[]),e.controllers.util.fireCustomEvent("NSDK_EventHook",[r]))}}catch(e){}}},J={_enabled:!0,_activated:!1,mode:null,isHybrid:function e(){return this._enabled&&(void 0!==t.NielsenAppSDK||t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.NielsenSDKMsg||t.NielsenAppSDKJSHandler&&t.ReactNativeWebView)},isAsync:function e(){return this._enabled&&(t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.NielsenSDKMsg||t.NielsenAppSDKJSHandler&&t.ReactNativeWebView)},intType:function e(){return this._enabled&&t.NielsenAppSDKJSHandler&&t.ReactNativeWebView?"ReactWebview":"HybridWebview"},state:{},eMap:function e(t){return t=t||"",{3:"loadMetadata",14:"staticstart",15:"loadMetadata",5:"play",55:"sendID3",49:"setPlayheadPosition",playheadposition:"setPlayheadPosition",setplayheadposition:"setPlayheadPosition",6:"stop",7:"stop",30:"onPaginate",35:"updateMetadata",56:"staticend",57:"end",oncomplete:"end",900:"optoutstatus",901:"optouturl",902:"meterversion",903:"demographicid"}[t.toString()]||t},send:function e(a,n,r){var i=this,o;if(i.isHybrid()){if(!r&&i.state[n.id]&&!i.state[n.id].enabled)return i.state[n.id].que||(i.state[n.id].que=[]),void i.state[n.id].que.push({action:a,payload:n});if(r||i._activated&&i.state[n.id]&&i.state[n.id].enabled)if(t.NielsenAppSDK){o=t.NielsenAppSDK.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:a,payload:n}));try{o=o?JSON.parse(o):o}catch(e){}finally{return o&&i.processMsg(o),o}}else{if(t.webkit&&t.webkit.messageHandlers&&t.webkit.messageHandlers.NielsenSDKMsg)return t.webkit.messageHandlers.NielsenSDKMsg.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:a,payload:n}));if(t.NielsenAppSDKJSHandler&&t.ReactNativeWebView)return t.ReactNativeWebView.postMessage(JSON.stringify({owner:"NielsenAppSDKJSHandler",action:a,payload:n}))}}},enableSDK:function e(){j.initialized=!0,j.modules.allModInit=!0,j.modules.PLCMB=2},processMsg:function e(t){var a,n=this,r,i;if(t&&t.payload&&(!t.payload.id||n.state[t.payload.id]))switch(t.action){case"enabled":t.payload.id&&n.state[t.payload.id]&&(n.state[t.payload.id].enabled="true"==t.payload.value.toString());break;case"updateott":case"optoutstatus":case"optouturl":case"demographicid":case"meterversion":n.state[t.payload.id][t.action]=t.payload.value,a=document.getElementById("nielsen.bsdk.native."+t.action),a&&(a.innerHTML=t.payload.value);break;case"init-ggPM":case"init-trackEvent":if(clearTimeout(n.timeout),n.state[t.payload.id].enabled=t.payload.result,n._activated="true"==t.payload.result.toString(),n._activated){for(n.enableSDK(),n.mode="init-trackEvent"==t.action?1:0,j.emptyQueue(),i=n.state[t.payload.id].que,r=0;r<i.length;r++)n.send(i[r].action,i[r].payload);n.state[t.payload.id].que.length=0}else n.start&&(n.start(),n.start=null)}},onMessage:function e(){var a=this;E(t,"message",function(e){if(e){var t;try{t=JSON.parse(e.data)||{},t.action&&t.payload&&a.processMsg(t)}catch(e){}}})},trackEvent:function e(t,a,n){var r=this;null===r.mode&&(r.mode=1),n=r.eMap(n),r.send("trackEvent",{id:F,data:{event:n||"",param1:t,queue_call:a}})},ggPM:function e(t,a,n,r,i){var o=this;null===o.mode&&(o.mode=0),t=o.eMap(t),o.mode?o.send("trackEvent",{id:F,data:{event:t||"",param1:a,queue_call:!1}}):o.send("ggPM",{id:F,data:{event:t,param1:a,param2:n,param3:r,param4:i}})},urlParms:function e(a){return((t.location.href.split("?")[1]||"").split("&")||[]).forEach(function(e){e.indexOf("=")>-1&&e.split("=")[0]&&(a[e.split("=")[0]]=e.split("=")[1])}),a},ggInitialize:function t(a,n,r,i,o,s,l){var d=this,c,u=JSON.parse(JSON.stringify(a)),p=e.configs[a.apid].nol_GLOBALS||{};c=p.nol_hybrid_timeout||2e3,d.isHybrid()&&(p.nol_droid_appid||p.nol_ios_appid)?(d.start=l,d.state[F]={},d.state[F].que=[],d.timeout=setTimeout(function(){d.send("timeout",{id:F,data:{ggParams:u,instanceName:n,uid:r,flashDetect:i,detectBrowser:o,container:s}},!0),delete d.state[F],d.start&&d.start(),d.start=null},c),d.onMessage(),d.send("init",{id:F,intType:d.intType(),bsdkid:u.apid,droidid:p.nol_droid_appid||"",iosid:p.nol_ios_appid||"",timeout:c,data:{ggParams:d.urlParms(u),instanceName:n,uid:r,flashDetect:i,detectBrowser:o,container:s}},!0)):l&&l()}},q=function(e,a){return function(n,r){try{a.browserSafeAddEventListener({element:t,eventType:"NSDK_Initialized",func:function t(a){try{a.detail.instanceName===e&&n(a.detail.instance)}catch(e){r&&r(e.message)}}})}catch(e){r&&r(e.message)}}}(j.name,e);return j.isHybrid=J.isHybrid,j.getOptOutStatus=function(){return y},j.getId=function(){return F},j.GetName=function(){return j.name},j.Initialized=function(e){if(void 0===e)return j.initialized;j.initialized=e},j.getPauseQueueCount=function(){return Object&&Object.keys?Object.keys(R).length:0},j.disablePauseTimeout=function(){j._pauseTimeoutEnabled&&(j._pauseTimeoutEnabled=!1,L("Player "+j.id+" pause timeout disabled"))},j.enablePauseTimeout=function(){j._pauseTimeoutEnabled||(j._pauseTimeoutEnabled=!0,L("Player "+j.id+" pause timeout enabled"))},j.removeAsset=function(e){void 0!==e&&e.target.param1.hasOwnProperty("assetid")&&(j.staticPage={})},j.handleUpdateOfStatic=function(t){if(t&&t.target){var a=t.target.evtInfo;if(e.GLCFG&&e.GLCFG.PLDCR&&void 0!==a&&a.param1.hasOwnProperty("assetid")&&j.getId()===t.target.plid){var n=e.GLCFG.PLDCR.latestDcrTick();0!==Object.keys(j.staticPage).length&&j.staticPage.hasOwnProperty("id")&&j.staticPage.id===a.param1.assetid&&j.staticPage.hasOwnProperty("lastTimeStamp")?j.staticPage.lastTimeStamp=n:j.staticPage={id:a.param1.assetid,evtParams:a,startTimeStamp:n,lastTimeStamp:n}}}},j.addListener=function(e,t){t&&(void 0===A[e]&&(A[e]=[]),A[e].push(t))},j.removeListener=function(e,t){if(j._listeners[e]instanceof Array)for(var a=A[e],n=0,r=a.length;n<r;n++)if(a[n]===t){a.splice(n,1);break}},j.handleSessionReset=function(e){if(e&&e.target&&e.target.hasOwnProperty("plid")&&F===e.target.plid&&e.target.hasOwnProperty("passedFdata")&&e.target.passedFdata.hasOwnProperty("_dataArrObj")&&e.target.passedFdata._dataArrObj){var t={plid:e.target.plid,fData:e.target.passedFdata._dataArrObj,content:{},ad:{},err:0};if(0===_(t).err&&e.target.passedFdata.hasOwnProperty("_currVidType")){var a=e.target.passedFdata._currVidType,n=Object.keys(t.content).length>0,r=Object.keys(t.ad).length>0;(n||r)&&("sessionreset"!==e.target.passedFdata.get("nolPriv_prevEventState")&&j.ggPM("57","1","sessionReset","",""),n&&!R.hasOwnProperty("content")&&(R.content={evt:"pauseloadmeta",meta:t.content,plid:e.target.plid}),"ad"===a&&r&&!R.hasOwnProperty("ad")&&(R.ad={evt:"pauseloadmeta",meta:t.ad,plid:e.target.plid}))}}j._listeners&&j._listeners.fireEvent&&j._listeners.fireEvent("debug",{type:"debug",msg:"Fired handleSessionReset from ggcmb."})},j.flushPauseEventQueue=function(){if(!(Object.keys(R).length<=0)){if(j.modules.PLDPR){var e;for(e in R)m("ggPM",{evtInfo:{eventType:R[e].evt,param1:R[e].meta},id:F});R={}}j._listeners&&j._listeners.fireEvent&&j._listeners.fireEvent("debug",{type:"debug",msg:"Fired flushPauseEventQueue from ggcmb."})}},j.cloneObj=function(e){return e&&"object"===(void 0===e?"undefined":_typeof(e))?JSON.parse(JSON.stringify(e)):e},j.ggPM=function(t,a,n,r,i){if(j.initialized)if(void 0!==t&&null!==t&&""!==t){var o={};if(o.eventType=t,o.param1=j.cloneObj(a),o.param2=j.cloneObj(n),o.param3=j.cloneObj(r),o.param4=j.cloneObj(i),!j.modules.allModInit||2!=j.modules.PLCMB&&2!=j.modules.PLDPR)M.push(o);else{if(j.emptyQueue(),J._activated&&J.isHybrid())return void J.ggPM(t,a,n,r,i);var s=JSON.parse(JSON.stringify(o));m("ggPM",{evtInfo:o,id:F}),z.trigger(j,s)}}else e&&e.GLCFG&&e.GLCFG._listeners&&e.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in ggPM() - Missing event type param in ggPM"},id:F,timeStamp:Date.now()})},j.trackEvent=function(t,a,n){function r(){return Array.isArray(N)&&N.length>0?(a||N.push(j.clone(t)),N.splice(0,1)[0]||{}):t}if(t&&"object"===(void 0===t?"undefined":_typeof(t))){if(!j.initialized||!j.state)return;if(!(t=r()))return;if(J._activated&&J.isHybrid())return void J.trackEvent(t,a,n);j.state.transition(t,function(e,t,a,n,r){var i={inferred:!0};i.eventType=e,i.param1=j.cloneObj(t),i.param2=j.cloneObj(a),i.param3=j.cloneObj(n),i.param4=j.cloneObj(r);var o=JSON.parse(JSON.stringify(i));m("ggPM",{evtInfo:i,id:F}),z.trigger(j,o)}),z.trigger(j,{eventType:"trackEvent",param1:t})}else e&&e.GLCFG&&e.GLCFG._listeners&&e.GLCFG._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Missing trackEvent metadata object"},id:F,timeStamp:Date.now()})},j.getConfigParams=function(){return I},j.emptyQueue=function(){if(!(M.length<=0&&N.length<=0)&&j.modules.allModInit&&(j.modules.PLCMB||j.modules.PLDPR)){for(var e=0,t=M.length;e<t;e+=1){var a=JSON.parse(JSON.stringify(M[e]));J._activated&&J.isHybrid()?J.ggPM(a.eventType,a.param1,a.param2,a.param3,a.param4):(m("ggPM",{evtInfo:M[e],id:F}),z.trigger(j,a))}for(M=[];N.length>0;)N[0]&&j.trackEvent(N[0],!0)}},j.getContainer=function(){return B},j.getClientConfig=function(){return e.configs?e.configs[j.apid]:null},j.ggInitialize=function(t,n,r,i,o,u){function p(){j.sessionId=e.GLCFG&&e.GLCFG.generateGUID?e.GLCFG.generateGUID():j.id;var t="";try{t=e.GLCFG.evalTemplate(_.nol_GLOBALS.nol_tagMap.nol_defaults.nol_sessionURL.replace("&retry=|![nol_retry]!|",""),{nol_prefProtocol:e.GLCFG.getPrefProtocol(_),nol_sfcode:g,nol_userSessionId:j.sessionId,nol_appid:_.nol_GLOBALS.nol_appid,nol_sdkv:j.sdkvForConfig,nol_useroptout:j.optout?"true":""})}catch(e){}return t||(t=T+h+(_&&_.nol_GLOBALS&&_.nol_GLOBALS.nol_dfltAppid?_.nol_GLOBALS.nol_dfltAppid:I.ggParams.apid)+"&sessionId="+j.sessionId+"&c16=sdkv,"+j.sdkvForConfig),j.useCachedConfig&&e.getLib("GLCFG")?e.GLCFG&&(e.GLCFG.sfCode=g,e.GLCFG.browser.ready(function(){O(e.getLib("GLCFG")),e.GLCFG.loadChildren(j.sdkv),e.GLCFG.waitForLS(function(){if(e.GLCFG.lsController.maskedRequestWithRetry(t),e.GLCFG.queryCookies(),e.GLCFG.PLDCR&&_.nol_GLOBALS&&(_.nol_GLOBALS.nol_idleTimeout&&(e.GLCFG.PLDCR.nol_idleTimeout=_.nol_GLOBALS.nol_idleTimeout),_.nol_GLOBALS.nol_maxTickDelta&&(e.GLCFG.PLDCR.nol_maxTickDelta=_.nol_GLOBALS.nol_maxTickDelta)),e.GLCFG.PLDPR){var a=e.GLCFG.PLDPR.initFromConfig(_,j.id,!0);e.PLSIVT&&(j.sivt=new e.PLSIVT(j,a))}})})):(C({url:t,currRetry:G,maxRetry:V,retryDelay:1e3}),e.loadLib("GLCFG",b+"novms/js/2/configs/"+c,e,O)),k.Promise(q)}if(j.initialized)return k.Promise(function(e,t){e(j)});z.init();var m,f,v,g="us";if(B=u,I={ggParams:t,uid:r,oldFlashDetect:i,detectBrowser:o,nol_playerId:F},(void 0===t?"undefined":_typeof(t))==_typeof(String())){for(m=e.loadXmlString("<vi>"+t+"</vi>"),f=m.firstChild.firstChild,v=0,t={};f&&void 0!==f&&v<20;)null!==f.firstChild&&(t[f.nodeName]=f.firstChild.nodeValue),f=f.nextSibling,v++;I.ggParams=t}I.ggParams.nol_sdkDebug=e.controllers.util.queryParam("nol_sdkDebug")||I.ggParams.nol_sdkDebug,j.Initialized(!0),P=(t.nsdkv?t.nsdkv.toString():"")||P,S=(t.nsdkvOverride?t.nsdkvOverride.toString():"")||S,g=t.sfcode||g,b=t.coreaddress?s+"//"+t.coreaddress+"/":a(t),w=t.sdkconfigver||w,j.nsdkvOverride=I.ggParams.nsdkvOverride;try{j.optout=!(!I||!I.ggParams||void 0===I.ggParams.optout)&&["true","1","t","y","yes"].indexOf(I.ggParams.optout.toString().toLowerCase())>-1}catch(e){}j.apid=I.ggParams.apid,j.sdkv=P,j.sdkvForConfig=j.useCachedConfig&&j.sdkv&&3===j.sdkv.length?"bj."+j.sdkv[0]+"."+j.sdkv[1]+"."+j.sdkv[2]:w;var _=j.getClientConfig();T=e.GLCFG.getPrefProtocol(_)+":"+(t.coreaddress?l+g:"//secure-"+g)+d,j.state=e.PLSTM?new e.PLSTM.stateMachine(j.id,_):null,J.isHybrid()?J.ggInitialize(t,n,r,i,o,u,p):p()},j.isViewable=function(){return!1},e.browserSafeAddEventListener({element:t,eventType:"beforeunload",useCapture:!1,func:function e(t){j&&j.staticPage&&p(j.staticPage)}}),e.GLCFG.flushEvent=D,e.GLCFG.browser.addEventListener({element:t,eventType:"blur",useCapture:!1,func:D}),e.GLCFG.browser.addEventListener({element:t.document,eventType:e.GLCFG.browser.visibilityEvent,useCapture:!1,func:D}),e.GLCFG.browser.addEventListener({element:t,eventType:"pagehide",useCapture:!1,func:D}),j}if(!e.isBuilt||!e.isBuilt()){var s=-1!==t.location.protocol.indexOf("https")?"https:":"http:",l="//secure-",d=".imrworldwide.com/",c="glcfg510.js",u=864e5,p=1,m=5,f=0,v=0,g=0,_={},y=!1,h="cgi-bin/gn?prd=session&c9=devid,&c13=asid,",P="600",S="600",b=a(),T=s+"//secure-us.imrworldwide.com/",O="imrworldwide.com",L=e.getInstances?e.getInstances():{},C=!1,w="bj.6.0.0",E="6.0.0.16";Date.now=Date.now||function(){return+new Date};var k={Promise:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){try{var t=new Promise(function(e,t){});return new Promise(e)}catch(e){}return new function e(t){var a=function e(t){r&&r(t)},n=function e(t){i&&i(t)},r=null,i=null;return{then:function e(o,s){r=o,i=s,t(a,n)}}}(e)})};e.sdkvForConfig=function(){return w},e.isBuilt=function(){return C},e.getInstance=function(a,n){var r=void 0!==a&&("string"==typeof a||"object"==(void 0===a?"undefined":_typeof(a))&&a.constructor===String)?a:"default";return L.hasOwnProperty(r)||(L[r]=n?o(r,e[r]||t[r]):o(r)),L[r]},e.setTotalNumAssetsAllowed=function(e){p=isNaN(e)?e:parseInt(e,10)},e.getAddress=function(){return b},e.getConfigAddress=function(){return T},e.getInstances=function(){return L},e.loadXmlString=function(e){var t=null;try{return t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e),t}catch(n){try{var a=new DOMParser;return t=a.parseFromString(e,"text/xml")}catch(e){}}return null},e.isNielsenTag=function(e){var t=!1;if(void 0!==e){var a=e.indexOf("?"),n=e.indexOf("imrworldwide.com");n>-1&&n<a&&(t=!0)}return t},e.getVersion=function(){return P},e.getVersionOverride=function(){return S},e.send=function(e){e&&t.console&&t.console.log&&console.log(e.parentNode)},e.browserSafeAddEventListener=function(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))},e.browserSafeRemoveEventListener=function(e){void 0!==e&&null!==e&&null!==e.element&&void 0!==e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))},e.controllers={util:function(e){return function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var a=document.createEvent("CustomEvent");return a.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),a}if("function"==typeof t.CustomEvent)return!1;e.prototype=t.Event.prototype,t.CustomEvent=e}(),{fireCustomEvent:{fireCustomEvent:function a(n,r,i){try{i=i||t,n&&i&&i.dispatchEvent(new CustomEvent(n,{detail:r}))}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to call element.dispatchEvent()."})}}}.fireCustomEvent,queryParam:{queryParam:function a(n){try{n=n.toString().toLowerCase();var r=t.location.search.substr(1).split("&"),i="";if(r.find)i=r.find(function(e){return 0===e.toLowerCase().indexOf(n+"=")});else for(var o=0,s=r.length;o<s;o++)if(0===r[o].toLowerCase().indexOf(n+"=")){i=r[o];break}if(i){var l=i.split("=");if(l&&l.length>1)return l[1]}}catch(t){e&&e._listeners&&e._listeners.fireEvent("error",{type:"error",msg:"Browser error attempting to retrieve query string parameter."})}return""}}.queryParam,Promise:k.Promise}}(e)};var l=l||"//secure-",s=s||-1!==t.location.protocol.indexOf("https")?"https:":"http:",d=".imrworldwide.com/",e=e||t.NOLBUNDLE||{},c=c||"glcfg510.js",P=P||"600",w=w||"bj.6.0.0",T=T||s+"//secure-us.imrworldwide.com/",y=y||!1,L=L||e.getInstances?e.getInstances():{},f=f||0,v=v||0,g=g||0,b=b||a(),S=S||"600",h=h||"cgi-bin/gn?prd=session&c9=devid,&c13=asid,";if(function(){var t={};e.loadLib=function(a,n,r,i){if(void 0!==a&&null!==a&&"string"==typeof a&&void 0!==n&&null!==n&&"string"==typeof n)if(t[a]){if(t[a].body)return void i(t[a].body(r));t[a].callbacks.push({func:i,arg:r})}else t[a]={callbacks:[]},t[a].callbacks.push({func:i,arg:r});else void 0!==n&&null!==n||e.initLib(a,r)},e.registerLib=function(a,n){try{if(t){t.hasOwnProperty(a)||e.initLib(a,e,n);var r=t[a];r.body=n;for(var i=r.callbacks.shift();i;)i.func(r.body(i.arg)),i=r.callbacks.shift()}}catch(e){}},e.initLib=function(e,a,n){if(t[e]||(t[e]={handle:null,callbacks:[]}),t[e].body=n,t[e].body){var r=t[e].body(a);return a[e]=r,void(t[e].handle=r)}},e.getLib=function(e){return t[e]?t[e].handle:null}}(),t.gg_nol_FlashCallBack){for(var D=0,I,A=t.gg_nol_FlashCallBack.length;D<A;D+=1)t.gg_nol_FlashCallBack[D].hasOwnProperty("callBack")&&(I=document.getElementById(t.gg_nol_FlashCallBack[D].swfId))&&I[t.gg_nol_FlashCallBack[D].callBack]();t.gg_nol_FlashCallBack=void 0}C||(C=!0,f=v=Date.now(),e.BUILDVERSION="6.0.0.16")}}(e.NOLBUNDLE=e.NOLBUNDLE||{},e),e.NOLBUNDLE.registerLib("GLCFG",function(t){function a(t,a){if(t&&a){var n=a.path;e.NOLBUNDLE.loadLib(t,n,f,function(){a.status=1})}}function n(e){try{if(!e.modules.allModInit){var t=!0,a=o(e.sdkv);for(g in w)if(w.hasOwnProperty(g)&&a.hasOwnProperty(g)&&!f[g]){if("PLLOG"!==g&&2!==e.modules[g]){t=!1;break}}else;t&&(e.modules.allModInit=!0,f._listeners.fireEvent("flushQueue"))}}catch(e){}}function r(){void 0!==e.document.referrer&&e.document.referrer.length>0&&f.postMsgAvail&&e.parent.postMessage("nolInit",0===e.location.protocol.indexOf("http")?e.document.referrer:"*"),h<P?e.clearInterval(y):P+=1}function i(){if(!(this instanceof i))return new i;f._listeners={},this.addListener=function(e,t,a,n){var r=a||!1;void 0===f._listeners[e]&&(f._listeners[e]=[]),f._listeners[e].push({cb:t,remove:r,player:n})},this.fireEvent=function(e,t){if(e){var a,n,r;if("string"==typeof e&&(e={type:e}),e.target||(e.target=t),!e.type)throw new Error("Event object missing 'type' property.");if(f._listeners[e.type]instanceof Array){for(a=f._listeners[e.type],n=0,r=a.length;n<r;n++)a[n]&&a[n].cb.call(this,e);for(n=0;n<a.length;n++)a[n]&&a[n].remove&&(!e.target||!a[n].player||e.target&&a[n].player&&(e.target.nol_playerId===a[n].player.id||e.target.id===a[n].player.id))&&(a.splice(n,1),n--)}}},this.removeListener=function(e,t){var a,n,r;if(f._listeners[e]instanceof Array)for(a=f._listeners[e],n=0,r=a.length;n<r;n++)if(a[n]&&a[n].cb===t){a[n].remove=!0;break}}}function o(e){return C[e]||C[L]||{}}function s(e){if(void 0!==f.gIframe&&f.postMsgAvail)return void 0===e?void f.lsController.store.get(k):void f.lsController.store.set(k,e)}function l(){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:D,eventType:"get",storageType:"cookie"}),f.gIframe.src)}function d(){for(var e=0;e<f.onLSReady.length;e++)f.onLSReady[e]();f.onLSReady=[]}function c(t,a,n){try{a=a||1,f.gIframe||(f.gIframe=e.document.createElement("iframe"),f.gIframe.src=O+"novms/html/ls.html",f.gIframe.height=0,f.gIframe.width=0,f.gIframe.style.display="none",f.gIframe.id="lsframe",f.gIframe.onload=function(){s(),f.getEmmUrl(),l(),f.queryCookies(),f.gIframeReady=!0,f.thirdPartyData.cookiesEnabled=navigator.cookieEnabled,n&&n(),f.browser.localStorageSupported()||(f.thirdPartyData.localStorageEnabled=!1,d())}),e&&e.document&&e.document.body?e.document.body.appendChild(f.gIframe):a<=15&&setTimeout(function(){f._listeners.fireEvent("debug",{type:"debug",msg:"document.body not ready - delaying to add ls.html"}),c(t,a++,n)},a<=1?0:300)}catch(t){e.console&&e.console.error&&e.console.error("Unable to register ls.html - "+t.message)}}function u(e){if(void 0!==f.gIframe&&f.postMsgAvail)return void 0===e?void f.lsController.store.get(I):void f.lsController.store.set(I,e)}function p(e){if(e){var t,a;for(t in f.availModules)f.availModules.hasOwnProperty(t)&&1==e.init&&(e.modules[t]||(e[t]=new f.availModules[t].init(e),e.modules[t]=1));var r=e.getConfigParams().nol_playerId;f._players[r]=e,f._listeners.addListener("tick",function(){n(f._players[r])})}}function m(e){e&&f._listeners.fireEvent(e.eventTrigger,e)}var f=t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{},v,g,_,y=0,h=30,P=0,S=!0,b=864e5,T=e.NOLBUNDLE,O=T.getAddress(),L=T.getVersion();f.sfCode=f.sfCode||"",f.optoutCookie=f.optoutCookie||"",f.gotOptoutCookie=f.gotOptoutCookie||!1;var C={600:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0",LSID:!0},"600_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.0.rc",LSID:!0},601:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1",LSID:!0},"601_rc":{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.0.1.rc",LSID:!0},501:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLCMB:600,PLLOG:600,CONFIG:300,BASEVER:"6.1.0",LSID:!1,FORCEFOCUS:!0,CADENCEOVERRIDE:30},615:{PLVBL:600,PLSIVT:600,PLSTM:600,PLDPR:600,PLDCR:600,PLLOG:600,CONFIG:300,BASEVER:"6.1.5",LSID:!1,FORCEFOCUS:!0,CADENCEOVERRIDE:30}},w={PLDPR:{path:O+"novms/js/2/pldpr"+C[L].PLDPR+".js",status:0},PLDCR:{path:O+"novms/js/2/pldcr"+C[L].PLDCR+".js",status:0},PLVBL:{path:O+"novms/js/2/plvbl"+C[L].PLVBL+".js",status:0},PLSIVT:{path:O+"novms/js/2/plsivt"+C[L].PLSIVT+".js",status:0},PLCMB:{path:O+"novms/js/2/plcmb"+C[L].PLCMB+".js",status:0},PLLOG:{path:O+"novms/js/2/pllog"+C[L].PLLOG+".js",status:0},PLSTM:{path:O+"novms/js/2/plstm"+C[L].PLSTM+".js",status:0}},E="6.0.0.17";f.gIframe=f.gIframe||f.getLS?f.getLS():null,f.gIframeReady=f.gIframeReady||!1,f.thirdPartyData=f.thirdPartyData||{cookiesEnabled:!0,localStorageEnabled:!0},f.postMsgAvail=f.postMsgAvail||"function"==typeof e.postMessage,f.availModules=f.availModules||{},f._players=f._players||{},f.id=f.id||"0",f.childGlobal=f.childGlobal||!!e&&e.top!==e.self,f.parentFound=f.parentFound||!1,f.loadChildren=function(e){var t,n=o(e||L);for(t in w)w.hasOwnProperty(t)&&n.hasOwnProperty(t)&&!f[t]&&a(t,w[t])};var f=f||(t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{}),T=T||e.NOLBUNDLE,C=C||{},O=O||T.getAddress(),L=L||T.getVersion(),k="nol_lsid",D=D||"OPT_OUT",I="nol_emmURL";f.EMMURL=f.EMMURL||"",f.gotCookies=f.gotCookies||!1,f.gotEMMURL=f.gotEMMURL||!1,f.onLSReady=f.onLSReady||[],f.localStorageId=f.localStorageId||"-1",f.gotLSID=f.gotLSID||!1,f.getEmmUrl=function(){return u()},f.setEmmUrl=function(e){e&&(f.EMMURL=e,u(f.EMMURL))},f.queryCookies=function(){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:"cookieall",eventType:"get",storageType:"cookie"}),f.gIframe.src)},f.getOptoutCookie=function(){return f.optoutCookie},f.isOptout=function(){return f.optoutCookie&&"true"===f.optoutCookie.toLowerCase()||"OPTOUT"===f.localStorageId},f.cookie=f.cookie||function(){var e={cookie:""},t={setCache:function t(a){e.cookie=a},getCookies:function t(){if(e.cookie)try{var a=e.cookie.split(";"),n=null,r={};return a.forEach(function(e){n=e.trim().split("="),r[n[0].trim()]=n[1].trim()}),r}catch(e){}return{}},get:function e(a){if(a){return t.getCookies()[a]}return""}};return{cache:t.setCache,get:t.get,all:t.getCookies}}(),f.getIfLsidShouldSend=function(){var e=o(L);if(e.hasOwnProperty("LSID"))return e.LSID},f.lsReady=function(){return f.gIframeReady},f.getLS=function(){return f.gIframe},f.getLsId=function(){return"string"!=typeof f.localStorageId?f.localStorageId.toString():f.localStorageId},f.setLsId=function(e,t,a,n){if(n=n&&Array.isArray(n)?n.concat(["secure-eu","eu","eu-uat","eu-cert"]):["secure-eu","eu","eu-uat","eu-cert"],null!==e&&void 0!==e&&e!==f.getLsId()&&(f.localStorageId=e,s(f.localStorageId)),t&&f.postMsgAvail)if(f.userAgent.isAndroid()&&f.userAgent.androidVersion().major<6){var r="";f.userAgent.isChrome()?(r="intent://nuid/"+a+"/#Intent;action=android.intent.action.VIEW;scheme=nielsenwebid;component=com.nielsen.odm/.NielsenMobileMeter;end",n.indexOf(f.sfCode.toLowerCase())>-1&&(f.lsController.request(r),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM intent "+r}))):(r="nielsenwebid://nuid/"+a,n.indexOf(f.sfCode.toLowerCase())>-1&&(f.lsController.request(r),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM deep link "+r}))),f.setEmmUrl(r)}else n.indexOf(f.sfCode.toLowerCase())>-1&&(f.lsController.maskedRequest(t),f._listeners.fireEvent("info",{type:"info",msg:"Firing EMM link "+t})),f.setEmmUrl(t)},f.waitForLS=function(e){f.thirdPartyData.localStorageEnabled?e&&(f.gIframeReady&&"-1"!==f.localStorageId?e():f.onLSReady.push(e)):e&&e()},f.lsController={store:{get:function t(a){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:a,eventType:"get",storageType:"local"}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},set:function t(a,n){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,key:a,eventType:"set",storageType:"local",data:n}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")}},request:function t(a){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"reqUsingFrame",data:{url:a}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},maskedRequest:function t(a){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:a}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")},maskedRequestWithRetry:function t(a){f.gIframe.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskrefretry",data:{url:a}}),0===e.location.protocol.indexOf("http")?f.gIframe.src:"*")}};var f=f||(t.GLCFG&&t.GLCFG.getBaseBuildVer?t.GLCFG:{});if(f.checkUserAgent=function(t){var a=e?e.navigator.userAgent.toLowerCase():null;return void 0!==t&&t.length>0&&(a=-1!==a.search(t)),a},f.userAgent=function(e){var t=null,a="";try{t=e&&e.navigator?e.navigator.userAgent:null,a=t?t.toLowerCase():""}catch(e){}return{get:function e(){
return t},isInstagram:function e(){return-1!==a.search(/(?=.*instagram).*/)},isFB:function e(){return-1!==a.search(/(?=.*\[fb).*/)},isChrome:function e(){return-1!==a.search(/(?=.*chrome).*/)||-1!==a.search(/(?=.*crios).*/)},isMac:function e(){return-1!==a.search(/(?=.*macintosh).*/)},isIOS:function e(){return-1!==a.search(/(?=.*iphone).*/)||-1!==a.search(/(?=.*ipad).*/)},iosVersion:function e(){var t=new RegExp(/os\s([0-9_]*?)\s/gi),n=t.exec(a),r=n&&n.length>1?n[1].split("_"):[];return{version:n&&n.length>0?n[1].replace(/_/gi,"."):"",major:r&&r.length>0?parseInt(r[0]):0,minor:r&&r.length>1?parseInt(r[1]):0,patch:r&&r.length>2?parseInt(r[2]):0}},isAndroid:function e(){return-1!==a.search(/(?=.*android).*/)},androidVersion:function e(){var t=new RegExp(/android (.*?);/gi),n=t.exec(a),r=n&&n.length>1?n[1].split("."):[];return{version:n&&n.length>0?n[1]:"",major:r&&r.length>0?parseInt(r[0]):0,minor:r&&r.length>1?parseInt(r[1]):0,patch:r&&r.length>2?parseInt(r[2]):0}}}}(e),f.browser=function(){function t(e){void 0!==e.element&&(e.element.addEventListener?e.element.addEventListener(e.eventType,e.func,e.useCapture):e.element.attachEvent&&e.element.attachEvent("on"+e.eventType,e.func))}function a(e){void 0!=e&&null!=e&&null!=e.element&&void 0!=e.element&&(e.element.removeEventListener?e.element.removeEventListener(e.eventType,e.func,e.useCapture):e.element.detachEvent&&e.element.detachEvent("on"+e.eventType,e.func))}function n(n){function r(){a({element:document,eventType:"DOMContentLoaded",func:i}),a({element:e,eventType:"load",func:i})}function i(){r(),o.ready=!0,n&&n()}if(o.ready)return void(n&&n());"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?e.setTimeout(i):(t({element:document,eventType:"DOMContentLoaded",func:i}),t({element:e,eventType:"load",func:i}))}function r(){try{var t=e.localStorage;if(null!==t&&void 0!==t)return!0}catch(e){return!1}return!1}function i(){return document[l]||"hidden"===document[c]}var o={ready:!1},s=["webkit","moz","ms","o"],l="hidden",d="visibilitychange",c="visibilityState";if(void 0===document[l])for(var u=0;u<s.length;u++)if(s[u]+"Hidden"in document){l=s[u]+"Hidden",d=s[u]+"visibilitychange",c=s[u]+"visibilityState";break}return{addEventListener:t,removeEventListener:a,ready:n,localStorageSupported:r,hidden:i,visibilityEvent:d}}(),f.getBaseBuildVer=function(){var e=o(L);if(e.hasOwnProperty("BASEVER"))return e.BASEVER+"."},f.getConfigVer=function(){var e=o(L);if(e.hasOwnProperty("CONFIG"))return e.CONFIG},f.globalHasFocus=function(){var t=T.getVersionOverride(),a=o(t);if(a&&a.hasOwnProperty("FORCEFOCUS")&&(!e.document||void 0===e.document.visibilityState||"visible"===e.document.visibilityState))return a.FORCEFOCUS;if(e.top!=e.self)return!1;var n=!1;try{n=e.top.document.hasFocus()}catch(e){n=!0}return n},f.getSdkvGlobal=function(e,t){if(e&&t){var a=o(e);return!(!a||!a.hasOwnProperty(t))&&a[t]}},f.isValidJson=function(e){var t;try{t=JSON.parse(e)}catch(e){return!1}return"Object"==typeof t},f.getPrefProtocol=function(t){try{return f.userAgent.isIOS()&&f.userAgent.iosVersion().major>=9?"https":0===e.location.protocol.indexOf("https")?"https":t.nol_GLOBALS.hasOwnProperty("nol_prefProtocol")&&-1!==["http","https"].indexOf(t.nol_GLOBALS.nol_prefProtocol)?t.nol_GLOBALS.nol_prefProtocol:t.nol_GLOBALS.nol_tagMap&&t.nol_GLOBALS.nol_tagMap.nol_defaults&&t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol&&-1!==["http","https"].indexOf(t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol)?t.nol_GLOBALS.nol_tagMap.nol_defaults.nol_prefProtocol:"https"}catch(e){return"https"}},f.generateGUID=function(){function e(){var e;do{e=Math.floor(992*Math.random())}while(e>61);return e}for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",a=29,n="",r=0;r<29;r++)n+=t.charAt(e());return n+=Math.floor((new Date).getTime()/1e3)},f.evalTemplate=function(e,t){if(e&&t)for(var a={regex:/\|\![\w\W]*?(\!\|)/g,length:2},n=e.match(a.regex),r="",i=0;i<n.length;i++)(r=n[i].match(/\w+/gi))&&r.length>0&&(e=e.replace(n[i],t[r[0]]||""));return e},f.bindPlayers=function(e,t){if(t){var a;f.availModules[t]=e;for(a in f._players)f._players.hasOwnProperty(a)&&1==f._players[a].init&&(f._players[a].modules[t]||(f._players[a][t]=new e.init(f._players[a]),f._players[a].modules[t]=2))}},f.enablePlayer=function(e,t){e&&t&&(f._players[e].modules[t]=2)},f.registerListener=function(e,t){t&&(t.addListener(e,function(t){f._listeners.fireEvent(e,t)}),t.init||(t.init=1,p(t)))},f.updateReceiver=function(e){m(e)},f._listeners=f._listeners||new i,f.configController={_keys:{cmsKey:"nol_clientCMSmap"},getGlobal:function e(t,a){return t&&a&&a.nol_GLOBALS?a.nol_GLOBALS[t]||"":""},cmsMap:function e(t,a){var n=this.getGlobal(this._keys.cmsKey,a);return n?n[t]:""}},f.scriptController={inject:function e(t,a,n,r){if(t){var i=document.createElement("script");i.setAttribute("type","text/javascript"),i.async=!0,i.onload=n,i.onerror=r,i.src=t;var o=null,a=a||"";if("script"===a){if((o=document.getElementsByTagName("script"))&&o.length>0)return void(a=o[0].parentNode.insertBefore(i,o[0]))}else if("head"===a){if((o=document.getElementsByTagName("header"))&&o.length>0)return void(a=o[0].appendChild(i))}else if(a&&"string"==typeof a){if((a=document.getElementById(a))&&"function"==typeof a.insertBefore)return void a.parentNode.insertBefore(i,a)}else if(a&&"object"===(void 0===a?"undefined":_typeof(a))&&a.appendChild&&"function"==typeof a.appendChild)return void a.appendChild(i);document.body.appendChild(i)}}},!f.built){try{c(),T.browserSafeAddEventListener({element:e,eventType:"message",func:function t(a){var n,r,i;if(a.data&&"nolInit"==a.data&&e.self===e.top)for(n=e.document.getElementsByTagName("iframe"),r=n.length-1;r>=0;r--)n[r].contentWindow==a.source&&f.postMsgAvail&&a.source.postMessage({nolSentFromBsdk:!0,key:"nolChildReg",parentID:f.id},0===e.location.protocol.indexOf("http")?a.origin:"*");else a.data&&a.data.key&&"nolChildReg"==a.data.key&&(f.parentFound=!0,e.clearInterval(y));if(a.origin&&a.origin.indexOf("imrworldwide.com")>-1&&a.data||a.data&&a.data.nolSentFromLs){var o=""!==a.data.val&&f.isValidJson(a.data.val)?JSON.parse(a.data.val):a.data.val,l=""!==a.data.key&&f.isValidJson(a.data.key)?JSON.parse(a.data.key):a.data.key;if(a.data&&"lsget"===a.data.type)switch(l){case k:var c="OPTOUT"===String(o).toUpperCase();f.setLsId(o),f.gotLSID=!0,f._listeners.fireEvent("sendOptOutStatus",c);break;case I:f.EMMURL=o,f.gotEMMURL=!0}else if(a.data&&"lsbroadcast"===a.data.type){var u=String(a.data.newValue).toUpperCase().replace(/"/gi,"");switch(l){case k:u&&"-1"!==u||(u=f.generateGUID(),s(u)),f.localStorageId=u,f._listeners.fireEvent("sendOptOutStatus","OPTOUT"===u);break;case I:f.EMMURL=o}}else if(a.data&&"cookieget"===a.data.type)switch(l){case D:f.optoutCookie=o,f.gotOptoutCookie=!0;break;case"cookieall":f.cookie.cache(o),f.gotCookies=!0,f._listeners.fireEvent("debug",{type:"debug",msg:"Got cookie value ='"+o+"'"})}else if(a.data&&"lsdisabled"===a.data.type&&1==a.data.val)switch(f.thirdPartyData.localStorageEnabled=!1,a.data.key){case k:f.gotLSID=!0;break;case I:f.gotEMMURL=!0}else a.data&&"cookiedisabled"===a.data.type&&1==a.data.val&&(f.thirdPartyData.cookiesEnabled=!1,a.data.key===D&&(f.gotOptoutCookie=!0,f.gotCookies=!0));f.gotLSID&&f.gotEMMURL&&f.gotOptoutCookie&&f.gotCookies&&d()}},useCapture:!1}),void 0===v&&(v=e.setInterval(function(e){f._listeners.fireEvent("tick",e)},1e3)),f.childGlobal&&(y=e.setInterval(function(){r()},500))}catch(e){}f.CryptoJS=f.CryptoJS||function(e,t){var a={},n=a.lib={},r=function e(){},i=n.Base={extend:function e(t){r.prototype=this;var a=new r;return t&&a.mixIn(t),a.hasOwnProperty("init")||(a.init=function(){a.$super.init.apply(this,arguments)}),a.init.prototype=a,a.$super=this,a},create:function e(){var t=this.extend();return t.init.apply(t,arguments),t},init:function e(){},mixIn:function e(t){for(var a in t)t.hasOwnProperty(a)&&(this[a]=t[a]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function e(){return this.init.prototype.extend(this)}},o=n.WordArray=i.extend({init:function e(a,n){a=this.words=a||[],this.sigBytes=n!=t?n:4*a.length},toString:function e(t){return(t||l).stringify(this)},concat:function e(t){var a=this.words,n=t.words,r=this.sigBytes;if(t=t.sigBytes,this.clamp(),r%4)for(var i=0;i<t;i++)a[r+i>>>2]|=(n[i>>>2]>>>24-i%4*8&255)<<24-(r+i)%4*8;else if(65535<n.length)for(i=0;i<t;i+=4)a[r+i>>>2]=n[i>>>2];else a.push.apply(a,n);return this.sigBytes+=t,this},clamp:function t(){var a=this.words,n=this.sigBytes;a[n>>>2]&=4294967295<<32-n%4*8,a.length=e.ceil(n/4)},clone:function e(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function t(a){for(var n=[],r=0;r<a;r+=4)n.push(4294967296*e.random()|0);return new o.init(n,a)}}),s=a.enc={},l=s.Hex={stringify:function e(t){var a=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++){var i=a[r>>>2]>>>24-r%4*8&255;n.push((i>>>4).toString(16)),n.push((15&i).toString(16))}return n.join("")},parse:function e(t){for(var a=t.length,n=[],r=0;r<a;r+=2)n[r>>>3]|=parseInt(t.substr(r,2),16)<<24-r%8*4;return new o.init(n,a/2)}},d=s.Latin1={stringify:function e(t){var a=t.words;t=t.sigBytes;for(var n=[],r=0;r<t;r++)n.push(String.fromCharCode(a[r>>>2]>>>24-r%4*8&255));return n.join("")},parse:function e(t){for(var a=t.length,n=[],r=0;r<a;r++)n[r>>>2]|=(255&t.charCodeAt(r))<<24-r%4*8;return new o.init(n,a)}},c=s.Utf8={stringify:function e(t){try{return decodeURIComponent(escape(d.stringify(t)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function e(t){return d.parse(unescape(encodeURIComponent(t)))}},u=n.BufferedBlockAlgorithm=i.extend({reset:function e(){this._data=new o.init,this._nDataBytes=0},_append:function e(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function t(a){var n=this._data,r=n.words,i=n.sigBytes,s=this.blockSize,l=i/(4*s),l=a?e.ceil(l):e.max((0|l)-this._minBufferSize,0);if(a=l*s,i=e.min(4*a,i),a){for(var d=0;d<a;d+=s)this._doProcessBlock(r,d);d=r.splice(0,a),n.sigBytes-=i}return new o.init(d,i)},clone:function e(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=u.extend({cfg:i.extend(),init:function e(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function e(){u.reset.call(this),this._doReset()},update:function e(t){return this._append(t),this._process(),this},finalize:function e(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function e(t){return function(e,a){return new t.init(a).finalize(e)}},_createHmacHelper:function e(t){return function(e,a){return new p.HMAC.init(t,a).finalize(e)}}});var p=a.algo={};return a}(Math),function(){var e=f.CryptoJS,t=e.lib.WordArray;e.enc.Base64={stringify:function e(t){var a=t.words,n=t.sigBytes,r=this._map;t.clamp(),t=[];for(var i=0;i<n;i+=3)for(var o=(a[i>>>2]>>>24-i%4*8&255)<<16|(a[i+1>>>2]>>>24-(i+1)%4*8&255)<<8|a[i+2>>>2]>>>24-(i+2)%4*8&255,s=0;4>s&&i+.75*s<n;s++)t.push(r.charAt(o>>>6*(3-s)&63));if(a=r.charAt(64))for(;t.length%4;)t.push(a);return t.join("")},parse:function e(a){var n=a.length,r=this._map,i=r.charAt(64);i&&-1!=(i=a.indexOf(i))&&(n=i);for(var i=[],o=0,s=0;s<n;s++)if(s%4){var l=r.indexOf(a.charAt(s-1))<<s%4*2,d=r.indexOf(a.charAt(s))>>>6-s%4*2;i[o>>>2]|=(l|d)<<24-o%4*8,o++}return t.create(i,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(e){function t(e,t,a,n,r,i,o){return((e=e+(t&a|~t&n)+r+o)<<i|e>>>32-i)+t}function a(e,t,a,n,r,i,o){return((e=e+(t&n|a&~n)+r+o)<<i|e>>>32-i)+t}function n(e,t,a,n,r,i,o){return((e=e+(t^a^n)+r+o)<<i|e>>>32-i)+t}function r(e,t,a,n,r,i,o){return((e=e+(a^(t|~n))+r+o)<<i|e>>>32-i)+t}for(var i=f.CryptoJS,o=i.lib,s=o.WordArray,l=o.Hasher,o=i.algo,d=[],c=0;64>c;c++)d[c]=4294967296*e.abs(e.sin(c+1))|0;o=o.MD5=l.extend({_doReset:function e(){this._hash=new s.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function e(i,o){for(var s=0;16>s;s++){var l=o+s,c=i[l];i[l]=16711935&(c<<8|c>>>24)|4278255360&(c<<24|c>>>8)}var s=this._hash.words,l=i[o+0],c=i[o+1],u=i[o+2],p=i[o+3],m=i[o+4],f=i[o+5],v=i[o+6],g=i[o+7],_=i[o+8],y=i[o+9],h=i[o+10],P=i[o+11],S=i[o+12],b=i[o+13],T=i[o+14],O=i[o+15],L=s[0],C=s[1],w=s[2],E=s[3],L=t(L,C,w,E,l,7,d[0]),E=t(E,L,C,w,c,12,d[1]),w=t(w,E,L,C,u,17,d[2]),C=t(C,w,E,L,p,22,d[3]),L=t(L,C,w,E,m,7,d[4]),E=t(E,L,C,w,f,12,d[5]),w=t(w,E,L,C,v,17,d[6]),C=t(C,w,E,L,g,22,d[7]),L=t(L,C,w,E,_,7,d[8]),E=t(E,L,C,w,y,12,d[9]),w=t(w,E,L,C,h,17,d[10]),C=t(C,w,E,L,P,22,d[11]),L=t(L,C,w,E,S,7,d[12]),E=t(E,L,C,w,b,12,d[13]),w=t(w,E,L,C,T,17,d[14]),C=t(C,w,E,L,O,22,d[15]),L=a(L,C,w,E,c,5,d[16]),E=a(E,L,C,w,v,9,d[17]),w=a(w,E,L,C,P,14,d[18]),C=a(C,w,E,L,l,20,d[19]),L=a(L,C,w,E,f,5,d[20]),E=a(E,L,C,w,h,9,d[21]),w=a(w,E,L,C,O,14,d[22]),C=a(C,w,E,L,m,20,d[23]),L=a(L,C,w,E,y,5,d[24]),E=a(E,L,C,w,T,9,d[25]),w=a(w,E,L,C,p,14,d[26]),C=a(C,w,E,L,_,20,d[27]),L=a(L,C,w,E,b,5,d[28]),E=a(E,L,C,w,u,9,d[29]),w=a(w,E,L,C,g,14,d[30]),C=a(C,w,E,L,S,20,d[31]),L=n(L,C,w,E,f,4,d[32]),E=n(E,L,C,w,_,11,d[33]),w=n(w,E,L,C,P,16,d[34]),C=n(C,w,E,L,T,23,d[35]),L=n(L,C,w,E,c,4,d[36]),E=n(E,L,C,w,m,11,d[37]),w=n(w,E,L,C,g,16,d[38]),C=n(C,w,E,L,h,23,d[39]),L=n(L,C,w,E,b,4,d[40]),E=n(E,L,C,w,l,11,d[41]),w=n(w,E,L,C,p,16,d[42]),C=n(C,w,E,L,v,23,d[43]),L=n(L,C,w,E,y,4,d[44]),E=n(E,L,C,w,S,11,d[45]),w=n(w,E,L,C,O,16,d[46]),C=n(C,w,E,L,u,23,d[47]),L=r(L,C,w,E,l,6,d[48]),E=r(E,L,C,w,g,10,d[49]),w=r(w,E,L,C,T,15,d[50]),C=r(C,w,E,L,f,21,d[51]),L=r(L,C,w,E,S,6,d[52]),E=r(E,L,C,w,p,10,d[53]),w=r(w,E,L,C,h,15,d[54]),C=r(C,w,E,L,c,21,d[55]),L=r(L,C,w,E,_,6,d[56]),E=r(E,L,C,w,O,10,d[57]),w=r(w,E,L,C,v,15,d[58]),C=r(C,w,E,L,b,21,d[59]),L=r(L,C,w,E,m,6,d[60]),E=r(E,L,C,w,P,10,d[61]),w=r(w,E,L,C,u,15,d[62]),C=r(C,w,E,L,y,21,d[63]);s[0]=s[0]+L|0,s[1]=s[1]+C|0,s[2]=s[2]+w|0,s[3]=s[3]+E|0},_doFinalize:function t(){var a=this._data,n=a.words,r=8*this._nDataBytes,i=8*a.sigBytes;n[i>>>5]|=128<<24-i%32;var o=e.floor(r/4294967296);for(n[15+(i+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),n[14+(i+64>>>9<<4)]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),a.sigBytes=4*(n.length+1),this._process(),a=this._hash,n=a.words,r=0;4>r;r++)i=n[r],n[r]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8);return a},clone:function e(){var t=l.clone.call(this);return t._hash=this._hash.clone(),t}}),i.MD5=l._createHelper(o),i.HmacMD5=l._createHmacHelper(o)}(Math),function(){var e=f.CryptoJS,t=e.lib,a=t.Base,n=t.WordArray,t=e.algo,r=t.EvpKDF=a.extend({cfg:a.extend({keySize:4,hasher:t.MD5,iterations:1}),init:function e(t){this.cfg=this.cfg.extend(t)},compute:function e(t,a){for(var r=this.cfg,i=r.hasher.create(),o=n.create(),s=o.words,l=r.keySize,r=r.iterations;s.length<l;){d&&i.update(d);var d=i.update(t).finalize(a);i.reset();for(var c=1;c<r;c++)d=i.finalize(d),i.reset();o.concat(d)}return o.sigBytes=4*l,o}});e.EvpKDF=function(e,t,a){return r.create(a).compute(e,t)}}(),f.CryptoJS.lib.Cipher||function(e){var t=f.CryptoJS,a=t.lib,n=a.Base,r=a.WordArray,i=a.BufferedBlockAlgorithm,o=t.enc.Base64,s=t.algo.EvpKDF,l=a.Cipher=i.extend({cfg:n.extend(),createEncryptor:function e(t,a){return this.create(this._ENC_XFORM_MODE,t,a)},createDecryptor:function e(t,a){return this.create(this._DEC_XFORM_MODE,t,a)},init:function e(t,a,n){this.cfg=this.cfg.extend(n),this._xformMode=t,this._key=a,this.reset()},reset:function e(){i.reset.call(this),this._doReset()},process:function e(t){return this._append(t),this._process()},finalize:function e(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function e(t){return{encrypt:function e(a,n,r){return("string"==typeof n?v:m).encrypt(t,a,n,r)},decrypt:function e(a,n,r){return("string"==typeof n?v:m).decrypt(t,a,n,r)}}}});a.StreamCipher=l.extend({_doFinalize:function e(){return this._process(!0)},blockSize:1});var d=t.mode={},c=function t(a,n,r){var i=this._iv;i?this._iv=e:i=this._prevBlock;for(var o=0;o<r;o++)a[n+o]^=i[o]},u=(a.BlockCipherMode=n.extend({createEncryptor:function e(t,a){return this.Encryptor.create(t,a)},createDecryptor:function e(t,a){return this.Decryptor.create(t,a)},init:function e(t,a){this._cipher=t,this._iv=a}})).extend();u.Encryptor=u.extend({processBlock:function e(t,a){var n=this._cipher,r=n.blockSize;c.call(this,t,a,r),n.encryptBlock(t,a),this._prevBlock=t.slice(a,a+r)}}),u.Decryptor=u.extend({processBlock:function e(t,a){var n=this._cipher,r=n.blockSize,i=t.slice(a,a+r);n.decryptBlock(t,a),c.call(this,t,a,r),this._prevBlock=i}}),d=d.CBC=u,u=(t.pad={}).Pkcs7={pad:function e(t,a){for(var n=4*a,n=n-t.sigBytes%n,i=n<<24|n<<16|n<<8|n,o=[],s=0;s<n;s+=4)o.push(i);n=r.create(o,n),t.concat(n)},unpad:function e(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},a.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:u}),reset:function e(){l.reset.call(this);var t=this.cfg,a=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=t.createEncryptor;else n=t.createDecryptor,this._minBufferSize=1;this._mode=n.call(t,this,a&&a.words)},_doProcessBlock:function e(t,a){this._mode.processBlock(t,a)},_doFinalize:function e(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var a=this._process(!0)}else a=this._process(!0),t.unpad(a);return a},blockSize:4});var p=a.CipherParams=n.extend({init:function e(t){this.mixIn(t)},toString:function e(t){return(t||this.formatter).stringify(this)}}),d=(t.format={}).OpenSSL={stringify:function e(t){var a=t.ciphertext;return t=t.salt,(t?r.create([1398893684,1701076831]).concat(t).concat(a):a).toString(o)},parse:function e(t){t=o.parse(t);var a=t.words;if(1398893684==a[0]&&1701076831==a[1]){var n=r.create(a.slice(2,4));a.splice(0,4),t.sigBytes-=16}return p.create({ciphertext:t,salt:n})}},m=a.SerializableCipher=n.extend({cfg:n.extend({format:d}),encrypt:function e(t,a,n,r){r=this.cfg.extend(r);var i=t.createEncryptor(n,r);return a=i.finalize(a),i=i.cfg,p.create({ciphertext:a,key:n,iv:i.iv,algorithm:t,mode:i.mode,padding:i.padding,blockSize:t.blockSize,formatter:r.format})},decrypt:function e(t,a,n,r){return r=this.cfg.extend(r),a=this._parse(a,r.format),t.createDecryptor(n,r).finalize(a.ciphertext)},_parse:function e(t,a){return"string"==typeof t?a.parse(t,this):t}}),t=(t.kdf={}).OpenSSL={execute:function e(t,a,n,i){return i||(i=r.random(8)),t=s.create({keySize:a+n}).compute(t,i),n=r.create(t.words.slice(a),4*n),t.sigBytes=4*a,p.create({key:t,iv:n,salt:i})}},v=a.PasswordBasedCipher=m.extend({cfg:m.cfg.extend({kdf:t}),encrypt:function e(t,a,n,r){return r=this.cfg.extend(r),n=r.kdf.execute(n,t.keySize,t.ivSize),r.iv=n.iv,t=m.encrypt.call(this,t,a,n.key,r),t.mixIn(n),t},decrypt:function e(t,a,n,r){return r=this.cfg.extend(r),a=this._parse(a,r.format),n=r.kdf.execute(n,t.keySize,t.ivSize,a.salt),r.iv=n.iv,m.decrypt.call(this,t,a,n.key,r)}})}(),function(){for(var e=f.CryptoJS,t=e.lib.BlockCipher,a=e.algo,n=[],r=[],i=[],o=[],s=[],l=[],d=[],c=[],u=[],p=[],m=[],v=0;256>v;v++)m[v]=128>v?v<<1:v<<1^283;for(var g=0,_=0,v=0;256>v;v++){var y=_^_<<1^_<<2^_<<3^_<<4,y=y>>>8^255&y^99;n[g]=y,r[y]=g;var h=m[g],P=m[h],S=m[P],b=257*m[y]^16843008*y;i[g]=b<<24|b>>>8,o[g]=b<<16|b>>>16,s[g]=b<<8|b>>>24,l[g]=b,b=16843009*S^65537*P^257*h^16843008*g,d[y]=b<<24|b>>>8,c[y]=b<<16|b>>>16,u[y]=b<<8|b>>>24,p[y]=b,g?(g=h^m[m[m[S^h]]],_^=m[m[_]]):g=_=1}var T=[0,1,2,4,8,16,32,64,128,27,54],a=a.AES=t.extend({_doReset:function e(){for(var t=this._key,a=t.words,r=t.sigBytes/4,t=4*((this._nRounds=r+6)+1),i=this._keySchedule=[],o=0;o<t;o++)if(o<r)i[o]=a[o];else{var s=i[o-1];o%r?6<r&&4==o%r&&(s=n[s>>>24]<<24|n[s>>>16&255]<<16|n[s>>>8&255]<<8|n[255&s]):(s=s<<8|s>>>24,s=n[s>>>24]<<24|n[s>>>16&255]<<16|n[s>>>8&255]<<8|n[255&s],s^=T[o/r|0]<<24),i[o]=i[o-r]^s}for(a=this._invKeySchedule=[],r=0;r<t;r++)o=t-r,s=r%4?i[o]:i[o-4],a[r]=4>r||4>=o?s:d[n[s>>>24]]^c[n[s>>>16&255]]^u[n[s>>>8&255]]^p[n[255&s]]},encryptBlock:function e(t,a){this._doCryptBlock(t,a,this._keySchedule,i,o,s,l,n)},decryptBlock:function e(t,a){var n=t[a+1];t[a+1]=t[a+3],t[a+3]=n,this._doCryptBlock(t,a,this._invKeySchedule,d,c,u,p,r),n=t[a+1],t[a+1]=t[a+3],t[a+3]=n},_doCryptBlock:function e(t,a,n,r,i,o,s,l){for(var d=this._nRounds,c=t[a]^n[0],u=t[a+1]^n[1],p=t[a+2]^n[2],m=t[a+3]^n[3],f=4,v=1;v<d;v++)var g=r[c>>>24]^i[u>>>16&255]^o[p>>>8&255]^s[255&m]^n[f++],_=r[u>>>24]^i[p>>>16&255]^o[m>>>8&255]^s[255&c]^n[f++],y=r[p>>>24]^i[m>>>16&255]^o[c>>>8&255]^s[255&u]^n[f++],m=r[m>>>24]^i[c>>>16&255]^o[u>>>8&255]^s[255&p]^n[f++],c=g,u=_,p=y;g=(l[c>>>24]<<24|l[u>>>16&255]<<16|l[p>>>8&255]<<8|l[255&m])^n[f++],_=(l[u>>>24]<<24|l[p>>>16&255]<<16|l[m>>>8&255]<<8|l[255&c])^n[f++],y=(l[p>>>24]<<24|l[m>>>16&255]<<16|l[c>>>8&255]<<8|l[255&u])^n[f++],m=(l[m>>>24]<<24|l[c>>>16&255]<<16|l[u>>>8&255]<<8|l[255&p])^n[f++],t[a]=g,t[a+1]=_,t[a+2]=y,t[a+3]=m},keySize:8});e.AES=t._createHelper(a)}(),f.built=!0}if(e.gg_nol_CallBack)for(g=0,_=e.gg_nol_CallBack.length;g<_;g+=1)e.gg_nol_CallBack[g]&&e.gg_nol_CallBack[g].callBack&&e.gg_nol_CallBack[g].callBack(f);return f}),e.NOLBUNDLE.registerLib("PLSTM",function(t){if(!t.PLSTM){var a=t.GLCFG||t;t.PLSTM={},ns=e.NOLBUNDLE,paramsPassed={},stateObject={current:null,static:null,content:null,state:null},BUILDVERSION="6.0.0.5",stateEvents={playhead:["playhead","loadmetadata"],pause:["pause","6"],complete:["complete","oncomplete","56","57","staticend","end"],adstop:["adstop"]};var n={clone:function e(t){return JSON.parse(JSON.stringify(t))},essentialKeys:function e(t){if(t&&"object"===(void 0===t?"undefined":_typeof(t)))for(var e=["type","event","playheadPosition","metadata","id3Data","content","ad","static","assetid"],a=Object.keys(t),n=0;n<a.length;n++)for(var r=0;r<e.length;r++)if(a[n].toLowerCase()===e[r].toLowerCase()&&a[n]!==e[r]){var i=this;t[e[r]]=i.clone(t[a[n]]),delete t[a[n]]}},parseType:function e(t){return t&&"string"==typeof t.type?(t.type||"").toLowerCase():t.type},parseEvent:function e(t){if(t&&t.event&&"string"==typeof t.event.toString())for(var a=Object.keys(stateEvents),n=0,r=a.length;n<r;n++)if(stateEvents[a[n]].indexOf(t.event.toLowerCase())>-1)return a[n];return null},hasData:function e(t,a){if(t&&t.metadata&&a){var n=t.metadata[a];return!(!n||null===n||void 0===n||"{}"===JSON.stringify(n))}return!1},copyData:function e(t,a,r){return r&&!r.metadata&&(r.metadata={}),t&&a&&n.hasData(a,t)&&r&&(r.metadata[t]=JSON.parse(JSON.stringify(a.metadata[t]))),r},objDiff:function e(t,a){var n={},r={};if(t&&(n=Object.keys(t).sort()),a&&(r=Object.keys(a).sort()),JSON.stringify(n)!==JSON.stringify(r))return!0;for(var i=0,o=r.length;i<o;i++)if(t[r[i]]!==a[r[i]])return!0;return!1},getDataKey:function e(t,a,n){return t&&a&&t.metadata&&t.metadata[a]?t.metadata[a][n]||"":""},getData:function e(t,a){if(t&&t.metadata&&a)return t.metadata[a]},isValid:function e(t){return null!==t&&void 0!==t&&""!==t},isSame:function e(t,a){var n=Object.keys(t).sort();if(n!==Object.keys(a).sort())return!1;for(var r=0,i=n.length,o="";r<i;r++)if(t[n[r]]!==a[n[r]])return!1;return!0},mergeState:function e(t,a){var r=JSON.parse(JSON.stringify(a));return t&&(n.hasData(r,"content")||n.copyData("content",t,r),n.hasData(r,"ad")||n.copyData("ad",t,r),n.hasData(r,"static")||n.copyData("static",t,r)),r},evalMiddlewares:function e(t,a,n){var r=Object.keys(t),i=a.state;return r.forEach(function(e){i=t[e](i,a.prevStateEvent,a.curStateEvent,a.config,n)}),a.state=i,a}},r=function e(t,a){var r=n.clone(a);delete r.prevState;var i={isState:function e(t){if(this.state&&t){if("string"==typeof t)return this.state.toLowerCase()===t.toLowerCase();if("object"===(void 0===t?"undefined":_typeof(t)))return t.indexOf(this.state)>-1}return!1}};return{transitionType:t,event:"",state:r.state||"idle",prevState:r,hasPrevStatic:r.hasNewStatic||!1,hasNewStatic:!1,isNewStatic:!1,hasPrevContent:r.hasNewContent||!1,hasNewContent:!1,isNewContentAsset:!1,contentMetaChangedButThereIsNoAssetId:!1,isContentAfterComplete:!1,hasPrevAd:r.hasNewAd||!1,hasNewAd:!1,isNewAdAsset:!1,hasId3:!1,scroll:!1,isVA:!1,lastPh:r.lastPh,isState:i.isState}},i={start:function e(t,i,s,l){try{var d=new r(n.parseType(s),t),c=Object.keys(o),u=t,p=i,m=s;d.isVA=l&&l.nol_GLOBALS&&"601"===l.nol_GLOBALS.nol_nsdkv,d.transitionType=n.parseType(s),d.event=n.parseEvent(s);var f=c.map(function(e){d[e]=o[e]&&o[e](d,p,m,l)||!1}).filter(function(e){return!(""===e||null===e||void 0===e)});return d}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition start error - "+e.message})}return t},preTransitionEvents:function e(t,r,i,o,s){try{var l=t.lastPh;(t.isStaticChange||t.isStaticComplete)&&s("staticend",n.getData(r||{},"static")||0),(t.isAdChange||t.isAdComplete)&&(t&&"complete"===t.event?s("57",l):s("stop",l)),t.isContentChange||t.isContentComplete?s("end",l):("pause"===t.event||t.contentToAdTransition||t.adToContentTransition)&&s("pause",l)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pre-transition error - "+e.message})}return t},transition:function e(t,n,r,i){try{"static"!==t.transitionType&&("pause"===t.event?t.state="ad"===t.transitionType?"adpaused":"contentpaused":"ad"===t.transitionType&&["adstop","complete"].indexOf(t.event)>-1?t.state="adcomplete":"content"===t.transitionType&&"complete"===t.event?t.state="contentcomplete":"playhead"===t.event&&(t.state="ad"===t.transitionType?"ad":"content"))}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition error - "+e.message})}return t},postTransitionEvents:function e(t,r,i,o,s){try{var l=n.getData(i,"content")||n.getData(r,"content"),d=n.getData(i,"static")||n.getData(r,"static"),c=t.lastPh;t.isNewStaticAsset&&s("staticstart",n.getData(i,"static")),t.scroll&&(t.hasPrevStatic||t.hasNewStatic)&&s("onpaginate",d),t.inAdContentMetaUpdate&&"playhead"===t.event&&i.playheadPosition&&s("setplayheadposition",i.playheadPosition),(t.isNewContentAsset||t.inAdContentMetaUpdate||t.adToContentTransition||t.isContentAfterComplete||t.contentMetaChangedButThereIsNoAssetId)&&s("loadmetadata",l),t.contentMetaChanged&&!t.isNewContentAsset&&s("updatemetadata",l),"ad"===t.transitionType&&(t.isNewAdAsset||t.contentToAdTransition)?s("loadmetadata",n.getData(i,"ad")):!t.isNewContentAsset&&t.inAdContentMetaUpdate&&s("changecontext","ad"),t.hasId3&&s("sendid3",i.id3Data),null!==i.volume&&void 0!==i.volume&&s("volume",i.volume),t.isOtt&&s("updateott",i.ottData),t.isBuffering&&s("buffering",c),i.buttonEvent&&s("buttonevent",i.buttonEvent),"playhead"===t.event&&i.playheadPosition&&!t.inAdContentMetaUpdate&&("content"===t.transitionType&&(t.hasNewContent||t.hasPrevContent)||"ad"===t.transitionType&&(t.hasNewAd||t.hasPrevAd))&&s("setplayheadposition",i.playheadPosition)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent post-transition error - "+e.message})}return t},end:function e(t,r,i,o){try{i.metadata||(i.metadata={}),t.isNewAdAsset||!t.isAdComplete&&!t.isContentChange?!t.hasNewAd&&t.hasPrevAd&&n.copyData("ad",r,i):i.metadata.ad={},!t.isNewContentAsset&&t.isContentComplete?i.metadata.content={}:!t.hasNewContent&&t.hasPrevContent&&n.copyData("content",r,i),t.isStaticComplete?i.metadata.static={}:!t.hasNewStatic&&t.hasPrevStatic&&n.copyData("static",r,i)}catch(e){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent transition end error - "+e.message})}return t}},o={hasPrevStatic:function e(t,a,r,i){return n.hasData(a,"static")},hasPrevContent:function e(t,a,r,i){return n.hasData(a,"content")},hasPrevAd:function e(t,a,r,i){return n.hasData(a,"ad")},hasNewStatic:function e(t,a,r,i){return n.hasData(r,"static")},hasNewContent:function e(t,a,r,i){return n.hasData(r,"content")},hasNewAd:function e(t,a,r,i){return n.hasData(r,"ad")},isNewStaticAsset:function e(t,r,i,o){if(!1===t.hasNewStatic)return!1;var s=a.configController.cmsMap("nol_assetid",o),l=n.getDataKey(r,"static",s),d=n.getDataKey(i,"static",s);return void 0!==d&&null!==d&&""!==d&&(!t.hasPrevStatic||d!==l)},isNewContentAsset:function e(t,r,i,o){if(!1===t.hasNewContent)return!1;var s=a.configController.cmsMap("nol_assetid",o),l=n.getDataKey(r,"content",s),d=n.getDataKey(i,"content",s);return void 0!==d&&null!==d&&""!==d&&(!t.hasPrevContent||d!==l)},isContentAfterComplete:function e(t,a,n,r){try{return a&&"complete"===a.event&&n&&"playhead"===n.event&&"content"===n.type}catch(e){return!1}},isNewAdAsset:function e(t,r,i,o){if(!1===t.hasNewAd)return!1;var s=a.configController.cmsMap("nol_assetid",o),l=n.getDataKey(r,"ad",s),d=n.getDataKey(i,"ad",s),c=a.configController.cmsMap("nol_adIdx",o)||"adIdx",u=n.getDataKey(r,"ad",c),p=n.getDataKey(i,"ad",c);return void 0!==d&&null!==d&&""!==d&&(!t.hasPrevAd||d!==l)||t.hasPrevAd&&p!==u||n.getDataKey(r,"ad","type")!==n.getDataKey(i,"ad","type")},contentMetaChanged:function e(t,a,r,i){return!1!==t.hasNewContent&&!1!==t.hasPrevContent&&n.objDiff(n.getData(a,"content"),n.getData(r,"content"))},hasNewContentEx:function e(t,a,r,i){return!1!==t.hasNewContent&&n.objDiff(n.getData(a,"content"),n.getData(r,"content"))},contentMetaChangedButThereIsNoAssetId:function e(t,r,i,o){var s=a.configController.cmsMap("nol_assetid",o),l=n.getDataKey(i,"content",s),d=void 0===l||null===l||""===l;return t.hasNewContentEx&&d},adMetaChanged:function e(t,a,r,i){return!1!==t.hasNewAd&&!1!==t.hasPrevAd&&n.objDiff(n.getData(a,"ad"),n.getData(r,"ad"))},hasId3:function e(t,a,n,r){return null!==n.id3Data&&void 0!==n.id3Data&&""!==n},scroll:function e(t,a,n,r){return"static"===t.transitionType&&n.scroll&&["true","1","y","yes"].indexOf(n.scroll.toString().toLowerCase())>-1},isStaticChange:function e(t){return t.isNewStaticAsset&&t.hasPrevStatic},isStaticComplete:function e(t){return"static"===t.transitionType&&"complete"===t.event},isContentChange:function e(t){return t.isNewContentAsset&&t.hasPrevContent&&!t.isState("contentcomplete")&&"playhead"===t.event},adToContentTransition:function e(t){return t.isState(["ad","adpaused","adcomplete"])&&"content"===t.transitionType&&"playhead"===t.event&&(t.hasPrevContent||t.hasNewContent)},contentToAdTransition:function e(t,a,n){return t.isState(["content","contentpaused"])&&"ad"===t.transitionType&&"playhead"===t.event&&t.hasNewAd},isContentComplete:function e(t,a,n){return"content"===t.transitionType&&t.isState(["content","contentpaused"])&&"complete"===t.event},isAdChange:function e(t){return t.isNewAdAsset&&t.hasPrevAd&&t.isState(["ad","adpaused"])&&!t.isState("adcomplete")&&"playhead"===t.event},isAdComplete:function e(t){return t.isState(["ad","adpaused"])&&("complete"===t.event||t.isAdChange)||"adstop"===t.event&&t.hasPrevAd},inAdContentMetaUpdate:function e(t){return(t.contentMetaChanged||t.isNewContentAsset)&&"ad"===t.transitionType},isOtt:function e(t,a,n){return null!==n.ottData&&void 0!==n.ottData&&""!==n.ottData},isBuffering:function e(t,a,n){return null!==n.buffering&&void 0!==n.buffering&&""!==n.buffering&&["1","true","t","y","yes"].indexOf(n.buffering.toString().toLowerCase())},lastPh:function e(t,a,r){return n.isValid(a.playheadPosition)?a.playheadPosition:t.lastPh||0}};return t.PLSTM.stateMachine=function(e,t){var r={config:t,curStateEvent:{metadata:{}},prevStateEvent:{medata:{}},state:{}};return{transition:function t(o,s){try{if(o&&"object"===(void 0===o?"undefined":_typeof(o))&&(o=n.clone(o),n.essentialKeys(o)),a._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent called pli="+e+" transitioning type "+o.type+" for event "+o.event+" state object: "+JSON.stringify(o)}),o&&"object"===(void 0===o?"undefined":_typeof(o))){var l=this;o.type&&"string"==typeof o.type&&(o.type=o.type.toLowerCase()),o.event&&"string"==typeof o.event&&(o.event=o.event.toLowerCase());var d=n.parseType(o),c=n.parseEvent(o);if(o.metadata&&n.essentialKeys(o.metadata),!d)return"playhead"===c&&void 0===n.getData(o,"content")&&void 0===n.getData(o,"ad")?void l.checkID3(o,s):(a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "type" parameter in trackEvent metadata object'},id:e,timeStamp:Date.now()}),void l.checkID3(o,s))
;if(-1===["","content","ad","static"].indexOf(d))return a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Invalid "type" parameter "'+JSON.stringify(d)+'" in trackEvent metadata object'},id:e,timeStamp:Date.now()}),void l.checkID3(o,s);if(!c)return a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Missing "event" parameter in trackEvent metadata object'},id:e,timeStamp:Date.now()}),void l.checkID3(o,s);if(!l.checkMetadata(o,s))return;r.prevStateEvent=r.curStateEvent?n.clone(r.curStateEvent):{metadata:{content:null,ad:null,static:null}},r.curStateEvent=n.clone(o),r=n.evalMiddlewares(i,r,function(t,n){a._listeners.fireEvent("debug",{type:"debug",msg:"TrackEvent pli="+e+' firing event "'+t+'"'}),s&&"function"==typeof s&&s(t,n)})}}catch(t){a._listeners.fireEvent("warn",{type:"warn",msg:"TrackEvent pli="+e+" error - "+t.message})}},getState:function e(){return r.state},checkID3:function e(t,a){return!!t.id3Data&&(a&&"function"==typeof a&&a("55",t.id3Data),!0)},checkMetadata:function t(i,o){var s=this;""===i.id3Data&&delete i.id3Data;var l=n.getData(i,"content"),d=n.getData(i,"ad"),c=n.getData(i,"static");if(l&&"object"===(void 0===l?"undefined":_typeof(l))){if(n.essentialKeys(l),l.type&&"string"==typeof l.type&&-1!==["preroll","midroll","postroll","ad"].indexOf(l.type.toLowerCase())&&"content"===i.type)return a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Valid ad type "'+l.type+'" parameter in content trackEvent metadata object'},id:e,timeStamp:Date.now()}),s.checkID3(i,o),!1;l.type="content",l.assetid||a._listeners.fireEvent("warn",{type:17,msg:"Warning in trackEvent() - no assetId in content metadata, will not be credited",id:e,timeStamp:Date.now()})}if(d&&"object"===(void 0===d?"undefined":_typeof(d))){if(n.essentialKeys(d),"content"===d.type&&"ad"===i.type)return a._listeners.fireEvent("sendError",{data:{type:17,msg:'Error in trackEvent() - Valid content type "'+d.type+'" parameter in ad trackEvent metadata object'},id:e,timeStamp:Date.now()}),s.checkID3(i,o),!1;d.type&&"string"==typeof d.type&&-1!==["preroll","midroll","postroll","ad"].indexOf(d.type.toLowerCase())||(d.type="ad"),d.assetid||a._listeners.fireEvent("warn",{type:17,msg:"Warning in trackEvent() - no assetId in ad metadata, will not be credited",id:e,timeStamp:Date.now()})}return c&&"object"===(void 0===c?"undefined":_typeof(c))&&(n.essentialKeys(c),c.type="static",c.assetid||a._listeners.fireEvent("warn",{type:17,msg:"Warning in trackEvent() - no assetId in static metadata, will not be credited",id:e,timeStamp:Date.now()})),!(r&&r.curStateEvent&&r.curStateEvent.metadata&&!n.getData(i,i.type)&&!r.curStateEvent.metadata[i.type])||(a._listeners.fireEvent("sendError",{data:{type:17,msg:"Error in trackEvent() - Have not recieved "+i.type+" metadata and an event was called for "+i.type},id:e,timeStamp:Date.now()}),s.checkID3(i,o),!1)}}},t.PLSTM}}),e.NOLBUNDLE.registerLib("PLVBL",function(t){if(!t.PLVBL){var a="6.0.1",n={viewRatioKey:"nol_viewability",vizuURLKey:"nol_vizuURL",viewabilityKey:"nol_vsData",screenSizeKey:"nol_scrnSize",videoSizeKey:"nol_vidSize",windowSizeKey:"nol_winSize",nodeKey:"nol_nodeId",auThresholdKey:"nol_auThreshold",volumeKey:"nol_volume",audibilityKey:"nol_auData",id3GapKey:"nol_id3IntrvlGp",tickOffsetKey:"nol_viTickOffset"},r={screenSize:function t(){return[e.screen.width,e.screen.height]},nodeSize:function e(t,a){return t?"width"===a?t.clientWidth:"height"===a?t.clientHeight:[t.clientWidth,t.clientHeight]:""},browserSize:function t(){return[e.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,e.innerHeight||document.documentElement.clientHeight||document.body.clientHeight]}},i=t.GLCFG||t;return t.PLVBL=function(e,a,o){var s={initialized:!1,_defaults:{nol_viewability:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_auThreshold:"[0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]",nol_volume:t.configController.getGlobal(n.volumeKey,a.getClientConfig())||"100",nol_viTickOffset:2},viReadyQueue:[],clientConfig:a.getClientConfig(),globals:a.getConfigParams().ggParams,cmsMap:null,nodeId:"",node:null,viewAPI:null,viewRatios:null,vizuURL:"",viewParams:null,volume:null,auThresholds:[],intervalGap:2,state:"idle",queueTicks:o||!1,ticker:null,tickerInterval:1e3,screenSeries:"",viewSeries:[],elementSeries:"",viewportSeries:"",audibilitySeries:[]},l={log:function t(a,n){i._listeners.fireEvent(a,{type:a,msg:e.get("nol_comment")+" - "+n})},incrementSeries:function e(t,a){var n=null;t?n=t[t.length-1]:t=[],n&&2===n.length&&n[0]===a?n[1]++:t.push([a,1])},clearSeries:function e(t){s.viewSeries=[],s.screenSeries="",s.elementSeries=[],s.viewportSeries=[],s.audibilitySeries=[],t?l.registerVIDataReady(function(){s.viewAPI&&s.viewAPI.resetMeasurement()},"clear"):s.viewAPI&&s.viewAPI.resetMeasurement()},setDataSeries:function e(t,a){t&&"function"==typeof t.set&&(t.set(n.viewabilityKey,a?"[]":JSON.stringify(s.viewSeries)),t.set(n.windowSizeKey,a?"[]":JSON.stringify(s.viewportSeries)),t.set(n.videoSizeKey,a?"[]":JSON.stringify(s.elementSeries)),t.set(n.screenSizeKey,a?"":s.screenSeries),t.set(n.audibilityKey,a?"[]":JSON.stringify(s.audibilitySeries)))},getDataSeries:function e(){var t={};return t[n.viewabilityKey]=s.viewSeries,t[n.windowSizeKey]=s.viewportSeries,t[n.videoSizeKey]=s.elementSeries,t[n.screenSizeKey]=s.screenSeries,t[n.audibilityKey]=s.audibilitySeries,t},getNodeId:function e(){var t=i.configController.cmsMap(n.nodeKey,s.clientConfig);return s.globals?s.globals[t]:""},getVolumeParam:function e(){var t=i.configController.cmsMap(n.volumeKey,s.clientConfig)||n.volumeKey;return s.globals?s.globals[t]:""},evalUpperThreshold:function e(t,a){if(null!==t&&void 0!==t&&""!==t&&t>=0&&a&&a.length>0)for(var n=0,r=a.length;n<r;n++){if(t<a[n]&&0==n)return 0;if(n==r-1&&t>=a[n])return parseFloat(a[n]);if(t<a[n])return parseFloat(a[n-1])}return 0},evalVolume:function e(t){if(void 0!==t&&null!==t&&t.toString().match(/^\d*\.?\d*$/gi)&&"NaN"!==parseFloat(t).toString()&&"NaN"!==parseInt(t).toString()){var a=t;return!a.toString().match(/\d*\.\d+/i)&&(parseFloat(a)>1||"1"===a.toString())&&(a=parseFloat(a)/100),a=Math.round(100*l.evalUpperThreshold(parseFloat(a),s.auThresholds))}return null},getThreshold:function e(a,n){if(a&&n){try{var r=t.configController.getGlobal(a,n.clientConfig),i="string"==typeof r?JSON.parse(r):r,o=!0;if(i&&"object"===(void 0===i?"undefined":_typeof(i))&&i.length>0){for(var s=null,d=0,c=i.length;d<c;d++)if(!i[d].toString().match(/^\d*\.?\d*$/gi)){o=!1;break}if(o)return i}}catch(e){l.log("warn","Viewabilty config theshold for "+a+" is invalid. Default threshold will be used")}var u=n._defaults?n._defaults[a]:[];return"string"==typeof u?JSON.parse(u):u}return[]},registerVIDataReady:function e(t,a){t&&"function"==typeof t&&(s.viReadyQueue||(s.viReadyQueue=[]),s.viReadyQueue.push({name:a,cb:t}))},flushVIDataReadyQueue:function e(){if(s.viReadyQueue&&s.viReadyQueue.length>0)for(var t=null,a=0;a<s.viReadyQueue.length;a++)if("function"==typeof(t=s.viReadyQueue[a].cb))try{t(),s.viReadyQueue.splice(0,1)}catch(e){}}},d={init:function a(o){try{if(o){l.log("debug","Initializing viewability module"),s.nodeId=o,s.node=document.getElementById(o),s.viewRatios=l.getThreshold(n.viewRatioKey,s),s.vizuURL=i.PLDPR.resolveExpression(i.configController.getGlobal(n.vizuURLKey,s.clientConfig),e),s.auThresholds=l.getThreshold(n.auThresholdKey,s);var d=t.configController.getGlobal(n.volumeKey,s.clientConfig);s._defaults[n.volumeKey]=d&&"NaN"!==parseInt(d).toString()?d:s._defaults[n.volumeKey],s.volume=l.evalVolume(l.getVolumeParam()||parseInt(s._defaults[n.volumeKey])),s.intervalGap=e.isProductOf("mtvr")?t.configController.getGlobal(n.id3GapKey,s.clientConfig):t.configController.getGlobal(n.tickOffsetKey,s.clientConfig)||s._defaults[n.tickOffsetKey],s.viewParams={externalTick:1,instantOn:0,node:s.node,width:r.nodeSize(s.node,"width"),height:r.nodeSize(s.node,"height"),ratio:s.viewRatios,tickOffset:parseInt(s.intervalGap),ffThreshold:parseInt(s.intervalGap)},s.vizuURL&&s.node?(i.scriptController.inject(s.vizuURL,s.nodeId,function(){if("function"==typeof getVIAPI){if(s.viewAPI=getVIAPI(),!s.viewAPI)return void l.log("warn","Viewability API not instantiated by viewability library. Unable to initialize viewability module.");s.viewAPI.initVI(s.viewParams),s.initialized=!0,s.viewAPI.subscribe(l.flushVIDataReadyQueue,"VIExternalDataReady",this),l.log("debug","Viewability module successfully initialized")}}),l.log("info","Viewabilty module injected")):l.log("warn","Viewabilty library URL not defined in config. Unable to initialize viewability module.")}}catch(e){l.log("warn","Failed to initialize viewability module."),s.initialized=!1}},start:function e(t){"running"!==s.state&&s.initialized&&(s.viewAPI.startVI(),s.state="running")},stop:function e(){"stopped"!==s.state&&s.initialized&&(s.viewAPI.stopVI(),s.state="stopped")},tick:function e(t,a,n){s.initialized&&null!==t&&void 0!==t&&""!==t&&"NaN"!==Math.floor(t).toString()&&("running"!==s.state&&d.start(),s.viewAPI&&s.viewAPI.updateTick(Math.floor(t),s.volume),s.screenSeries=r.screenSize().join("x")),l.registerVIDataReady(n,"tick_"+t)},setData:function e(t){s.initialized&&(s.viewSeries=s.viewAPI&&s.viewAPI.getVideoSeries?s.viewAPI.getVideoSeries():[],s.audibilitySeries=s.viewAPI&&s.viewAPI.getAudioSeries?s.viewAPI.getAudioSeries():[],s.viewportSeries=s.viewAPI&&s.viewAPI.getViewportSeries?s.viewAPI.getViewportSeries():[],s.elementSeries=s.viewAPI&&s.viewAPI.getElementSizeSeries?s.viewAPI.getElementSizeSeries():[],s.screenSeries=r.screenSize().join("x"),l.setDataSeries(t))},setVolume:function e(t){if(s.initialized&&t){var a=l.evalVolume(t);void 0!==a&&null!==a&&""!==a&&"NaN"!==parseInt(t).toString()?(s.volume=a,l.log("debug","Audibiliy volume set to "+a)):l.log("debug",'Volume "'+t+'" is invalid. Volume set will be ignored.')}},clear:function e(t,a){s.initialized&&l.clearSeries(a),t&&(l.log("debug","Viewability resetting"),l.setDataSeries(t,!0),setTimeout(function(){l.setDataSeries(t,!0)}))}};return e.get("nol_url").indexOf(n.viewabilityKey)>-1&&(l.log("debug","Viewability module loaded"),d.init(l.getNodeId())),{initialized:function e(){return s.initialized},start:d.start,stop:d.stop,tick:d.tick,setData:d.setData,getData:l.getDataSeries,setVolume:d.setVolume,clear:d.clear}},t.PLVBL}}),e.NOLBUNDLE.registerLib("PLSIVT",function(e){if(!e.PLSIVT){var t={sivtURLKey:"nol_sivtURL"},a=e.GLCFG||e;return e.PLSIVT=function(e,n){var r={initialized:!1,sivtURL:"",clientConfig:e.getClientConfig(),globals:e.getConfigParams().ggParams,uaid:e.sessionId,apid:e.apid,dataObj:n};return{init:function e(){if(r.sivtURL=a.configController.getGlobal(t.sivtURLKey,r.clientConfig),r.sivtURL){var n=a.PLDPR.resolveExpression(r.sivtURL,r.dataObj);a.scriptController.inject(n,document.body)}else a._listeners.fireEvent("debug",{type:"debug",msg:"SIVT library URL not defined in config. Unable to initialize SIVT module."});r.initialized=!0}}.init(),{initialized:function e(){return r.initialized}}},e.PLSIVT}}),e.NOLBUNDLE.registerLib("PLDPR",function(t){"use strict";function a(e,t){var a=[],n=e.split("&"),r,i;for(r=0,i=n.length;r<i;r++)0!==n[r].indexOf(t)&&a.push(n[r]);return a.join("&")}function n(e,t){try{var a=e.split("&"),n,r;for(n=0,r=a.length;n<r;n++)if(0===a[n].indexOf(t))return!0;return!1}catch(e){return!1}}function r(t){var n;void 0!==t&&0!==t.length&&(n=e.document.createElement("script"),n.type="text/javascript",n.src=a(t,"rnd=")+"&rnd="+Math.round(1e6*Math.random()),n.onerror=function(t){var a=t.target.src;e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target),he<Pe&&(he++,e.setTimeout(function(){r(a)},5e3))},n.onload=function(t){he=0,e.document.head?e.document.head.removeChild(t.target):e.document.getElementsByTagName("head")[0].removeChild(t.target)},e.document.head?e.document.head.appendChild(n):e.document.getElementsByTagName("head")[0].appendChild(n))}function i(e,t){var a;if("num"==t)a=parseInt(e,10),e=isNaN(a)?0:a;else if("bin"==t)e=isNaN(Number(e))?"0":Number(e).toString(2);else if("bool"==t)switch(e.toString().toLowerCase()){case"false":case"no":case"0":case"":e=!1;break;default:e=!0}else"b2n"==t&&(a=parseInt(e,2),e=isNaN(a)?0:a);return e}function o(e,t,a,n){var r="";return a&&a.clientField!==t&&!0!==n.end&&(r=xe.cms.parse(a,e,n))?r:Y({data:e,param:t,vidType:n?n.vidType:""})}function s(e,t){var a="",n,r,i,o;if(!e||!t)return e;for(o=t.length,r=0,i=e.length;r<i;r++)n=e.charCodeAt(r)^t.charCodeAt(r%o),a+=0===n?e.charAt(r):String.fromCharCode(n);return a}function l(e){var t;try{if(null===e||"object"!==(void 0===e?"undefined":_typeof(e))||"isActiveClone"in e)return e;t=e instanceof Date?new e.constructor:e.constructor();for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(e.isActiveClone=null,t[a]=l(e[a]),delete e.isActiveClone);return t}catch(e){return!1}}function d(e,a,n,r,i){var o,l;-1===n.indexOf("[")&&-1===n.indexOf("]")&&(!r.val||r.val.length<=0)?i||(p(e,{type:"100",msg:n+" missing -- "+Y({data:e,param:"nol_comment"})}),r.state=!1,r.val=""):"{"===a||"}"===a?r.val=t.CryptoJS.MD5(r.val.toString()).toString():"<"===a||">"===a?(o=n.match(me["<"].end),o?(l=o[0].match(/[\d]+/g),r.val=String(r.val).substr(l[0],l[1])):r.val=s(String(r.val),Y({data:e,param:"nol_xorSeed"}))):"("!==a&&")"!==a||(r.val=q(r.val))}function c(e,t,a){var n=t.match(/[\[\{<\(]/g),r,i,s,l,c,u,m,f,v,g,_,y,h=Y({data:e,param:"nol_xorSeed"})||"",P,S;n=n?n.reverse():[],i=t.match(/[\}\]\>\)]/g)||[],l={start:n.length?t.lastIndexOf(String(n[0])):-1,end:i.length?t.indexOf(String(i[0])):t.length},i&&">"===i[0]&&(l.end=t.search(me["<"].end)||t.indexOf(">")),u=t.substring(l.start+1,l.end),v=u.split("||");var b=ge.exec(u),T=b&&b.length>1?b[1]:u,O=null,L="",C=De[e.get("nol_playerId")]||{};for(g=0,_=v.length;g<_&&(u=v[g],O=ge.exec(v[g]),L=O&&O.length>2&&O[2]?O[2].replace("_",""):"",!((y=o(e,u,C[T],{vidType:(a?a.vidType:null)||L,silent:!0,noClone:!0,end:!!a&&a.end,noEncode:!0}))&&y.length>0));g++);if(y&&y.length>0&&(S="string"==typeof u?u.split("_"):u,P=S[0]?S.splice(0,2).join("_"):S,(c=C[P]?C[P].encoding:"")&&(n=n.reverse().concat(c.match(/[\[\{<\(]/g)).reverse(),i=i.reverse().concat(c.match(/[\}\]>\)]/g)).reverse())),r={val:y,state:Y({data:e,param:"nolPriv_sendData"})},m=n?n.length:0,f=i?i.length:0,(s=Math.min(m,f))>0)for(g=0,_=s;g<_;g++)d(e,n[0]||i[0],t,r,h),n.shift(),i.shift();else!0!==(!!a&&a.silent)&&(!r.val||r.val&&r.val.length<=0)&&(r.state=!1,r.val="",p(e,{type:100,msg:u+" missing "+Y({data:e,param:"nol_comment"})}));return{val:r.val,strManipulate:n,strManiEnd:i}}function u(e,t,a,n){var r,i,o,s,l,u={val:"",state:Y({data:e,param:"nolPriv_sendData"})},p=[],m,f=[],v=[],g,_="",y,h,P,S,b,T,O=Y({data:e,param:"nol_xorSeed"});if(n=n||{},t=t||Y({data:e,param:"nol_url"})||"",null!==(l=t.match(fe.regex)))for(h=0,P=l.length;h<P;h++)if(r=l[h]){if(i=r.substr(fe.length,r.length-2*fe.length),o=i.split("+"),p=[],_="",s=0,o&&o.length>1){for(S=0,b=o.length;S<b;S++)if(_=o[S],n.silent=!0,m=c(e,_,n),m.strManipulate.length>0&&(s=p.length,f=[].concat(m.strManipulate,f)),p[s]=p[s]?p[s]+m.val:m.val,m.strManiEnd.length>0&&m.strManiEnd.length!==f.length){for(v=[].concat(v,m.strManiEnd),u={val:p[s],state:Y({data:e,param:"nolPriv_sendData"})},g=0,T=m.strManiEnd.length;g<T;g++)d(e,f[0],_,u,O),f.shift(),v.shift();p[s]=u.val}for(u.val=p.join(""),y=f.length>=v.length?f:v,g=0,T=y.length;g<T;g++)d(e,y[0],_,u,O),f.shift(),v.shift()}else m=c(e,i,n),u={val:m.val,state:Y({data:e,param:"nolPriv_sendData"})};t=t.replace(r,u.val)}return t}function p(e,a,n,r){var i,o,s=Y({data:e,param:"nolPriv_errorSent"});if(!0!==r&&Y({data:e,param:"nolPriv_sendData",val:!1}),!n&&-1!==(!a||s.indexOf(a.type.toString())))return!1;i=a.type+","+q(a.msg),Y({data:e,param:"nol_errorMessage",val:i}),t._listeners.fireEvent("error",{type:"error",msg:i});var l=e.get("nol_errorURL");return l&&(a.msg&&(a.msg=encodeURIComponent(a.msg)),17===a.type&&(l=l.replace("|!(nol_errorMessage)!|",a.msg)),o=u(e,l),H({serverTimeOffset:Y({data:e,param:"nolPriv_serverTimeOffset"}),url:o,uoo:Y({data:e,param:"nol_useroptout"}),maskRef:Y({data:e,param:"nol_rfrmsk"}),method:xe.getRequestMethod(e)})),s+=a.type.toString()+",",Y({data:e,param:"nolPriv_errorSent",val:s}),!0}function m(e,t,a,n){var r=!1;if(!n){var o=xe.findPlayer(e),s=""===e.get("nol_fdcid")||xe.mtvr.isNullFDCid(e)?e.get("nol_pccid"):e.get("nol_fdcid");if(e.isProductOf("mtvr")&&["true","1"].indexOf(e.get("nol_rtvodEnabled").toString().toLowerCase())>-1&&"interval"===e.get("nol_cadence")&&""===e.get("nol_rtvod")&&"true"!==e.get("nol_disabled")&&e.get("nol_tsvURL")){if(B(e,null,!0)){var d=l(e);d&&(!function(e,t,a,n){function r(){m(n,t,a,!0)}function i(){}L(n,{service:"tsv",key:s,url:n.get("nol_tsvURL")},r),L(e,{service:"tsv",key:s,url:e.get("nol_tsvURL")},i)}(e,t,a,d),r=!0)}}}var c=Y({data:e,param:"nol_url"})||"",p,f,v,g,_=0,y,h=Y({data:e,param:"nol_playerId"}),P=i(Y({data:e,param:"nol_maxPingCount"}),"num"),S=i(Y({data:e,param:"nol_pingCount"}),"num"),b=!!t&&t.returnLength,T=Y({data:e,param:"nol_cadence"}),O=xe.getEventsFilter(e),C=i(Y({data:e,param:"nol_maxLength"}),"num");if(Y({data:e,param:"nol_pingCreationTime",val:V(Y({data:e,param:"nolPriv_serverTimeOffset"}))}),f=Y({data:e,param:"nol_timeSpentViewing"}).content,v=Y({data:e,param:"nol_timeSpentViewing"}).ad,g=Y({data:e,param:"nol_timeSpentViewing"}).static,G(Y({data:e,param:"nol_segmentTimeSpent"})),(!e.isProductOf(["dcrvideo","vrivideo"])||"1"===Y({data:e,param:"nol_forceFireOnClose_content"})||!(e.isProductOf(["dcrvideo","vrivideo"])&&0===f.nol_segmentTimeSpent||"dcrstatic"===Y({data:e,param:"nol_product"})&&0===g.nol_segmentTimeSpent)||"interval"!==T&&"streamduration"!==T||0!==v.nol_count||0!==v.nol_segmentTimeSpent)&&"false"===Y({data:e,param:"nol_disabled"})&&(0===P||P>S)){if(je.setNextTick(e,null,"content"),p=B(e,t)||"stream"===T||"impression"===T||"id3"===Y({data:e,param:"nol_product"}),Y({data:e,param:"nol_random",val:Math.round(1e9*Math.random())}),c=u(e,c),(_=c.length)<10)return null;if(Y({data:e,param:"nolPriv_sendData"})&&p&&!b||C>0&&C<_){if(Y({data:e,param:"nol_id3Data"})&&Y({data:e,param:"nol_id3Data",val:!1}),J(Y({data:e,param:"nol_comment"})," -queued @"+Math.floor(Be()/1e3)+", timeOffset == "+Y({data:e,param:"nolPriv_serverTimeOffset"})+", DU == "+Y({data:e,param:"nol_segmentTimeSpent"})+" -- ",c),O.onSendPing&&(D(e,O.onSendPing),"true"===Y({data:e,param:"nol_disabled"})))return;r||H({serverTimeOffset:Y({data:e,param:"nolPriv_serverTimeOffset"}),url:c,prod:Y({data:e,param:"nol_product"}),uoo:Y({data:e,param:"nol_useroptout"}),maskRef:Y({data:e,param:"nol_rfrmsk"}),method:xe.getRequestMethod(e)}),a&&a(e),Y({data:e,param:"nol_viewCount_"+e._currVidType.toLowerCase(),val:"0"}),je.clear(e),_e&&_e.hasOwnProperty(h)&&_e[h].hasOwnProperty("debug")&&"logging"===_e[h].debug&&(y=Y({data:e,param:"nol_debugUrl"}),y||(y=Y({data:e,param:"nol_prefProtocol"})+"://nielsen.guru/validation/query_string.php?"),y=y+"pli="+h+"&sendPing="+Y({data:e,param:"nol_product"})+"&"+c.substring(c.indexOf("?")+1),Q(y)),S++,f.nol_segmentTimeSpent=0,f.nol_count=0,v.nol_segmentTimeSpent=0,v.nol_count=0,g.nol_segmentTimeSpent=0,g.nol_count=0,Y({data:e,param:"nol_pingStartTimeUTC",val:Math.round(Be()/1e3)}),Y({data:e,param:"nolPriv_priority",val:0}),Y({data:e,param:"nol_pingCount",val:S.toString()}),Y({data:e,param:"nol_forceFireOnClose_content",val:"0"});var w=R(Y({data:e,param:"nol_segmentLength"}));Y({data:e,param:"nol_duration",val:new Array(w.length+1).join("0")})}else if(b)return{len:_,fData:c};return null}}function f(){try{Ke.length&&(Ke.forEach(function(e){e&&e()}),Ke=[])}catch(e){}}function v(e,a,n,r){n&&!n.serviceSending[a]?(n.serviceSending[a]=!0,Ue.request(e.replace("fmt=jsonp","fmt=json"),{method:"GET"}).then(function(e){if(200===parseInt(e.status)){var a={};try{a=JSON.parse(e.response)}catch(e){}a.nol_playerId=n.id,t._listeners.fireEvent("tsvupdate",a)}else t._listeners.fireEvent("tsvupdate",{nol_playerId:n.id,nol_rtvodEnabled:!1});r&&r&&r(),f()})):r&&Ke.push(r)}function g(e,t,a){var n=Y({data:e,param:"iag_"+t});return void 0!==n&&""!==n?a="&pr=iag."+t+","+q(n):a&&a.length>0&&-1===a.indexOf("&pr=iag")?a="&pr=iag."+t+","+q(a):void 0!==a&&null!==a||(a=""),a}function _(e,t){var a,n,r,o,s,l,d,c,u,p,m,f,v,_,y,h,P=Y({data:e,param:"nol_vidtype"});Y({data:e,param:"nol_prod"}).indexOf("iag")>=0&&(a="",n=g(e,"sid",Y({data:e,param:"nol_sid",vidType:"content"})),r=g(e,"tfid",Y({data:e,param:"nol_tfid",vidType:"content"})),o=g(e,"bcr",Y({data:e,param:"nol_clientid",vidType:"content"})),l=g(e,"epi",Y({data:e,param:"nol_title"})||Y({data:e,param:"nol_title",vidType:"content"})),s=g(e,"pgm",Y({data:e,param:"nol_censuscategory"})||Y({data:e,param:"nol_category"})||Y({data:e,param:"nol_iagcategory"})),s||(s=g(e,"pgm",Y({data:e,param:"nol_censuscategory",vidType:"content"})||Y({data:e,param:"nol_category",vidType:"content"})||Y({data:e,param:"nol_iagcategory",vidType:"content"})))||(s="&pr=iag.pgm,general"),d="&pr=iag.seg,",i(Y({data:e,param:"nol_chapter",vidType:"content"}),"num")>1?d+=Y({data:e,param:"iag_seg"})||Y({data:e,param:"nol_chapter",vidType:"content"}):d+="1",c=g(e,"pd",c),u=g(e,"oad",u),v=g(e,"fp",v),h=g(e,"cust1",h),"ad"===t?(p="&pr=iag.brn,"+Y({data:e,param:"nol_clientid"}),m="&pr=iag.cte,"+q(Y({data:e,param:"nol_adURL"})),f="midroll"===P?"&pr=iag.ap,mid":"postroll"===P?"&pr=iag.ap,post":"&pr=iag.ap,pre",n=g(e,"sid",n),r=g(e,"tfid",r),o=g(e,"bcr",o),p=g(e,"brn",p),m=g(e,"cte",m),s=g(e,"pgm",s),l=g(e,"epi",l),d=g(e,"seg",d),c=g(e,"pd",c),u=g(e,"oad",u),_=g(e,"pod",_),y=g(e,"apt",y),a=n+r+o+s+l+d+c+p+f+m+u+v+_+y+h):a=n+r+o+s+l+d+c+u+v+h,a+="&pr=iag.cp,soc",Y({data:e,param:"nol_iagData",val:a}))}function y(e){var t,a=null,n="content"==e._currVidType?i(Y({data:e,param:"nol_chnlCountThrshld"}),"num")||pe:i(Y({data:e,param:"nol_staticCountThrshld"}),"num")||pe,r=e._dataArrObj[e._currVidType],o,s=0,l=e._dataArrObj.count;if(!e._dataArrObj[e._currVidType].hasOwnProperty(e._currAssetid)){if(l[e._currVidType]>=n){for(o in r)if(r.hasOwnProperty(o)){if((s=r[o].nolPriv_priority)<=0){t=o;break}(null===a||a>s)&&(a=s,t=o)}r.hasOwnProperty(t)&&(delete r[t],l[e._currVidType]--)}e._dataArrObj[e._currVidType][e._currAssetid]={nolPriv_priority:0},l[e._currVidType]++}}function h(e,t,a){var n={},r,o=0,s,l=xe.getEventsFilter(e);if(Y({data:e,param:"nol_playerId"})===t.target.nol_playerId){for(s in t.target)t.target.hasOwnProperty(s)&&(Y({data:e,param:s,val:t.target[s]}),n[s]=t.target[s]);var d=xe.findPlayer(e);if(d){var c=void 0!==d.oServiceCall[a.service]&&d.oServiceCall[a.service].hasOwnProperty("status")?d.oServiceCall[a.service].status:"undefined";d.oServiceCall[a.service]={status:"complete",prevStatus:c,station:a.key,data:n},d.serviceSending[a.service]=!1}var u=e.get("nol_serviceFilter");if(u?D(e,u[a.service]):D(e,l),"true"===Y({data:e,param:"nol_disabled"}))return;e.serviceFlag[a.service].need&&(Y({data:e,param:"nol_davState",val:"1"}),e.serviceFlag[a.service].need=!1,t.target.hasOwnProperty("nol_fdTimeCode")&&"daypart"===Y({data:e,param:"nol_cadence"})&&(o=i(t.target.nol_fdTimeCode,"num"),r=i(Y({data:e,param:"nol_queueTime"}),"num"),Y({data:e,param:"nol_queueTime",val:r+o})),K(Y({data:e,param:"nol_queueTime"}),e))}}function P(e,a){try{var n=Y({data:e,param:"nol_playerId"});_e&&_e.hasOwnProperty(n)&&(!_e[n].hasOwnProperty("nol_sessionId")||_e[n].hasOwnProperty("forceStreamRegen")&&!0===_e[n].forceStreamRegen)&&(a=a||t.generateGUID(),_e[n].nol_sessionId=a,_e[n].forceStreamRegen=!1)}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in calcStreamId - "+e.message})}}function S(e){try{var a=Y({data:e,param:"nol_playerId"});if(a&&t._players&&t._players.hasOwnProperty(a)){var n=t._players[a];if(n&&Object.keys(n.ottStatusObj).length>0){var r;for(r in n.ottStatusObj)Y({data:e,param:r,val:n.ottStatusObj[r],vidType:"content"})}}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in populateOttStatus"+e})}}function b(e,t,a,n,r){xe.extendfData(e);var i=e.get("nol_useroptout"),o="",s,l,d=Y({data:e,param:{}});if(y(e),Ie=xe.getEventsFilter(e),"ad"===e._currVidType.toLowerCase()&&(o="st,a",Y({data:e,param:"nol_currSeg",val:"0"})),""===Y({data:e,param:"nol_errorURL"})&&Y({data:e,param:"nol_errorURL",val:se+oe+de+"?message=|![nol_errorMessage]!|"}),"loadMetadata"===t)for(s in d)d.hasOwnProperty(s)&&-1==="nol_minutes, nol_tagPresence, nol_pingCount, nol_currSeg, nol_segmentTimeSpent, nol_cumeTimeSpent, nol_count".indexOf(s)&&Y({data:e,param:s,val:X({data:e,param:s})||""});for(s in a)a.hasOwnProperty(s)&&Y({data:e,param:String(s),val:String(a[s])});if(e.set("nol_useroptout",i),Y({data:e,param:"nolPriv_sendData",val:!0}),Y({data:e,param:"nol_davState",val:"0"}),Y({data:e,param:"nol_highWM",val:"0"}),Y({data:e,param:"nol_iagData",val:""}),Y({data:e,param:"nol_disabled",val:"false"}),Y({data:e,param:"nol_sendQual",val:X({data:e,param:"nol_sendQual"})||""}),Y({data:e,param:"nolPriv_assetid",val:""}),e.set("nolPriv_prevEvent",""),"S"===X({data:e,param:"nol_segmentPrefix"})&&Y({data:e,param:"nol_segmentPrefix",val:"S"}),Y({data:e,param:"nol_c3"})||Y({data:e,param:"nol_c3",val:o}),!r){"content"===e._currVidType.toLowerCase()&&P(e),Y({data:e,param:"nol_applyViewInc",val:"1"}),(!Y({data:e,param:"nol_minutes"})||"daypart"!==Y({data:e,param:"nol_cadence"})&&"dcrstatic"!==Y({data:e,param:"nol_product"})||"dcrstatic"===Y({data:e,param:"nol_product"})&&"stream"===Y({data:e,param:"nol_cadence"}))&&(j(e),Y({data:e,param:"nol_pingCount",val:0}));var c=Y({data:e,param:"nol_adLoadType",vidType:"content"});""!==c&&void 0!==c&&null!==c&&D(e,Ie.onAdLoadFlag),S(e),n&&n.resetViewability&&n.resetViewability(e)}}function T(e,t){var a,n;_e[t].bReInit||(_e[t].bReInit=!0,_e[t].eventQueue=[],e&&_e[t].eventQueue.push(e),r(ke))}function O(e,t,a){(t&&!0===t.flush||!("dcrstatic"===Y({data:e,param:"nol_product"})&&"stream"!==Y({data:e,param:"nol_cadence"})||e.isProductOf("vrivideo")))&&("content"===Y({data:e,param:"nol_ac"})&&"interval"===e.get("nol_cadence")&&Y({data:e,param:"nol_segmentTimeSpent"})>0||"streamduration"===Y({data:e,param:"nol_cadence"})&&e.get("nol_segmentTimeSpent","ad")>0||"id3"===Y({data:e,param:"nol_product"})&&Y({data:e,param:"nol_id3Data"})||"dcrstatic"===Y({data:e,param:"nol_product"})&&"stream"===Y({data:e,param:"nol_cadence"})||"postroll"===Y({data:e,param:"nol_vidtype"})&&"interval"===Y({data:e,param:"nol_cadence"})||t&&!0===t.flush&&e.isProductOf("dcrvideo")&&"interval"===e.get("nol_cadence")&&e.get("nol_segmentTimeSpent")>0||t&&!0===t.flush&&e.isProductOf("dcrvideo")&&"streamduration"===e.get("nol_cadence")&&"ad"===e.get("nol_ac")&&e.get("nol_segmentTimeSpent","ad")>0||t&&!0===t.flush&&e.isProductOf("dcrstatic")&&"interval"===e.get("nol_cadence")&&e.get("nol_segmentTimeSpent","static")>0)&&("content"===Y({data:e,param:"nol_ac"})||t&&!0===t.save?m(e,{save:!0},a&&a.onPingFired?a.onPingFired:null):m(e,null,a&&a.onPingFired?a.onPingFired:null),Y({data:e,param:"nolPriv_now",val:0}))}function L(a,n,r){var i=xe.findPlayer(a),o=xe.getEventsFilter(a),s=i.oServiceCall[n.service],l=n.url,d=n.key,c;if(n.evntCB=Y({data:a,param:a.serviceFlag[n.service].callback}),n.callBack=function(e){h(a,e,n)},r)return t._listeners.addListener(n.evntCB,n.callBack,!0,i),void v(u(a,l),n.service,i,r);if(!s&&d&&l&&l.length>0)"stnupdate"===n.evntCB&&(void 0===i.oServiceCall[n.service]||void 0===i.oServiceCall[n.service].status||"init"!==i.oServiceCall[n.service].status&&"complete"!==i.oServiceCall[n.service].status)&&(i.oServiceCall[n.service]={status:"init",station:null,data:null}),t._listeners.addListener(n.evntCB,n.callBack,!0,i),v(u(a,l),n.service,i);else if(s&&"init"===s.status);else if(s&&"complete"===s.status&&d!==s.station)t._listeners.addListener(n.evntCB,n.callBack,!0,i),v(u(a,l),n.service,i);else if(s&&"complete"===s.status&&d===s.station){for(c in s.data)s.data.hasOwnProperty(c)&&Y({data:a,param:c,val:s.data[c]});if(Ae&&Ae[i.id]&&Ae[i.id][n.service]?D(a,Ae[i.id][n.service]):D(a,o),"true"===Y({data:a,param:"nol_disabled"}))return;a.serviceFlag[n.service].need&&(Y({data:a,param:"nol_davState",val:"1"}),a.serviceFlag[n.service].need=!1,K(Y({data:a,param:"nol_queueTime"}),a))}else t._listeners.fireEvent(n.evntCB,n),e.setTimeout(function(){L(a,n)},1e3)}function C(e,a,n,r,i){var o=null,s=Math.round(Be(e)/1e3);try{if(e){je.isEnabled(e)&&(o=Ge.inferEvent(a.currEvtType,e,a._param1,s,a._param3))&&(o.event!==Ge.events.play&&xe.state.set(e,o),je.preProcess(e,o)),a.currEvtType&&("5"===a.currEvtType.toString()&&"6"===e.get("nolPriv_prevEvent")&&"st,a"===e.get("nol_c3")&&"false"===e.get("nol_disabled")&&"dcrvideo"===e.get("nol_product")&&"streamduration"===e.get("nol_cadence")&&(Ve[n.timeStamp]=p(e,{type:18,msg:"Event 6 -> 5 detected in ad."},!0,!0)),e.set("nolPriv_prevEvent",a.currEvtType.toString().toLowerCase()),e.set("nolPriv_prevEventState",a.eventState?a.eventState.toString().toLowerCase():""));(""!==xe.cms.parse(i.nol_adobeId,e,{metadata:a._param1,defaultKey:"nol_adobeId",silent:!0})||""!==xe.cms.parse(i.nol_adobeSessionId,e,{metadata:a._param1,defaultKey:"nol_adobeSessionId",silent:!0})||r.isAdobe)&&(r.disablePauseTimeout(),r.isAdobe=!0)}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPreProc(). Error preprocessing event - "+e.message})}return{inferredEvent:o,timestamp:s}}function w(e,a){try{e&&a.inferredEvent&&(a.inferredEvent.event===Ge.events.play&&xe.state.set(e,a.inferredEvent),je.postProcess(e,a.inferredEvent))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in ggpmPostProc(). Error postprocessing event - "+e.message})}}function E(a,n,r){var o=Y({data:a,param:"nol_playerId"});if(o===n.id){if(!n.evtInfo||void 0===n.evtInfo.eventType||null===n.evtInfo.eventType||""===n.evtInfo.eventType||n.evtInfo.hasOwnProperty("param1")&&(null===n.evtInfo.param1||void 0===n.evtInfo.param1))return void(n.timeStamp&&!Ve[n.timeStamp]&&"true"!==a.get("nol_disabled")&&(n.evtInfo&&!n.evtInfo.eventType&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid event type param"}),Ve[n.timeStamp]=p(a,{type:17,msg:"Missing event type param in ggPM"},!0,!0)),!n.evtInfo||null!==n.evtInfo.param1&&void 0!==n.evtInfo.param1||(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid Param1 passed"}),Ve[n.timeStamp]=p(a,{type:17,msg:"Missing param1 detected on event "+n.evtInfo.eventType},!0,!0))));var s=n.evtInfo,l=s.param1,d=s.param3?s.param3:l.hasOwnProperty("param3")?l.param3:l,c=s.param2||"",u,f=i(Y({data:a,param:"nolPriv_id3Count"}),"num"),v,g,y,h=Y({data:a,param:"nol_enableFilterMap"}),S="|mtvr|,|dprid3|,|id3|",E,k,I={filters:{onId3PcCidChanged:!1,onId3FdCidChanged:!1},count:0,filterType:"old"},N,F,B=xe.getEventsFilter(a),V,G=Y({data:a,param:"nol_prod"}),j,U={},z=s.eventType.toString(),J,q="content",H,Q,W,X=Y({data:a,param:"nolPriv_serverTimeOffset"}),$=De[o]||{},Z=$.nol_vidtype?$.nol_vidtype.clientField:"nol_vidtype",ee=$.nol_tagSrc?$.nol_tagSrc.clientField:"nol_tagSrc",te=$.nol_ac?$.nol_ac.clientField:"nol_ac",ae=$.nol_linearAdLoadFlag?$.nol_linearAdLoadFlag.clientField:"nol_linearAdLoadFlag",ne=d[Z]?d[Z].toString().toLowerCase():d.type?d.type.toString().toLowerCase():"",re="nol_assetid",ie=xe.findPlayer(a),oe={};ne&&n.timeStamp&&!Ve[n.timeStamp]&&-1==["static","content","ad","preroll","postroll","midroll"].indexOf(ne.toLowerCase())&&(t._listeners.fireEvent("error",{type:"error",msg:"Error in handleGgpm - Invalid content type param"}),Ve[n.timeStamp]=p(a,{type:101,msg:"Invalid content type param in ggPM"},!0,!0));var se={onTick:function e(t){!a.isProductOf(["mtvr","id3"])&&r&&r.tickViewability&&"function"==typeof r.tickViewability&&r.tickViewability(a,t)},onCalcStart:function e(t,n){a.isProductOf(["mtvr","id3"])&&r&&r.tickViewability&&"function"==typeof r.tickViewability?r.tickViewability(a,t,n):n&&n()},onPingFired:function e(t){r&&r.resetViewability&&r.resetViewability(t),
t.isProductOf(["mtvr","id3"])&&r&&r.tickViewability&&"function"==typeof r.tickViewability&&r.tickViewability(t,t.get("nolPriv_currPos"))}};z=z.toLowerCase();var le=C(a,{currEvtType:z,_param1:l,eventState:c,_param3:d},n,ie,$),de=Y({data:a,param:"nol_linearAdLoadFlag",vidType:a._currVidType});switch("object"===_typeof(n.evtInfo.param1)&&n.evtInfo.param1.adModel&&-1==["0","1","2"].indexOf(n.evtInfo.param1.adModel)&&(["0","1","2"].indexOf(de)>-1?n.evtInfo.param1.adModel=de:n.evtInfo.param1.adModel=Y({data:a,param:"nol_linearAdLoadFlag"})),z="3"===z.toLowerCase()?"15":z.toLowerCase()){case"3":case"14":case"15":case"loadmetadata":case"staticstart":case"pauseloadmeta":if("object"===_typeof(n.evtInfo.param1)&&-1==["0","1","2"].indexOf(n.evtInfo.param1.adModel)&&(n.evtInfo.param1.adModel=Y({data:a,param:"nol_linearAdLoadFlag"})),("14"===z||"staticstart"===z)&&"dcrstatic"!==Y({data:a,param:"nol_product"}))return;if("14"!==z&&"staticstart"!==z&&"dcrstatic"===Y({data:a,param:"nol_product"}))return;if("pauseloadmeta"===z&&a.isProductOf("vrivideo"))return;var ce=","+Y({data:a,param:"nol_contentType"}),ue=a._currVidType,pe=Y({data:a,param:"nolPriv_prevEvent"}),me=Y({data:a,param:"nol_currPos"}),fe=ne&&-1!==ce.indexOf(","+ne.toLowerCase())?"content":"dcrstatic"===Y({data:a,param:"nol_product"})?"static":"ad";a._currVidType=fe,(ue!==a._currVidType||a.get("nolPriv_forcedContent"))&&(r&&r.resetViewability(a),a.set("nolPriv_forcedContent",!1)),"ad"===ue&&"content"===a._currVidType&&a.isProductOf("dcrvideo")&&"interval"===a.get("nol_cadence")&&a.set("nolPriv_currPos","");var ve=null,ge=null,ye=String(xe.cms.parse($.nol_assetid,a,{metadata:d,defaultKey:"nol_assetid",silent:!0}));("ad"===Y({data:a,param:"nol_ac"})&&Y({data:a,param:"nol_segmentTimeSpent"})>0&&"streamduration"===Y({data:a,param:"nol_cadence"})||"stream"===Y({data:a,param:"nol_cadence"})&&"dcrstatic"===Y({data:a,param:"nol_product"})||"dcrstatic"===Y({data:a,param:"nol_product"})&&String(a._currAssetid)!==ye)&&M(a,se.onPingFired);var he=!0===a.get("nol_onCompleteFired");if(!0===Y({data:a,param:"nol_onCompleteFired"})?("content"!==a._currVidType&&"static"!==a._currVidType||("content"===a._currVidType.toLowerCase()&&_e[o].hasOwnProperty("forceStreamRegen")&&!0===_e[o].forceStreamRegen&&P(a),Y({data:a,param:re,val:-1}),"content"===a._currVidType?(ve=xe.state.clone(a),ge=je.clone(a),A({data:a,savedVals:["nol_nielsenAdSupportFlg"],savedReplayParams:oe},r)):A({data:a,resetStatic:!0},r)),Y({data:a,param:"nol_onCompleteFired",val:!1})):"14"!==z&&"staticstart"!==z||"stream"!==Y({data:a,param:"nol_cadence"})||(Y({data:a,param:re,val:-1}),A({data:a},r)),"ad"===a._currVidType&&a._dataArrObj[a._currVidType].hasOwnProperty(a._currAssetid)){var Pe=R(Y({data:a,param:"nol_segmentLength"}));Y({data:a,param:"nol_minutes",val:Pe}),Y({data:a,param:re,val:-1}),Y({data:a,param:Z,val:ne}),"1"!==Y({data:a,param:"nol_nielsenAdSupportFlg",vidType:"content"})&&Y({data:a,param:"nol_nielsenAdSupportFlg",val:"1",vidType:"content"})}if(a._currAssetid=ye&&"daypart"===Y({data:a,param:"nol_cadence"})||"stream"!==Y({data:a,param:"nol_cadence"})&&"dcrstatic"===Y({data:a,param:"nol_product"})?ye:a._currAssetid,d.nol_ac=a._currVidType,i(Y({data:a,param:"nol_serverTime"}),"num")+86400<Math.round(Be()/1e3)+X)return M(a,se.onPingFired),void T(n,Y({data:a,param:"nol_playerId"}));for(J=0,H=h.length;J<H;J+=1)u=$[h[J]]?$[h[J]].clientField:h[J],U[h[J]]=String(d[u]||"");v=ye||Y({data:a,param:"nolPriv_assetid"}),"15"!==z&&"loadmetadata"!==z||"id3"!==Y({data:a,param:"nol_product"})||!Y({data:a,param:"nol_id3Data"})||m(a,null,se&&se.onPingFired?se.onPingFired:null);var Se=v!==Y({data:a,param:re})||a&&a._dataArrObj&&a._dataArrObj.content&&"object"===_typeof(a._dataArrObj.content)&&!a._dataArrObj.content[0];if(D(a,B.onCmsDetected,U),"false"!==U.nol_disabled||!d)return void("cms"!==a._currTagSrc&&(Se?(b(a,"loadMetadata",d,r),Y({data:a,param:"nol_disabled",val:"true"})):xe.updateMetadata(a,d,$,{inferred:!0}),"15"!==z&&"loadmetadata"!==z||"id3"!==Y({data:a,param:ee,vidType:"content"})&&!a.isProductOf("mtvr")||!0===Y({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||Y({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"})));if("static"===a._currVidType&&"dcrstatic"===Y({data:a,param:"nol_product"})?(t._listeners.fireEvent("updateCmbStaticPage",{evtInfo:s,plid:o}),q="static"):q="content",v!==Y({data:a,param:re})){"ad"!==Y({data:a,param:"nol_ac"})&&M(a,se.onPingFired);var be=Y({data:a,param:re});if(b(a,"loadMetadata",d,r),be&&!he&&"content"===a._currVidType.toLowerCase()&&a.isProductOf("dcrvideo")&&"impression"===a.get("nol_cadence")&&a.set("nolPriv_resetSession",!0),Object.keys(oe).length>0){for(var Te in oe)oe.hasOwnProperty(Te)&&""!==oe[Te]&&Y({data:a,param:Te,val:oe[Te]});oe={}}if(Y({data:a,param:"nolPriv_assetid",val:Y({data:a,param:re})}),"15"!==z&&"loadmetadata"!==z||"id3"!==Y({data:a,param:ee,vidType:"content"})&&!a.isProductOf("mtvr")||!0===Y({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})||Y({data:a,param:"nolPriv_dtvrHybrid",val:!0,vidType:"content"}),D(a,B.onAssetIdChanged),"true"===Y({data:a,param:"nol_disabled"}))return;if("drm"===Y({data:a,param:"nol_product"}))a.serviceFlag.stn.need=!0;else if(a.serviceFlag.stn.need=!1,"true"===Y({data:a,param:"nol_disabled"}))return;if(D(a,B.onComplete),ve&&xe.state.bind(a,ve),ge&&je.bind(a,ge),"true"===Y({data:a,param:"nol_disabled"}))return}if("ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"!==Y({data:a,param:"nol_cadence"})){Y({data:a,param:"nol_timeSpentViewing"})[a._currVidType].nol_count++}a.isProductOf("vrivideo")&&"impression"===a.get("nol_cadence")&&(a.set("nol_vriEvent","start"),a.set("nol_startPos","")),Y({data:a,param:"nol_pingStartTimeUTC",val:Math.round(Be()/1e3)}),-1!==G.indexOf("iag")&&_(a,a._currVidType,$),("ad"===a._currVidType&&!a.isProductOf(["dcrvideo","vrivideo"])||"stream"===Y({data:a,param:"nol_cadence"}))&&(Y({data:a,param:"nol_pingCount",val:0}),Y({data:a,param:"nolPriv_sendData",val:!0}),Y({data:a,param:"nol_davState",val:"0"}),a.serviceFlag.stn.need||"content"===a._currVidType||"nol_cmsoffset"!==Y({data:a,param:"nol_timer"})&&"nol_pageoffset"!==Y({data:a,param:"nol_timer"})||K(0,a,se)),"14"!==z&&"staticstart"!==z||"dcrstatic"!==Y({data:a,param:"nol_product"})||!0===ie.static.started||(t.PLDCR.start(!0),ie.static.started=!0);break;case"5":case"play":if("mtvr"===Y({data:a,param:"nol_product"})){if(V=$.nol_channelName?$.nol_channelName.clientField:"nol_channelName",d[V]&&d[V].length>0)for(Q in d)d.hasOwnProperty(Q)&&Y({data:a,param:Q,val:d[Q]})}else a.isProductOf(["dcrvideo","vrivideo"])&&1==a.get("nolPriv_adStop")&&(a.set("nolPriv_adStop",!1),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&"interval"===a.get("nol_cadence")&&a.set("nolPriv_currPos","","content"),a._currVidType="content",U={nol_vidtype:Y({data:a,param:Z,vidType:a._currVidType}),nol_tagSrc:Y({data:a,param:ee,vidType:a._currVidType}),nol_linearAdLoadFlag:Y({data:a,param:ae,vidType:a._currVidType}),nol_ac:Y({data:a,param:te,vidType:a._currVidType})},D(a,B.onCmsDetected,U));break;case"6":case"pause":O(a,null,se);break;case"7":case"stop":O(a,null,se),"ad"===a._currVidType&&a.isProductOf("dcrvideo")&&a.set("nolPriv_adStop",!0);break;case"flush":var Oe=a.get("nol_cadence");!a.isProductOf(["dcrvideo","dcrstatic"])||"interval"!==Oe&&"streamduration"!==Oe||(O(a,{flush:!0,save:!0},se),a.isProductOf("dcrstatic")&&ie.static.started&&(t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0")));break;case"changecontext":l&&["content","ad"].indexOf(l)>-1&&(a._currVidType=l);break;case"updateott":if(O(a,null,se),l&&l.hasOwnProperty("ottStatus")&&l.ottStatus.length>0){if(l.hasOwnProperty("kGCKMetadataNlsKeyOptout")&&l.hasOwnProperty("kGCKMetadataNlsKeyDeviceID")){var Le=l.kGCKMetadataNlsKeyOptout.toString().toLowerCase();Y({data:a,param:"nol_userSessionId",val:l.kGCKMetadataNlsKeyDeviceID,vidType:"content"}),Y({data:a,param:"nol_useroptout",val:"1"===Le||"true"===Le?"true":"false",vidType:"content"}),-1===[1,"1","true",0,"0","false"].indexOf(Le)&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: Invalid kGCKMetadataNlsKeyOptout value."})}for(var re in l)l.hasOwnProperty(re)&&(Y({data:a,param:re,val:l[re],vidType:"content"}),ie.ottStatusObj[re]=l[re]);B.onOTTDetected&&D(a,B.onOTTDetected)}break;case"57":case"56":case"end":case"oncomplete":case"staticend":if(("56"===z||"staticend"===z)&&"dcrstatic"!==Y({data:a,param:"nol_product"}))return;if("56"!==z&&"staticend"!==z&&"dcrstatic"===Y({data:a,param:"nol_product"}))return;if(a.isProductOf("vrivideo")&&("57"===z||"end"===z)&&("sessionReset"===c||"modcadence"!=a.get("nol_cadence")))return;if(!("57"!==z&&"end"!==z&&"oncomplete"!==z||"mtvr"!==Y({data:a,param:"nol_product"})&&"id3"!==Y({data:a,param:ee,vidType:"content"})||!0===Y({data:a,param:"nolPriv_dtvrHybrid",vidType:"content"})))return;if("ad"===a._currVidType&&("streamduration"===Y({data:a,param:"nol_cadence"})?m(a,null,se.onPingFired):a.isProductOf(["dcrvideo"])&&"interval"===Y({data:a,param:"nol_cadence"})&&(""===Y({data:a,param:"nol_dataDate",vidType:"content"})&&""!==Y({data:a,param:"nol_dataDate"})&&(Y({data:a,param:"nol_dataDate",val:Y({data:a,param:"nol_dataDate"}),vidType:"content"}),Y({data:a,param:"nol_hourCode",val:Y({data:a,param:"nol_hourCode"}),vidType:"content"}),Y({data:a,param:"nol_dayId",val:Y({data:a,param:"nol_dayId"}),vidType:"content"})),a._currVidType="content",B.onEndDetected&&D(a,B.onEndDetected),m(a,null,se.onPingFired))),a.isProductOf("dcrvideo")&&a.set("nolPriv_currPos",""),a.isProductOf("vrivideo")&&"modcadence"===a.get("nol_cadence")){var Ce=a.get("nol_length")||xe.cms.parse($.nol_length,a,{defaultKey:"nol_length",silent:!0});if("NaN"===parseInt(Ce).toString())return;if(!(parseInt(a.get("nol_currPos"))>=parseInt(a.get("nol_length"))))return;a.set("nol_vriEvent","ended")}"static"!==Y({data:a,param:"nol_ac"})&&(a._currVidType="content"),B.onEndDetected&&D(a,B.onEndDetected),Y({data:a,param:"nol_forceFireOnClose_content",val:"1"}),"false"!==Y({data:a,param:"nol_disabled"})&&"id3"!==Y({data:a,param:"nol_product"})||("static"===Y({data:a,param:"nol_ac"})&&t._listeners.fireEvent("removeCmbAssetId",s),M(a,se.onPingFired)),Y({data:a,param:"nol_onCompleteFired",val:!0}),_e[o].forceStreamRegen=!0,"56"!=z&&"staticend"!=z||"dcrstatic"!==Y({data:a,param:"nol_product"})||(t.PLDCR.stop(),ie.static.started=!1),"57"!==z&&"oncomplete"!==z||Y({data:a,param:"nolPriv_dtvrHybrid",val:!1,vidType:"content"}),"sessionReset"!==c&&ie.disablePauseTimeout();break;case"48":case"setpageduration":case"pageduration":case"staticposition":if("true"===Y({data:a,param:"nol_disabled"})||!l||"nol_pageoffset"!==Y({data:a,param:"nol_timer"}))return;"1"===Y({data:a,param:"nol_onPaginateFired_static"})&&(Y({data:a,param:"nol_onPaginateFired",val:"0",vidType:"static"}),"impression"!==Y({data:a,param:"nol_cadence"})&&x(a,{vidType:"static"})),W=i(Y({data:a,param:"nol_highWM"}),"num"),W<i(l,"num")&&Y({data:a,param:"nol_highWM",val:l}),K(l,a,se),Y({data:a,param:"nol_davState",val:"1"});var we;we=a.get("nol_cadenceOverrideEnabled")&&a.get("nol_cadenceOverride")?a.get("nol_cadenceOverride"):!(!t.PLDCR.cadenceOverrideEnabled||!t.PLDCR.cadenceOverride)&&t.PLDCR.cadenceOverride;var Ee=60*parseInt(a.get("nol_segmentLength")||0);"dcrstatic"===a.get("nol_product")&&we&&we>0&&we<=l&&(!Ee||we<Ee)&&(O(a,{flush:!0,save:!0},se),t.PLDCR.dcrTimer.reset(),a.set("nolPriv_currPos","0"));break;case"49":case"setplayheadposition":case"playheadposition":if(l>-1){if(!0===Y({data:a,param:"nol_onCompleteFired"})&&t._listeners.fireEvent("flushPauseEventQueue"),"true"===Y({data:a,param:"nol_disabled"})||!l||"nol_cmsoffset"!==Y({data:a,param:"nol_timer"})||"ad"===a._currVidType&&a.isProductOf(["dcrvideo","vrivideo"])&&"impression"===Y({data:a,param:"nol_cadence"}))return;if("number"!=typeof l){if("string"!=typeof l)return;l=i(l,"num")}else l=Math.floor(l);if(!0===a.get("nolPriv_resetSession")&&(a.set("nolPriv_resetSession",!1),_e[o].forceStreamRegen=!0,P(a)),a.isProductOf("vrivideo")){var ke=Math.floor(l);"impression"===a.get("nol_cadence")&&1===ke&&ke<a.get("nolPriv_prevPos")&&(a.set("nol_pingCount",0),a.set("nol_currPos","")),"modcadence"===a.get("nol_cadence")&&a.set("nol_vriEvent","loop")}Y({data:a,param:"nol_isLive",val:(l>86400).toString()}),W=i(Y({data:a,param:"nol_highWM"}),"num"),W<l&&Y({data:a,param:"nol_highWM",val:l}),a.serviceFlag.stn.need?(Y({data:a,param:"nol_queueTime",val:l}),L(a,{service:"stn",key:Y({data:a,param:"nol_assetid"}),url:Y({data:a,param:"nol_stationURL"}),nol_playerId:Y({data:a,param:"nol_playerId"})})):K(l,a,se),Y({data:a,param:"nol_davState",val:"1"}),"content"!==a._currVidType||ie.isAdobe||ie._pauseTimeoutEnabled||ie.enablePauseTimeout()}else n.timeStamp&&!Ve[n.timeStamp]&&(Ve[n.timeStamp]=p(a,{type:15,msg:"A negative playhead position was sent and will be ignored."},void 0,!0),Ve[n.timeStamp]&&t._listeners.fireEvent("warn",{type:"warn",msg:"Warning: A negative playhead position was sent and will be ignored."}));break;case"55":case"sendid3":if("nol_cmsoffset"===a.get("nol_timer")||"nol_pageoffset"===a.get("nol_timer"))return;var Ie=!1,Ae=!1;if(("object"===(void 0===l?"undefined":_typeof(l))&&Object.keys(l).length>0||"string"==typeof l&&l.length>0)&&(!0===Y({data:a,param:"nol_onCompleteFired"})&&ie&&ie.getPauseQueueCount&&ie.getPauseQueueCount()>0?t._listeners.fireEvent("flushPauseEventQueue"):!0===Y({data:a,param:"nol_onCompleteFired"})&&ie&&!ie.getPauseQueueCount&&t._listeners.fireEvent("flushPauseEventQueue"),"object"===(void 0===l?"undefined":_typeof(l))))for(H=0;H<l.length;H+=1)if(l[H].key&&"PRIV"===l[H].key){l=l[H].info;break}if(k=l.toString(),249!==k.length&&n.timeStamp&&!Ve[n.timeStamp]&&(Ve[n.timeStamp]=!0,e.console&&e.console.warn&&e.console.warn("Warning: ID3 tag length is not 249."),t._listeners.fireEvent("warn",{type:"warn",msg:"ID3 tag length is not 249."})),E=k.split("/"),l={},E.length<i(Re.nol_breakout,"num"))return;for(Q in Re)Re.hasOwnProperty(Q)&&(l[Q]=E[Re[Q]],"nol_breakout"===Q&&(l[Q]=E[i(Re[Q],"num")].substr(0,2)),U[Q]=l[Q]);if(!l||Y({data:a,param:"nol_tsvBreakoutMap"})&&-1===Y({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(l.nol_breakout)||-1===l.nol_nWebAddress.indexOf("nielsen.com")||l.nol_fdcid===Y({data:a,param:"nol_cidNull"})&&l.nol_pccid===Y({data:a,param:"nol_cidNull"}))return;for(a._currVidType="content",J=0,H=h.length;J<H;J+=1)u=$[h[J]]?$[h[J]].clientField:h[J],U[h[J]]=l[u]||Y({data:a,param:h[J]});if(U.nol_vidtype="content",D(a,B.onId3Detected,U),"false"!==U.nol_disabled||"nol_cmsoffset"===Y({data:a,param:"nol_timer"}))return;if("daypart"===Y({data:a,param:"nol_cadence"})){var Me=Y({data:a,param:"nol_assetid"})||a._currAssetid;!Me&&l.nol_fdcid&&l.nol_fdcid!==Y({data:a,param:"nol_cidNull"})?a._currAssetid=l.nol_fdcid:!a._currAssetid&&Me&&(a._currAssetid=Me)}l.nol_ac=a._currVidType,l.nol_assetid=Y({data:a,param:"nol_assetid"})||a._currAssetid,f>0&&(-1!==Y({data:a,param:"nol_product"}).indexOf("id3")||-1!==Y({data:a,param:"nol_product"}).indexOf("mtvr"))&&(l.nol_pccid!==Y({data:a,param:"nol_cidNull"})&&l.nol_pccid!==Y({data:a,param:"nol_pccid"})||l.nol_fdcid!==Y({data:a,param:"nol_cidNull"})&&l.nol_fdcid!==Y({data:a,param:"nol_fdcid"}))&&m(a,null,se.onPingFired,!0);var Ne=xe.mtvr.pcChanged(a,l.nol_pccid),Fe=xe.mtvr.fdChanged(a,l.nol_fdcid);if(Ne&&(xe.mtvr.isPCTag(a)||xe.mtvr.isTransPing(a))&&(I.filters.onId3PcCidChanged=!0,I.count+=1,r&&r.startViewability(a),(Fe||xe.mtvr.isNullFDCid(a))&&a.set("nol_id3Seq",0)),Fe&&(xe.mtvr.isFDTag(a)||xe.mtvr.isTransPing(a))&&(I.filters.onId3FdCidChanged=!0,I.count+=1,r&&r.startViewability(a),a.set("nol_id3Seq",0)),Fe&&xe.mtvr.isPCTag(a)&&(Ie=!0),""===a.get("nol_fdrtvod")||"0"===a.get("nol_fdrtvod")||!xe.mtvr.isPCTag(a)&&!xe.mtvr.isFDTag(a)||xe.mtvr.isNullPCCid(a)||""===a.get("nol_pccid")||xe.mtvr.isNullFDCid(a)||""===a.get("nol_fdcid")||!Ne||(Ae=!0,xe.mtvr.isFDTag(a)&&B&&B.onId3FdCidChanged&&D(a,B.onId3FdCidChanged)),I.count){if(b(a,"sendID3",l,r),!I.filters.onId3FdCidChanged&&Y({data:a,param:"nol_fdcid"})!=Y({data:a,param:"nol_cidNull"})||-1===Y({data:a,param:"nol_tsvBreakoutMap"}).enable.indexOf(l.nol_breakout)||(a.serviceFlag.tsv.need=!0),I.count>0)for(Q in I.filters)if(I.filters[Q]&&(D(a,B[Q]),"true"===Y({data:a,param:"nol_disabled"})))return;if(B.onComplete&&(D(a,B.onComplete),"true"===Y({data:a,param:"nol_disabled"})))return}else for(Q in l)l.hasOwnProperty(Q)&&Y({data:a,param:Q,val:l[Q]});if((Fe&&xe.mtvr.isFDTag(a)||Ne&&xe.mtvr.isPCTag(a))&&a.isProductOf("mtvr")&&"impression"===a.get("nol_cadence")&&"false"===a.get("nol_disabled")){var Ge=_e[o].nolPriv_newMTVRStreamId;_e[o].nolPriv_newMTVRStreamId=Ge&&_e[o].restEvtTimestamp==n.timeStamp?Ge:t.generateGUID(),xe.mtvr.resetTagSession(a,_e[o].nolPriv_newMTVRStreamId),_e[o].restEvtTimestamp=n.timeStamp,t._listeners.fireEvent("debug",{type:"debug",msg:a.get("nol_comment")+" new mtvr session is "+Ge})}if((a.isProductOf("mtvr")||a.isProductOf("id3"))&&"false"===a.get("nol_disabled")&&_e[o].restEvtTimestamp!=n.timeStamp){var Ue=_e[o].nolPriv_newMTVRStreamId;Ue&&Ue!==a.get("nol_sessionId","content")&&xe.mtvr.resetTagSession(a,Ue)}if(Y({data:a,param:"nol_id3Raw",val:k}),(a.serviceFlag.tsv.need||Ie||Ae)&&-1!==S.indexOf("|"+Y({data:a,param:"nol_product"})+"|")&&"false"===a.get("nol_disabled")&&(["true","1"].indexOf(a.get("nol_rtvodEnabled").toString().toLowerCase())>-1&&a.set("nol_rtvod",""),F=Y(Ae?{data:a,param:"nol_pccid"}:Ie?{data:a,param:"nol_fdcid"}:!0!==I.filters.onId3PcCidChanged||xe.mtvr.isNullPCCid(a)?{data:a,param:"nol_fdcid"}:{data:a,param:"nol_pccid"}),a.get("nol_tsvURL")&&L(a,{service:"tsv",key:F,url:Y({data:a,param:"nol_tsvURL"})})),(a.isProductOf("id3")||a.isProductOf("mtvr")&&"interval"===a.get("nol_cadence")&&"false"===a.get("nol_disabled"))&&l.nol_watermark&&String(l.nol_watermark).length>0&&(g=Y({data:a,param:"nol_id3Data"}),y=Math.round(Be()/1e3+X),j=Y({data:a,param:"nol_id3Seq"})||0,g?Y({data:a,param:"nol_id3Data",val:g+="|"+y+","+Y({data:a,param:"nol_id3Raw"})}):(Y({data:a,param:"nol_id3Data",val:j+":"+Y({data:a,param:"nol_clocksrc"})+":"+Y({data:a,param:"nol_tsvFlag"})+":"+y+","+Y({data:a,param:"nol_id3Raw"})}),Y({data:a,param:"nol_id3Seq",val:i(j,"num")+1,vidType:"content"})),a.isProductOf("id3")))return f>0&&m(a,{returnLength:!0},se.onPingFired),f+=1,Y({data:a,param:"nolPriv_id3Count",val:f}),void Y({data:a,param:"nol_davState",val:"1"});if(f+=1,Y({data:a,param:"nolPriv_id3Count",val:f}),N=Y({data:a,param:Y({data:a,param:"nol_timer"})})||Y({data:a,param:"nol_fdoffset"}),"daypart"===Y({data:a,param:"nol_cadence"})&&(N=i(N,"num"),N+="nol_pcoffset"==Y({data:a,param:"nol_timer"})?i(Y({data:a,param:"nol_pcTimeCode"}),"num"):i(Y({data:a,param:"nol_fdTimeCode"}),"num")),a.serviceFlag.tsv.need)Y({data:a,param:"nol_queueTime",val:N});else{if("true"===Y({data:a,param:"nol_disabled"}))return;K(N,a,se),Y({data:a,param:"nol_davState",val:"1"})}(Fe&&xe.mtvr.isFDTag(a)||Ne&&xe.mtvr.isPCTag(a))&&(xe.mtvr.isPCTag(a)&&"false"===a.get("nol_disabled")?r&&r.tickViewability(a,l.nol_pcoffset):xe.mtvr.isFDTag(a)&&"false"===a.get("nol_disabled")&&r&&r.tickViewability(a,l.nol_fdoffset));break;case"60":case"mute":break;case"61":case"volume":r&&r.viewability&&r.viewability.setVolume(l);break;case"30":case"onpaginate":"dcrstatic"===Y({data:a,param:"nol_product"})&&B.onPaginateDetected&&"stream"!==Y({data:a,param:"nol_cadence"})&&D(a,B.onPaginateDetected),Y({data:a,param:"nol_onPaginateFired",val:"1",vidType:"static"});break;case"35":case"updatemetadata":if(a.isProductOf(["dcrvideo","vrivideo"])){xe.updateMetadata(a,d,$,n.evtInfo);var Ke=Y({data:a,param:"nol_adLoadType",vidType:"content"});""!==Ke&&void 0!==Ke&&null!==Ke&&D(a,B.onAdLoadFlag)}}w(a,le)}}function k(e,t,a){var n=!1,r=a.toString().toLowerCase().indexOf(t.toString().toLowerCase());return"-"===e&&-1===r?n=!0:"+"===e&&(a===t||-1!==r&&a&&t)?n=!0:"--"===e&&-1===t.toString().toLowerCase().indexOf(a.toString().toLowerCase())?n=!0:"++"===e&&-1!==t.toString().toLowerCase().indexOf(a.toString().toLowerCase())&&(n=!0),n}function D(e,t,a,n){var r=t||e.get("nol_finalFilter",n),i,o,s,l,d,c,u,p,m,f,v,g=a||{};if(r&&void 0!==r)for(i=0,o=r.length;i<o;i++){if(p=r[i],p.tagVar.length)for(s=0,l=p.tagVar.length;s<l&&(f=e.get(p.tagVar[s].name,n));s++);else f=e.get(p.tagVar.name,n);if(f&&p.tagVar.value===f){for(s=0,l=p.cond.length;s<l;s++){if(u=g[p.cond[s]]||e.get(p.cond[s],n),c=0===p.is.value.indexOf("nol_")&&e.get(p.is.value,n)?e.get(p.is.value,n):p.is.value,void 0===u||void 0===c||!k(p.is.type,u,c)){m=!1;break}m=!0}if(void 0!==m&&void 0!==(v=m?p.then:p.else))for(d in v)v.hasOwnProperty(d)&&(void 0!==g.nol_vidtype?g[d]=v[d]:e.set(d,v[d],n))}}}function I(t,a){var n,r,i=t.split("||"),o=i[0]||t;if(e)for(n=0,r=i.length;n<r;n++)o=i[n],void 0!==e["on"+o]&&(e.addEventListener?e.addEventListener(o,a,!1):e.attachEvent&&e.attachEvent("on"+o,a))}function A(e,a){var n;try{if(!e||!e.hasOwnProperty("data"))return;if(e.hasOwnProperty("savedVals")&&e.hasOwnProperty("savedReplayParams"))if(Array.isArray(e.savedVals))for(n in e.savedVals)e.savedVals.hasOwnProperty(n)&&(e.savedReplayParams[e.savedVals[n]]=Y({data:e.data,param:e.savedVals[n]}));else"string"==typeof e.savedVals&&(e.savedReplayParams[e.savedVals]=Y({data:e.data,param:e.savedVals}));e.hasOwnProperty("resetStatic")&&!0===e.resetStatic&&(e.data._dataArrObj.static={}),e.data._dataArrObj.ad={},e.data._dataArrObj.content={},e.data._dataArrObj.count={content:0,ad:0,static:0},e.data._currAssetid="0"}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetDataObj"+e})}}function M(e,t,a,n){var n=n||"";if("id3"===Y({data:e,param:"nol_product"})&&Y({data:e,param:"nol_id3Data"}))return void m(e,null,t||null,a);e.isProductOf("vrivideo")&&"ended"!==e.set("nol_vriEvent")||"true"!==Y({data:e,param:"nol_disabled"})&&("1"===Y({data:e,param:"nol_davState"})||"onbeforeunload"===n&&"1"===e.get("nol_davState","ad"))&&(Y({data:e,param:"nol_davState",val:"2"}),"daypart"===Y({data:e,param:"nol_cadence"})?m(e,{save:!0},t||null,a):m(e,null,t||null,a),j(e),Y({data:e,param:"nol_disabled",val:"true"}))}function N(a,n){var r=n.id||n.getId?n.getId():"0",i=_e[r].nol_tagMap.nol_url,o,s,l,d=0,c=i?i[a.nol_url]||a.nol_url||"":a.nol_url||"",u={stn:{need:!1,callback:"nol_stnevt"},tsv:{need:!1,callback:"nol_tsvevt"}},m={ad:{},content:{},static:{},count:{content:0,static:0}},f={nol_disabled:"true",nol_errorMessage:"none",nol_vidtype:"",nol_muteState:"0",nol_volumeLevel:"100",nol_clockSource:"D",nol_aggregate:"1",nol_pingCount:"0",nol_intrvlThrshld:"90",nol_id3IntrvlGp:"15",nolPriv_sendData:!0,nol_timer:"nol_fdoffset",nol_isLive:"false",nolPriv_errorSent:"",nolPriv_id3Count:0,nolPriv_cmsMap:{},nol_timeSpentViewing:{ad:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},content:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0},static:{nol_cumeTimeSpent:0,nol_segmentTimeSpent:0,nol_count:0}},nol_enableFilterMap:["nol_vidtype","nol_tagSrc","nol_linearAdLoadFlag","nol_ac"],nol_xorSeed:"N!3ls3nBL",nol_currSeg:"0",nol_minWonOverride:"0",nol_customExtension:["nol_legacyCustom"],nol_pingCreationTime:"0",nol_pingSendTime:"0",nol_clientUrl:e.location.href,nol_sendTime:"0",nol_pageURL:e.location.href.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_referrerURL:e.document.referrer.replace(/\"/g,"").replace(/\'/g,"").replace(/%27/g,"").replace(/%22/g,""),nol_random:Math.round(1e9*Math.random()),nol_ottStatus:"0",nol_ottType:"none",nol_ottDevice:"NA",nol_ottDeviceName:"NA",nol_ottDeviceID:"NA",nol_ottDeviceManufacturer:"NA",nol_ottDeviceModel:"NA",nol_ottDeviceVersion:"NA",nol_onPaginateFired:"0",nol_forceFireOnClose:"0",nol_applyViewInc:"0",nol_viVersion:"",nol_omidsdkVersion:""},v=a;v.nol_playerId=r;var g=this,_={_dataArrObj:m,_settings:v,_currVidType:"ad",_currAssetid:"0",serviceFlag:u};xe.extendfData(_),this.name=_.get("nol_comment"),this.playerId=r,this.resetViewability=function(e,t){g&&g.viewability&&g.viewability.initialized&&g.viewability.initialized()&&g.viewability.clear(e,t)},this.startViewability=function(e){g&&g.viewability&&g.viewability.initialized&&g.viewability.initialized()&&"function"==typeof g.viewability.start&&g.viewability.start(e)},this.stopViewability=function(){g&&g.viewability&&g.viewability.initialized&&g.viewability.initialized()&&"function"==typeof g.viewability.stop&&g.viewability.stop()},this.tickViewability=function(e,t,a){g&&g.viewability&&g.viewability.initialized&&g.viewability.initialized()?g.viewability.tick(t,e,function(){g.viewability.setData(e),a&&a()}):a&&a()},t._listeners.addListener("tick",function(){if(n.pauseObj.eventPauseTime>=n.pauseObj.cmsPauseTime&&xe.state.status.current(_)!==xe.states.stopped&&xe.state.status.current(_)!==xe.states.paused&&je.isEnabled(_)){var e={event:Ge.events.pause,curPos:xe.state.position.current(_),prevPos:null,timestamp:xe.state.timeStamp.current(_)};xe.state.set(_,e),je.preProcess(_,e),n.pauseObj.eventPauseTime=0}n.pauseObj.pauseTime>n.pauseObj.maxPauseTime&&"dcrstatic"!==Y({data:_,param:"nol_product"})&&"vrivideo"!==Y({data:_,param:"nol_product"})&&(n.pauseObj.pauseTime=0,t._listeners.fireEvent("handleSessionReset",{plid:r,passedFdata:_}),t._listeners.fireEvent("debug",{type:"debug",msg:"Max pause time reached. Just fired handleSessionReset."}))}),A({data:_},g);for(l in f)a.hasOwnProperty(l)?v[l]=a[l]:v[l]=_e[r][l]||f[l];if(v.nol_customExtension&&c){for(o=0,s=v.nol_customExtension.length;o<s;o++)c=c.replace("|!["+v.nol_customExtension[o]+"]!|",_e[r][v.nol_customExtension[o]]||"");v.nol_url=c}if(t.PLVBL&&_.get("nol_vizuURL")&&("interval"===_.get("nol_cadence")||"streamduration"===_.get("nol_cadence"))&&(this.viewability=new t.PLVBL(_,n)),"true"!==Y({data:_,param:"nol_fireStop"})&&-1==="interval,episode,streamduration".indexOf(Y({data:_,param:"nol_cadence"}))||I("pagehide||beforeunload",function(){Te&&(e.clearInterval(Te),Te=0,H({serverTimeOffset:Y({data:_,param:"nolPriv_serverTimeOffset"}),url:"__sendIt",maskRef:Y({data:_,param:"nol_rfrmsk"}),uoo:Y({data:_,param:"nol_useroptout"}),method:xe.getRequestMethod(_)})),"sendBeacon"in navigator&&(Ne=!0),Y({data:_,param:"nol_forceFireOnClose_content",val:"1"});var t=xe.getEventsFilter(_);t&&t.onEndDetected&&(D(_,t.onEndDetected,null,"ad"),D(_,t.onEndDetected,null,"content")),je.setNextTick(_,null,"content"),M(_,!1,!0,"onbeforeunload")}),this.eventListener=function(e){E(_,e,g)},_e[r].eventQueue.length>d)for(o=0;o<_e[r].eventQueue.length;o++)_e[r]&&_e[r].eventQueue&&(_e[r].eventQueue[o].timeStamp="queued"+o),E(_,_e[r].eventQueue[o]),d=o;t._listeners.addListener("sendError",function(e){if(!e.target||r===e.target.id){var a=e.target.id+"_"+e.target.timeStamp;Ve[a]||(t._listeners.fireEvent("error",{type:"error",msg:e.target.data?e.target.data.msg:""}),Ve[a]=p(_,e.target.data,!0,!0))}})}function R(e){var t,a=[];for(t=0;t<i(e,"num");t++)a.push({tsv:0,save:!1,updated:!1});return a}function F(e,t){var a=e||6;return Math.ceil(t/a)*a||"0"}function B(e,t,a){var n=!1,r=0,o=!1,s=i(Y({data:e,param:"nol_unQualSegmentValue"}),"num"),l=Y({data:e,param:"nol_minutes"}),d=[],c=!!t&&t.save,u,p,m,f=i(Y({data:e,param:"nol_segmentTimeSpent"}),"num"),v=i(Y({data:e,param:"nol_sendQual"}),"num"),g=Y({data:e,param:"nol_cadence"});for(u=0,p=l.length;u<p;u++)m=Math.floor(l[u].tsv/Y({data:e,param:"nol_creditValue"})),m>=1?(l[u].save&&"daypart"!==Y({data:e,param:"nol_cadence"})?d.push(0):(d.push(Y({data:e,param:"nol_creditFlag"})),r++,n=!0),o=!0):(d.push(0),o=!1),!0!==a&&(c?l[u].save=o:(l[u].tsv=0,l[u].save=!1,l[u].updated=!1));return v&&(n=r>=v),!0===i(Y({data:e,param:"nol_minWonOverride"}),"bool")&&(n=!0),!0===a?n:(Y({data:e,param:"nol_duration",val:d.join("")}),n||"interval"!==g&&"streamduration"!==g||c||("S"===Y({data:e,param:"nol_segmentPrefix"})&&s&&Y({data:e,param:"nol_duration",val:F(s,f)}),n=f>1),n)}function V(e){return void 0!==e?(Be()/1e3>>0)+e:Be()/1e3>>0}function G(t){Number(t)===t&&t%1!=0&&e.console&&e.console.warn&&e.console.warn("Warning: nol_segmentTimeSpent is a float - should be an integer.")}function x(e,a){try{if("1"===Y({data:e,param:"nol_unifiedEnabled"})){var n=a&&a.hasOwnProperty("vidType")?a.vidType:e._currVidType.toLowerCase(),r=i(Y({data:e,param:"nol_viewCount_"+n}),"num");Y({data:e,param:"nol_viewCount_"+n,val:r++}),"1"===Y({data:e,param:"nol_applyViewInc"})&&Y({data:e,param:"nol_applyViewInc",val:"0"})}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in incViewCnt"+e})}}function j(e){try{if(void 0===e)return;var a=R(Y({data:e,param:"nol_segmentLength"}));Y({data:e,param:"nol_minutes",val:a}),Y({data:e,param:"nol_duration",val:new Array(a.length+1).join("0")})}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in resetMinutes(). Error - "+e.message})}}function U(e,t){var a=i(Y({data:e,param:"nol_segmentLength"}),"num")*i(Y({data:e,param:"nol_segmentValue"}),"num");return{segmentEnd:0===Math.floor(t%a),segment:Math.floor(t/a+1),minute:Math.floor(t%a/Y({data:e,param:"nol_segmentValue"})),seconds:t%Y({data:e,param:"nol_segmentValue"})}}function K(e,a,n){var r,o=Y({data:a,param:"nol_tagSrc"}),e=""!==e?e:"id3"===o&&Y({data:a,param:"nol_fdcid"})!==Y({data:a,param:"nol_cidNull"})?Y({data:a,param:"nol_fdoffset"}):"id3"===o&&Y({data:a,param:"nol_pccid"})!==Y({data:a,param:"nol_cidNull"})?Y({data:a,param:"nol_pcoffset"}):e,s=xe.getEventsFilter(a),l=Y({data:a,param:"nol_minutes"}),d=i(Y({data:a,param:"nol_pingCount"}),"num"),c,u,p,f,v,g,_,y,h=Y({data:a,param:"nol_playerId"}),P=t._players&&t._players.hasOwnProperty(h)?t._players[h]:-1,S=Y({data:a,param:"nol_localDay"}),b=Y({data:a,param:"nol_dayQhr"}),T=Y({data:a,param:"nol_weekQhr"}),O,L,C,w=Y({data:a,param:"nol_wmDay"}),E=Y({data:a,param:"nol_wmDayQhr"}),k,I,A=i(Y({data:a,param:"nol_weekEndUTC"}),"num"),M=i(Y({data:a,param:"nol_weekStartUTC"}),"num"),N=A-M,F,B=i(Y({data:a,param:"nolPriv_serverTimeOffset"}),"num"),V,G=Y({data:a,param:"nol_timer"})||"nol_fdoffset",j=i(Y({data:a,param:"nolPriv_currMin"}),"num"),K=i(Y({data:a,param:"nol_maxPingCount"}),"num"),z=i(Y({data:a,param:"nol_creditValue"}),"num"),J=i(e,"num"),q=i(Y({data:a,param:"nol_intrvlThrshld"}),"num")||86400,H="nol_cmsoffset"===G||"nol_pageoffset"===G?i(Y({data:a,param:"nol_cmsIntrvlGp"}),"num")||2:i(Y({data:a,param:"nol_id3IntrvlGp"}),"num"),Q=i(Y({data:a,param:"nol_segmentLength"}),"num")*i(Y({data:a,param:"nol_segmentValue"}),"num"),W=i(Y({data:a,param:"nol_currSeg"}),"num"),X=i(Y({data:a,param:"nolPriv_now"}),"num"),$,Z=Y({data:a,param:"nol_timeSpentViewing"})[a._currVidType],ee=a.get("nolPriv_currPos"),te=""===ee,ae=!1,ne=!1;if(a.set("nolPriv_prevPos",a.get("nol_currPos")),1===e?a.set("nol_currPos","0"):a.set("nol_currPos",e),"modcadence"===a.get("nol_cadence"))e%a.get("nol_segmentValue")==0&&(e<a.get("nol_length")||!a.get("nol_length"))&&m(a,null,n&&n.onPingFired?n.onPingFired:null);else{if(k=Math.floor(J/86400)+1,w||Y({data:a,param:"nol_wmDay",val:k}),I=Math.floor(J%86400/900)+1,E||Y({data:a,param:"nol_wmDayQhr",val:I}),J>86400&&"nol_cmsoffset"===G?(J+=B,y=J+i(Y({data:a,param:"nol_startDayTimeOffset"}),"num"),g=y+i(Y({data:a,param:"nol_GMTOffset"}),"num")):y=g=J,O=Math.floor(g/86400)+1,S&&S!=O&&(m(a,null,n&&n.onPingFired?n.onPingFired:null),S=null),S||Y({data:a,param:"nol_localDay",val:O}),J>A&&(s.onWeekEndUTC?D(a,s.onWeekEndUTC):(Y({data:a,param:"nol_week",val:Y({data:a,param:"nol_nextWeek"})}),Y({data:a,param:"nol_period",val:Y({data:a,param:"nol_nextPeriod"})}),Y({data:a,param:"nol_weekStartUTC",val:A+1}),Y({data:a,param:"nol_weekEndUTC",val:A+1+N}))),L=Math.floor((J-i(Y({data:a,param:"nol_weekStartUTC"}),"num"))/900)+1,T&&L===T||Y({data:a,param:"nol_weekQhr",val:L}),"nol_cmsoffset"===G&&(J=g%86400),C=Math.floor(J/900)+1,b||Y({data:a,param:"nol_dayQhr",val:C}),J=Math.floor(J),"1"===Y({data:a,param:"nol_applyViewInc"})&&(x(a),Y({data:a,param:"nol_applyViewInc",val:"0"})),"true"===Y({data:a,param:"nol_disabled"})||void 0===J||K>0&&K<=d&&"daypart"!==Y({data:a,param:"nol_cadence"}))return;if("stream"!==Y({data:a,param:"nol_cadence"})&&"impression"!==Y({data:a,param:"nol_cadence"})){
ee=te?J:i(ee,"num"),X||(X=Be()),V=Math.ceil((Be()-X)/1e3)||1,$=U(a,a.isProductOf(["mtvr","id3","dcrvideo"])?ee:J),r=$.segment,F=$.minute,c=$.seconds,ae=J-ee<0,v=a.isProductOf("mtvr")?J-ee:te&&0!==ee||ae?1:J-ee;var re=(te||ae)&&W!==r;if(Y({data:a,param:"nolPriv_currPos",val:J}),(W&&void 0!==r&&W!==r&&"dcrvideo"===a.get("nol_product")&&a.get("nol_segmentTimeSpent")>0||W&&void 0!==r&&(!a.isProductOf(["mtvr","id3"])&&re||a.isProductOf(["mtvr","id3"])&&(W!==r||ae&&a.get("nol_segmentTimeSpent")>a.get("nol_segmentValue"))))&&(("dcrvideo"!==Y({data:a,param:"nol_product"})||"dcrvideo"===Y({data:a,param:"nol_product"})&&Y({data:a,param:"nol_segmentTimeSpent"})>0)&&m(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),"episode"!==Y({data:a,param:"nol_cadence"})&&Y({data:a,param:"nol_pingCount",val:0}),l=R(Y({data:a,param:"nol_segmentLength"})),Y({data:a,param:"nol_minutes",val:l}),b&&b!==C&&(Y({data:a,param:"nol_dayQhr",val:C}),Y({data:a,param:"nol_weekQhr",val:L}),S&&S!==O&&Y({data:a,param:"nol_localDay",val:O})),E&&E!==I&&Y({data:a,param:"nol_wmDayQhr",val:I}),w&&w!==k&&Y({data:a,param:"nol_wmDay",val:k})),W=r,void 0!==F&&v>0){if(j===F||$.segmentEnd||l[F].save||"daypart"===Y({data:a,param:"nol_cadence"})||(l[F].tsv>=z?m(a,null,n&&n.onPingFired?n.onPingFired:null):(l[F].tsv=0,l[F].updated=!1)),v<H||v<=Math.ceil(1.5*V)&&v<q){var ie=function e(){for(u=0;u<v;u+=1){if(a.isProductOf(["mtvr","id3"])&&(c+u)%Y({data:a,param:"nol_segmentValue"})!=0||!a.isProductOf(["mtvr","id3"])&&0!==c){if("daypart"!==Y({data:a,param:"nol_cadence"})&&l[F].tsv>=Y({data:a,param:"nol_segmentValue"})&&(l[F].save?(l[F].tsv=0,l[F].save=!1,l[F].updated=!1):a.isProductOf(["dcrstatic"])||m(a,null,n&&n.onPingFired?n.onPingFired:null)),l[F].tsv+=1,Z.nol_cumeTimeSpent+=1,Z.nol_segmentTimeSpent+=1,l[F].tsv>=z&&_){for(l[F].updated||(Y({data:a,param:"nolPriv_priority",val:Be()}),l[F].updated=!0),p=0,f=0;p<l.length;p+=1)if((f+=l[p].tsv>=z?1:0)>=_){_="send";break}"send"===_&&Y({data:a,param:"nol_sendQual"})&&(s.onViewWon&&D(a,s.onViewWon),a.isProductOf(["dcrstatic"])||m(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),_=0,"daypart"!==Y({data:a,param:"nol_cadence"})&&Y({data:a,param:"nol_sendQual",val:"0"}))}}else 0!==u&&(F+=1),l.length<=F?(m(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),F=0,W+=1,Y({data:a,param:"nol_currSeg",val:W}),Y({data:a,param:"nol_pingCount",val:0}),l=R(Y({data:a,param:"nol_segmentLength"})),Y({data:a,param:"nol_minutes",val:l}),b&&b!==C&&(Y({data:a,param:"nol_dayQhr",val:C}),Y({data:a,param:"nol_weekQhr",val:L}),S&&S!==O&&Y({data:a,param:"nol_localDay",val:O})),E&&E!==I&&Y({data:a,param:"nol_wmDayQhr",val:I}),w&&w!==k&&Y({data:a,param:"nol_wmDay",val:k})):"daypart"!==Y({data:a,param:"nol_cadence"})&&!l[F].save&&l[F].tsv>=z&&(!$.segmentEnd||a.isProductOf(["mtvr","id3"]))?m(a,null,n&&n.onPingFired?n.onPingFired:null):l[F].save||$&&$.segmentEnd&&a.isProductOf(["dcrvideo"])||(l[F].tsv=1,l[F].updated=!1),Z.nol_cumeTimeSpent+=1,Z.nol_segmentTimeSpent+=1;a.set("nolPriv_currMin",F),n&&n.onTick&&n.onTick(J-(v-u)+1,Z.nol_cumeTimeSpent)}};_=i(Y({data:a,param:"nol_sendQual"}),"num"),n&&n.onCalcStart&&"function"==typeof n.onCalcStart?n.onCalcStart(J,ie):ie()}else a.isProductOf("dcrvideo")&&(Z.nol_cumeTimeSpent+=1,Z.nol_segmentTimeSpent+=1),ne=!0;a.isProductOf(["mtvr","id3"])||!$||!$.segmentEnd||te||ne||ae||(("dcrvideo"!==Y({data:a,param:"nol_product"})||"dcrvideo"===Y({data:a,param:"nol_product"})&&Y({data:a,param:"nol_segmentTimeSpent"})>1)&&m(a,{save:!0},n&&n.onPingFired?n.onPingFired:null),"episode"!==Y({data:a,param:"nol_cadence"})&&Y({data:a,param:"nol_pingCount",val:0}),l=R(Y({data:a,param:"nol_segmentLength"})),Y({data:a,param:"nol_minutes",val:l}),b&&b!==C&&(Y({data:a,param:"nol_dayQhr",val:C}),Y({data:a,param:"nol_weekQhr",val:L}),S&&S!==O&&Y({data:a,param:"nol_localDay",val:O})),E&&E!==I&&Y({data:a,param:"nol_wmDayQhr",val:I}),w&&w!==k&&Y({data:a,param:"nol_wmDay",val:k})),Y({data:a,param:"nolPriv_now",val:Be()}),-1!==P&&"dcrstatic"!==Y({data:a,param:"nol_product"})&&(P.pauseObj.pauseTime=0)}}else r=Math.floor(J/Q+1),"content"===Y({data:a,param:"nol_ac"})&&(W=r,Y({data:a,param:"nol_currSeg",val:W})),m(a,null,n&&n.onPingFired?n.onPingFired:null);Y({data:a,param:"nol_currSeg",val:W})}}function z(e){return{tags:[],eventQueue:e&&e.eventQueue?e.eventQueue:[],tagSize:1,bReInit:!1,debug:we,eventQueueIndex:0}}function J(){var e=Array.prototype.slice.call(arguments);t._listeners.fireEvent("info",{type:"info",msg:e.join(" ")})}function q(e){return encodeURIComponent(e).replace("'","%27")}function H(e){var t=0===se.indexOf("https")?"https":"http",a,n,i,o=e.url,s=e.hasOwnProperty("maskRef")?e.maskRef:-1,l=e.method||"GET";if("__sendIt"!==o&&"https"===t&&-1===o.indexOf("https")&&(o=t+o.substr(o.indexOf("://"))),e.prod&&"ocr"===e.prod&&-1!==o.indexOf("&ty=js"))return void r(o);if(Te||"__sendIt"===o)if(o&&Te&&Le)Ce.push(o);else if("__sendIt"!==o||Le)o&&Te&&!Le&&be.push(o);else{for(Le=!0,a=0,n=be.length;a<n;a+=1)Fe.setup({pingSendTime:V(e.serverTimeOffset),url:be.shift(),uoo:e.uoo,maskRefUrl:s,method:l});be=be.concat(Ce),Le=!1,Ce=[]}else Fe.setup({pingSendTime:V(e.serverTimeOffset),url:o,uoo:e.uoo,maskRefUrl:s,method:l})}function Q(e){var t=!1}function W(e){var a;if(_e[e.id]&&_e[e.id].tags.length===_e[e.id].tagSize){if(t._listeners.fireEvent("debug",{type:"debug",msg:"pli="+e.id+"&ggpm="+JSON.stringify(e)}),_e[e.id].debug!==we&&"logging"===_e[e.id].debug){if(a=_e[e.id].nol_debugUrl,a||(a=_e[e.id].nol_prefProtocol+"://nielsen.guru/validation/query_string.php?"),_e[e.id].eventQueue.length>_e[e.id].eventQueueIndex+1)for(var n=_e[e.id].eventQueueIndex;n<_e[e.id].eventQueue.length;n++)Q(a+"pli="+e.id+"&ggpm="+JSON.stringify(_e[e.id].eventQueue[n])),_e[e.id].eventQueueIndex=n;a+="pli="+e.id+"&ggpm="+JSON.stringify(e),Q(a)}e.timeStamp=Be();for(var n=0,r=_e[e.id].tags.length;n<r;n+=1)_e.hasOwnProperty(e.id)&&_e[e.id].tags[n].eventListener(e)}else _e[e.id]&&_e[e.id].eventQueue||(_e[e.id]=z(_e[e.id])),_e[e.id].eventQueue.push(e)}function X(e,t){var a,n=e.data._settings,r=e.param;return void 0===t||null===t?void 0===(a=n.hasOwnProperty(r)&&_e[n.nol_playerId].nol_tagMap.hasOwnProperty(r)&&("object"===_typeof(_e[n.nol_playerId].nol_tagMap[r])||"array"==typeof _e[n.nol_playerId].nol_tagMap[r])?_e[n.nol_playerId].nol_tagMap[r][n[r]]:n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]:_e[n.nol_playerId].nol_tagMap.nol_defaults[r]||_e[n.nol_playerId][r])&&(a=n.hasOwnProperty(r)?n[r]:_e[n.nol_playerId].nol_tagMap[r]):n.hasOwnProperty("nol_defaults")&&n.nol_defaults.hasOwnProperty(r)?n.nol_defaults[r]=t:n[r]=t,a}function Y(a){try{if(a){if("string"==typeof a.param&&-1===a.param.indexOf("nol_")&&-1===a.param.indexOf("nolPriv_")&&a.param.split("_").length-1>1)return;var n="string"==typeof a.param?a.param.split("_"):a.param,r,i=n[0]?n.splice(0,2).join("_"):n,o=a.vidType||n[0]||a.data._currVidType,s=a.data._currAssetid?String(a.data._currAssetid):"0",l=void 0!==a.data._dataArrObj[o][s]?a.data._dataArrObj[o][s]:a.data._dataArrObj[o][Object.keys(a.data._dataArrObj[o]).splice(-1,1)],d=De[a.data._settings.nol_playerId]||{},c=d&&d[i]?d[i].clientField:i;if("object"===(void 0===c?"undefined":_typeof(c)))r=l;else if("nol_segmentTimeSpent"===c||"nol_cumeTimeSpent"===c||"nol_count"===c){var u=Y({data:a.data,param:"nol_timeSpentViewing"});r=u[o][c]}else void 0===a.val||null===a.val?void 0!==(r=l&&l.hasOwnProperty(c)?l[c]:_e[a.data._settings.nol_playerId][c])&&""!==r||void 0!==(r=X(a)||"")&&""!==r||(0===c.indexOf("nol_")?a.param=c:a.param=i,r=X(a)||""):l&&(l[c]=a.val);return r}return null}catch(a){e.console&&e.console.error&&e.console.error("Error in Data(): "+a.message+" __param: "+n),t._listeners.fireEvent("error",{type:"error",msg:"Error in Data(): "+a.message})}}function $(a){a&&a.hasOwnProperty("configReq")&&a.hasOwnProperty("player")&&a.configReq.length>0&&void 0!==a.player?(r(a.configReq),e.clearInterval(a.player.lsPopulatedInterval),a.player.lsPopulatedInterval=0):t._listeners.fireEvent("error",{type:"error",msg:"Error in handleConfigRequest. Args is null or missing configReq or player."})}function Z(e,t){return t?(t._dataArrObj||(t={_dataArrObj:{content:{0:t}},_settings:t,_currVidType:"content"}),xe.extendfData(t),u(t,e,null,{vidType:"content",silent:!0,noClone:!0})):e}var ee=t.PLDPR=t.PLDPR||{},te=e.NOLBUNDLE,ae=te.sdkvForConfig?te.sdkvForConfig():"bj.6.0.0",ne="6.0.0.",re="506",ie=t.getBaseBuildVer?t.getBaseBuildVer()+"506":"6.0.0.506",oe="cgi-bin/",se=te.getConfigAddress?te.getConfigAddress():te.getAddress(),le="cfg",de="error",ce=t.getLS(),ue=t.getConfigVer?t.getConfigVer():300,pe=5,me={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},fe={regex:/\|\![\w\W]*?(\!\|)/g,length:2},ve=/[\[\{<\(\}\]>\)]/g,ge=new RegExp(/(.*?)(_content|_ad|_static)?$/i),_e=ee.dataObj||{},ye=0,he=0,Pe=5,Se=5,be=[],Te,Oe=2,Le=!1,Ce=[],we="false",Ee=we,ke,De={},Ie={},Ae={},Me=!1,Ne=!1,Re,Fe={send:function e(n,r,i){var o=n,s=-1!==o.url.indexOf("&c62=")?a(o.url,"c62=")+"&c62=sendTime,"+(void 0!==r?r:Be()/1e3>>0):o.url,l=this,d=a(s,"rnd=")+"&rnd="+Math.round(1e6*Math.random());if(i=i||"GET",n&&n.uoo&&(d=xe.nuidOverride(d,n.uoo)),t.postMsgAvail&&o.hasOwnProperty("maskRefUrl")&&-1!==o.maskRefUrl&&"true"===o.maskRefUrl)Ue.sendMaskedPing(d);else if("POST"===i){var c=d.indexOf("?"),u=t.cookie.all(),p=d.substr(0,c)+(u.IMRID?"?"+Ue.param({IMRID:u.IMRID},"ckk"):""),m=d.substr(c+1);delete u.IMRID,u&&Object.keys(u).length>0&&(m+="&"+Ue.param(u,"ckk")),m=xe.optoutOverride(m),Ue.request(p,{method:"POST",data:m},!Ne).then(function(e){parseInt(e.status)>400&&l.onError({target:{src:s}},o)})}else if(Ne)navigator.sendBeacon(d);else{var f=new Image;f.onerror=function(e){l.onError(e,o)},f.onload=function(){t.queryCookies()},f.src=d}},setup:function e(t){var a=this,n=t.hasOwnProperty("url")?t.url:"",r=t.params||{url:n,uoo:"true"===t.uoo?1:0,errorDelay:1e3*(t.delay||Se),retry:0,maskRefUrl:t.hasOwnProperty("maskRefUrl")&&String(t.maskRefUrl).length>0?t.maskRefUrl:-1};n&&n.length>0&&a.send(r,t.pingSendTime,t.method)},onError:function t(a,n){var r=this,i=a.target.src;n&&n.retry<Pe&&i&&i.length>0&&(n.retry+=1,n.url=i,e.setTimeout(function(){r.send(n,null,method)},n.errorDelay))}},Be=te.getTIme||function(){return(new Date).getTime()},Ve={},he=he||0,Pe=Pe||5,Ge=Ge||{},xe=xe||{},Y=Y||function(){},je=function(){var e="nol_eventData",t="nol_eventDataDelimiter",a="nol_eventDataEvents",n="nol_eventDataEnabled",r=":",i={delimiter:"",eventsList:[]},o=function(){return{play:{name:"play",abbrv:"PL"},pause:{name:"pause",abbrv:"PU"},rewind:{name:"rewind",abbrv:"RW"},forward:{name:"forward",abbrv:"FW"},stop:{name:"stop",abbrv:"ST"},resume:{name:"resume",abbrv:"RE"},mute:{name:"mute",abbrv:"MT"}}}(),s={get:function t(a,n){var r="";return a&&(r=Y({data:a,param:e,vidType:n||a._currVidType})),r},set:function t(a,n,r){return a&&Y({data:a,param:e,val:n,vidType:r||a._currVidType}),a},clear:function t(a){a&&(Y({data:a,param:e,val:"",vidType:"ad"}),Y({data:a,param:e,val:"",vidType:"content"}))},clone:function e(t){try{return{content:s.get(t,"content"),ad:s.get(t,"ad")}}catch(e){return null}},bind:function e(t,a){try{if(t&&a)for(var n in a)s.set(t,a[n],n)}catch(e){}},append:function e(t,a){if(t&&a){var n=s.get(t),r=s.delimiter(t),i=s.parseEventData(a);s.set(t,n?[n,i].join(r):i)}},delimiter:function e(a){return a?(i.delimiter||(i.delimiter=Y({data:a,param:t})),i.delimiter):""},isEnabled:function e(t){return!!t&&"true"===Y({data:t,param:n})},isEventEnabled:function e(t,a){if(a&&t){var n=s.lookupEvent(t.toLowerCase());if(n)return s.eventsList(a).indexOf(n.name)>-1}return!1},eventsList:function e(t){if(t){if(!i.eventsList||0==i.eventsList.length){var n=Y({data:t,param:a});n&&(i.eventsList=n.split(","))}return i.eventsList}},clearCache:function e(){i.delimiter="",i.eventsList=[]},lookupEvent:function e(t){return t?o[t.toLowerCase()]:null},parseEventData:function e(t){var a="";if(t){var n=s.lookupEvent(t.event);if(n){var r=[n.abbrv,t.timestamp,t.curPos];void 0!==t.prevPos&&null!==t.prevPos&&t.curPos!=t.prevPos&&r.push(t.prevPos),void 0!==t.p1&&null!==t.p1&&r.push(t.p1),a=r.join(":")}}return a},handleEvent:function e(t,a){t&&a&&s.isEventEnabled(a.event,t)&&s.append(t,a)},setNextTick:function e(t,a,n){var r=s.get(t,n);if(r&&r.indexOf("{{nextTick}}")>-1)if(a&&a.event===Ge.events.playhead)t=s.set(t,r.replace(/{{nextTick}}/gi,1==a.curPos?"0":a.curPos),n);else{var i=xe.state.position.current(t,n)||"0";t=s.set(t,r.replace(/{{nextTick}}/gi,i),n)}return t},preProcess:function e(t,a){try{t&&a&&a.event&&a.event!==Ge.events.play&&-1===a.event.indexOf("event_")&&(s.setNextTick(t,a),a.event===Ge.events.stop&&"content"!==xe.type.current(t)&&s.setNextTick(t,a,"content"),s.handleEvent(t,a))}catch(e){}},postProcess:function e(t,a){try{t&&a&&a.event&&a.event===Ge.events.play&&s.handleEvent(t,a)}catch(e){}}};return{get:s.get,set:s.set,clone:s.clone,bind:s.bind,clear:s.clear,append:s.append,isEnabled:s.isEnabled,isEventEnabled:s.isEventEnabled,preProcess:s.preProcess,postProcess:s.postProcess,setNextTick:s.setNextTick}}(),t=t||e.NOLBUNDLE||{},Ue=Ue||{},De=De||{},Ie=Ie||{},b=b||function(){},i=i||function(){},a=a||function(){},u=u||function(){},Y=Y||function(){},xe={_keys:{currentPosition:"nolPriv_currPos",currentTimestamp:"nolPriv_now",stateCurrentPosition:"nolPriv_stateCurrentPH",stateCurrentTimestamp:"nolPriv_stateCurrentTS",stateCurrentStatus:"nolPriv_stateCurrentStatus",stateCurrentAsset:"nolPriv_stateCurrentAsset",stateCurrentType:"nolPriv_stateCurrentType",statePreviousPosition:"nolPriv_statePreviousPH",statePreviousTimestamp:"nolPriv_statePreviousTS",statePreviousStatus:"nolPriv_statePreviousStatus",statePreviousAsset:"nolPriv_statePreviousAsset",statePreviousType:"nolPriv_statePreviousType",tagName:"nol_comment",localTimer:"nol_timer",assetId:"nol_assetid"},_params:{optout:"uoo",nuid:"c1"},states:{loaded:"LOADED",playing:"PLAYING",paused:"PAUSED",stopped:"STOPPED"},findPlayer:function e(a){if(a){if("string"==typeof a)return t._players[a];var n=Y({data:a,param:"nol_playerId"});return xe.findPlayer(n)}return null},currentPosition:function e(t){return i(Y({data:t,param:xe._keys.currentPosition}),"num")},currentTimestamp:function e(t){return i(Y({data:t,param:xe._keys.currentTimestamp}),"num")},asset:{current:function e(t){return t?t._currAssetid:null},parse:function e(t,a){var n=De[t.get("nol_playerId")]&&De[t.get("nol_playerId")].nol_assetid?De[t.get("nol_playerId")].nol_assetid.clientField:"nol_assetid";return a?a[n]:null}},type:{isCurrentlyContent:function e(t){return"content"===t._currVidType},isCurrentlyAd:function e(t){return"ad"===t._currVidType},isCurrentlyStatic:function e(t){return"static"===t._currVidType},current:function e(t){return t._currVidType},parse:function e(t,a){var n=De[t.get("nol_playerId")]||{},r=n.nol_vidtype?n.nol_vidtype.clientField:"nol_vidtype",i=a[r]?a[r].toString().toLowerCase():"",o=","+Y({data:t,param:"nol_contentType"});return i&&-1!==o.indexOf(","+i)?"content":"dcrstatic"===Y({data:t,param:"nol_product"})?"static":"ad"}},tagName:function e(t,a){return Y({data:t,param:xe._keys.tagName,vidType:a||t._currVidType})},localTimer:function e(t,a){return Y({data:t,param:xe._keys.localTimer,vidType:a||t._currVidType})||"nol_fdoffset"},isInitialized:function e(t,a){try{return a=a||t._currVidType,"{}"!==JSON.stringify(t._dataArrObj[a])}catch(e){return!1}},updateMetadata:function e(a,n,r,i){try{var o={nolParams:["nol_assetid","nol_assetName","nol_title","nol_vcTitle","nol_category","nol_channelName","nol_clientid","nol_vcid","nol_vidtype","nol_adLoadType"]};r=r||De[a.get("nol_playerId")]||{};var s=function e(t){var a=!0;for(var n in o.nolParams)if(r&&r.hasOwnProperty(o.nolParams[n])&&t===r[o.nolParams[n]].clientField){a=!1;break}return a};if(!a||!n)return;var l=void 0!==r&&"object"===(void 0===r?"undefined":_typeof(r))&&r;for(var d in n)n.hasOwnProperty(d)&&(l&&s(d)?Y({data:a,param:String(d),val:String(n[d])}):i&&i.inferred||t._listeners.fireEvent("warn",{type:"warn",msg:"Attempt to update metadata field "+d+" is not allowed. Please remove "+d+" from your metadata parameter."}))}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Failed to update metadata"})}},extendfData:function e(t){"function"!=typeof t.get&&(t.isProductOf=function(e){return!!e&&("object"===(void 0===e?"undefined":_typeof(e))?e.indexOf(Y({data:this,param:"nol_product"}))>-1:Y({data:this,param:"nol_product"})===e)},t.get=function(e,t){return Y({data:this,param:e,vidType:t})},t.set=function(e,t,a){return Y({data:this,param:e,val:t,vidType:a})},t.del=function(e,t){e&&t&&this&&this._dataArrObj&&this._dataArrObj[t]&&delete this._dataArrObj[t][e]})},state:{position:{current:function e(t,a){return i(Y({data:t,param:xe._keys.stateCurrentPosition,vidType:a||t._currVidType}),"num")},previous:function e(t,a){return i(Y({data:t,param:xe._keys.statePreviousPosition,vidType:a||t._currVidType}),"num")},set:function e(t,a,n){var r=xe.state.position.current(t);Y({data:t,param:xe._keys.statePreviousPosition,val:r,vidType:n||t._currVidType}),Y({data:t,param:xe._keys.stateCurrentPosition,val:a,vidType:n||t._currVidType})}},timeStamp:{current:function e(t,a){return i(Y({data:t,param:xe._keys.stateCurrentTimestamp,vidType:a||t._currVidType}),"num")},previous:function e(t,a){return i(Y({data:t,param:xe._keys.statePreviousTimestamp,vidType:a||t._currVidType}),"num")},set:function e(t,a,n){var r=xe.state.timeStamp.current(t);Y({data:t,param:xe._keys.statePreviousTimestamp,val:r,vidType:n||t._currVidType}),Y({data:t,param:xe._keys.stateCurrentTimestamp,val:a,vidType:n||t._currVidType})}},asset:{current:function e(t,a){return Y({data:t,param:xe._keys.stateCurrentAsset,vidType:a||t._currVidType})},previous:function e(t,a){return Y({data:t,param:xe._keys.statePreviousAsset,vidType:a||t._currVidType})},set:function e(t,a,n){var r=xe.state.asset.current(t);Y({data:t,param:xe._keys.statePreviousAsset,val:r,vidType:n||t._currVidType}),Y({data:t,param:xe._keys.stateCurrentAsset,val:a,vidType:n||t._currVidType})}},status:{current:function e(t,a){return Y({data:t,param:xe._keys.stateCurrentStatus,vidType:a||t._currVidType})},previous:function e(t,a){return Y({data:t,param:xe._keys.statePreviousStatus,vidType:a||t._currVidType})},set:function e(t,a,n){var r=xe.state.status.current(t,n);Y({data:t,param:xe._keys.statePreviousStatus,val:r,vidType:n||t._currVidType}),Y({data:t,param:xe._keys.stateCurrentStatus,val:a,vidType:n||t._currVidType})}},type:{current:function e(t,a){return Y({data:t,param:xe._keys.stateCurrentType,vidType:a||t._currVidType})},previous:function e(t,a){return Y({data:t,param:xe._keys.statePreviousType,vidType:a||t._currVidType})},set:function e(t,a,n){var r=xe.state.type.current(t,n);Y({data:t,param:xe._keys.statePreviousType,val:r,vidType:n||t._currVidType}),Y({data:t,param:xe._keys.stateCurrentType,val:a,vidType:n||t._currVidType})}},set:function e(t,a){var n=xe.findPlayer(t);switch(a.event){case"LOAD":xe.state.asset.set(t,a.assetId,a.contentType),xe.state.type.set(t,a.contentType),xe.state.timeStamp.set(t,a.timestamp);break;case"PLAY":case"RESUME":xe.state.status.set(t,xe.states.playing),xe.state.asset.set(t,a.assetId,a.contentType),xe.state.type.set(t,a.contentType),xe.state.timeStamp.set(t,a.timestamp),"PLAY"===a.event&&xe.state.position.set(t,0),"RESUME"===a.event&&void 0!=a.currentPos&&null!=a.currentPos&&"{{nextTick}}"!=a.currentPos&&(xe.state.position.set(t,a.curPos),xe.state.timeStamp.set(t,a.timestamp)),n.pauseObj.eventPauseTime=0;break;case"PAUSE":xe.state.status.set(t,xe.states.paused);break;case"STOP":xe.state.resetAsset(t),xe.state.status.set(t,xe.states.stopped);break;case"PLAYHEAD":xe.state.position.set(t,a.curPos),xe.state.timeStamp.set(t,a.timestamp),n.pauseObj.eventPauseTime=0;break;case"REWIND":case"FORWARD":xe.state.position.set(t,a.curPos),xe.state.timeStamp.set(t,a.timestamp),n.pauseObj.eventPauseTime=0;break;case"MUTE":break;case"event_play":n.pauseObj.eventPauseTime=0}},get:function e(t,a){try{if(t){return{position:{current:xe.state.position.current(t,a),previous:xe.state.position.previous(t,a)},timeStamp:{current:xe.state.timeStamp.current(t,a),previous:xe.state.timeStamp.previous(t,a)},asset:{current:xe.state.asset.current(t,a),previous:xe.state.asset.previous(t,a)},status:{current:xe.state.status.current(t,a),previous:xe.state.status.previous(t,a)},type:{current:xe.state.type.current(t,a),previous:xe.state.type.previous(t,a)}}}}catch(e){}return null},resetAsset:function e(t){xe.state.position.set(t,null),xe.state.timeStamp.set(t,null),xe.state.asset.set(t,null)},bind:function e(t,a){try{if(t&&a)for(var n in a)Y({data:t,param:xe._keys.statePreviousPosition,val:a[n].position?a[n].position.previous:null,vidType:n}),Y({data:t,param:xe._keys.stateCurrentPosition,val:a[n].position?a[n].position.current:null,vidType:n}),Y({data:t,param:xe._keys.statePreviousTimestamp,val:a[n].timeStamp?a[n].timeStamp.current:null,vidType:n}),Y({data:t,param:xe._keys.stateCurrentTimestamp,al:a[n].timeStamp?a[n].timeStamp.current:null,vidType:n}),Y({data:t,param:xe._keys.statePreviousAsset,val:a[n].asset?a[n].asset.current:null,vidType:n}),Y({data:t,param:xe._keys.stateCurrentAsset,val:a[n].asset?a[n].asset.current:null,vidType:n}),Y({data:t,param:xe._keys.statePreviousStatus,val:a[n].status?a[n].status.current:null,vidType:n}),Y({data:t,param:xe._keys.stateCurrentStatus,val:a[n].status?a[n].status.current:null,vidType:n}),Y({data:t,param:xe._keys.statePreviousType,val:a[n].type?a[n].type.current:null,vidType:n}),Y({data:t,param:xe._keys.stateCurrentType,val:a[n].type?a[n].type.current:null,vidType:n})}catch(e){}},clone:function e(t){try{return{content:xe.state.get(t,"content"),ad:xe.state.get(t,"ad")}}catch(e){}}},cms:{parse:function e(t,a,n){var r={metadata:(n?n.metadata:null)||{},defaultKey:(n?n.defaultKey:"")||"",silent:(n?n.silent:null)||!1,noClone:(n?n.noClone:null)||!1,vidType:n?n.vidType:"",noEncode:!(!n||!0!==n.noEncode)},i=t&&t.clientField?t.clientField:r.defaultKey;if(i&&a){if(r.metadata&&r.metadata.hasOwnProperty(i)&&r.metadata[i])return r.metadata[i];if(t&&t.clientField){if(r.end)return a.get(t.clientField,n?n.vidType:"");var o=a;!0!==r.noClone&&(o=JSON.parse(JSON.stringify(a)),b(o,"loadmetadata",r.metadata,null,!0));var s=[];return!0===r.noEncode?s=[i]:(s=(t.encoding||"").split(""),s.splice(s.length/2,0,i)),r.end=!0,u(o,"|!"+s.join("")+"!|",null,r)}}return""}},getRequestMethod:function e(t){return t&&t.hasOwnProperty("get")&&"function"==typeof t.get?t.get("nol_prefRequestMethod")||t.get("nol_requestMethod"):"GET"},mtvr:{isTransPing:function e(t){return!!t&&"id3"===Y({data:t,param:"nol_product"})},isPCTag:function e(t){return!!t&&(t.isProductOf("mtvr")&&""!==Y({data:t,param:"nol_subTag"}))},pcChanged:function e(t,a){return!!t&&a!==Y({data:t,param:"nol_pccid"})},isFDTag:function e(t){return!!t&&(t.isProductOf("mtvr")&&""===Y({data:t,param:"nol_subTag"}))},fdChanged:function e(t,a){return!!t&&a!==Y({data:t,param:"nol_fdcid"})},resetTagSession:function e(a,n){a&&a.set("nol_sessionId",n||t.generateGUID(),"content")},clearTagSession:function e(t){if(t)return t.del("nol_sessionId","content")},isNullPCCid:function e(t){return t.get("nol_pccid")===t.get("nol_cidNull")},isNullFDCid:function e(t){return t.get("nol_fdcid")===t.get("nol_cidNull")}},nuidOverride:function e(t,a){return a&&(t=Ue.paramOverride(t,xe._params.nuid,"nuid,OPTOUT")),t},optoutOverride:function e(n){return n&&(n=a(n,xe._params.optout+"=")+(t.isOptout()?"&"+xe._params.optout+"=1":""),n=Ue.paramOverride(n,xe._params.nuid,"nuid,"+t.getLsId())),n},getEventsFilter:function e(t){return t.get("nol_eventFilter")||Ie[t.get("nol_playerId")]||{}}},t=t||e.NOLBUNDLE||{},Ge=Ge||{},je=je||{},xe=xe||{},Be=Be||function(){},i=i||function(){},Y=Y||function(){},Ge=function(){var e={load:"LOAD",play:"PLAY",pause:"PAUSE",stop:"STOP",resume:"RESUME",rewind:"REWIND",forward:"FORWARD",playhead:"PLAYHEAD",mute:"MUTE",unmute:"UNMUTE"},a={checkRewind:function e(t,a){if(t&&void 0!==a&&null!==a&&"stream"!==Y({data:t,param:"nol_cadence"})&&"impression"!==Y({data:t,param:"nol_cadence"})){var n=Math.floor(i(a,"num")),r=xe.state.position.current(t);return{match:n-r<0,currentPos:n,previousPos:r}}return!1},checkForward:function e(t,a){if(t&&void 0!==a&&null!==a&&"stream"!==Y({data:t,param:"nol_cadence"})&&"impression"!==Y({data:t,param:"nol_cadence"})){var n=Math.floor(i(a,"num")),r=xe.state.position.current(t),o=xe.state.timeStamp.current(t),s=i(Y({data:t,param:"nol_cmsIntrvlGp"}),"num")||2,l=Math.ceil(Be()/1e3-o)||1;if(0==r&&n>86400&&"nol_cmsoffset"===xe.localTimer(t)){var d=Math.round(Be()/1e3).toString().substr(0,a.toString().length);d&&(r=parseInt(d))}var c=n-r;return{match:c>s&&c>Math.ceil(1.5*l),currentPos:n,previousPos:r}}return!1}};return{events:e,inferEvent:{inferEvent:function n(r,o,s,l,d){var c=null;try{if(c={event:"event_"+r,curPos:xe.state.position.current(o),prevPos:null,timestamp:l},r&&o)switch(r.toLowerCase()){case"3":case"15":case"loadmetadata":case"pauseloadmeta":var u=xe.asset.parse(o,d),p=xe.state.asset.current(o),m=xe.state.asset.previous(o),f=xe.state.type.current(o),v=xe.type.parse(o,d),g=xe.state.asset.current(o,v);if(c.event=e.load,c.assetId=u,c.contentType=v,xe.state.status.current(o,v)==xe.states.paused&&(p==u&&null!==u||f!==v)){c.event=e.resume,c.assetId=u,c.contentType=v,c.curPos="{{nextTick}}";break}if(g!=u||xe.state.status.current(o,v)===xe.states.stopped&&m==u&&null!==u||null===p){c.event=e.play,c.curPos="{{nextTick}}";break}break;case"5":case"play":c.event="event_play";break;case"7":case"stop":c.event="event_stop";break;case"57":case"end":case"oncomplete":c.event=e.stop;break;case"49":case"setplayheadposition":case"playheadposition":if(s>-1){var _=a.checkRewind(o,s);if(_.match){c.event=e.rewind,c.curPos=_.currentPos,c.prevPos=_.previousPos,c.p1=c.prevPos-c.curPos;break}if(-1===je.get(o).indexOf("{{nextTick}}")){var y=a.checkForward(o,s);if(y.match){c.event=e.forward,c.curPos=y.currentPos,c.prevPos=y.previousPos,c.p1=c.curPos-c.prevPos;break}}if(xe.state.status.current(o)===xe.states.paused){c.event=e.resume,c.assetId=xe.state.asset.current(o),c.contentType=xe.type.current(o),c.curPos=s;break}c.event=e.playhead,c.curPos=s}break;case"55":var h=Y({data:o,param:Y({data:o,param:"nol_timer"})})||Y({data:o,param:"nol_fdoffset"});"daypart"===Y({data:o,param:"nol_cadence"})&&(h=i(h,"num"),h=h+Y({data:o,param:"nol_timer"})=="nol_pcoffset"?i(Y({data:o,param:"nol_pcTimeCode"}),"num"):i(Y({data:o,param:"nol_fdTimeCode"}),"num")),c.event=e.playhead;break;case"9":case"mute":c.event=e.mute,c.p1=s}}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in eventsController. Error inferring event - "+r})}return c}}.inferEvent}}(),t=t||{},Pe=Pe||5,ce=ce||t.getLS(),Ue=function(t,a,n){var r={sendMaskedPing:function e(i,o){t.lsReady()?a.contentWindow.postMessage(JSON.stringify({nolSentFromBsdk:!0,eventType:"maskref",data:{url:i}}),a.src):(o=o||0)<n.maxRetry&&setTimeout(function(){r.sendMaskedPing(i,o+1)},300)},request:function t(a,n,r){return e.NOLBUNDLE.controllers.util.Promise(function(t,i){n=n||{},n.method=n.method||"GET",n.data=n.data||"";var o=new(e.XMLHttpRequest||ActiveXObject("MSXML2.XMLHTTP.3.0"));o.open(n.method,a,void 0===r||null===r||r),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.onreadystatechange=function(){o.readyState>3&&t&&t(o)},o.send(n.data)})}},i={param:function e(t,a){var e="";if(t&&"object"===(void 0===t?"undefined":_typeof(t))&&Object.keys(t).length>0){a=a||"";for(var n in t)t.hasOwnProperty(n)&&(e=e+(""!==e?"&":"")+(a?a+"-":"")+n+"="+t[n])}return e},paramOverride:function e(t,a,n){if(t&&a){var r=new RegExp("([&?]+"+a+"=)([^&$]*)","gi"),i=t.match(r);if(i)for(var o="",s=0,l=i.length;s<l;s++)o=i[s].substr(0,i[s].indexOf("=")+1)+(n||""),t=t.replace(i[s],o)}return t}};return{sendMaskedPing:r.sendMaskedPing,request:r.request,param:i.param,paramOverride:i.paramOverride}}(t,ce,{maxRetry:Pe}),me={"[":{end:"]",count:0},"{":{end:"}",count:0},"<":{end:/\.\d+,\d+\>/g,count:0}},fe={regex:/\|\![\w\W]*?(\!\|)/g,length:2},ge=new RegExp(/(.*?)(_content|_ad|_static)?$/i),De=De||{},_e=_e||{},J=J||function(){},B=B||function(){},D=D||function(){},Q=Q||function(){},H=H||function(){},L=L||function(){},G=G||function(){},V=V||function(){},q=q||function(){},t=t||e.NOLBUNDLE||{},Ge=Ge||{},je=je||{},xe=xe||{},Be=Be||function(){},i=i||function(){},Y=Y||function(){},t=t||{},Ue=Ue||{},Ke=[],_e=_e||{},q=q||function(){},i=i||function(){},Y=Y||function(){},t=t||{},ee=t.PLDPR=t.PLDPR||{},te=te||e.NOLBUNDLE,Ge=Ge||{},je=je||{},xe=xe||{},Ie=Ie||{},Ae=Ae||{},Be=Be||function(){},i=i||function(){},Y=Y||function(){},x=x||function(){},j=j||function(){},X=X||function(){},M=M||function(){},_e=_e||{},Ve=Ve|{},De=De||{},pe=pe||5,ke=ke||null,Re=Re||null,J=J||function(){},B=B||function(){},K=K||function(){},_=_||function(){},A=A||function(){},D=D||function(){},Q=Q||function(){},p=p||function(){},H=H||function(){},G=G||function(){},V=V||function(){},q=q||function(){},v=v||function(){},u=u||function(){},r=r||function(){},m=m||function(){},oe=oe||"cgi-bin/",se=se||te.getConfigAddress?te.getConfigAddress():te.getAddress(),de=de||"error",le=le||"cfg",Ne=Ne||!1,t=t||{},Te=Te||null,_e=_e||{},Ve=Ve||{},Ge=Ge||{},xe=xe||{},je=je||{},m=m||function(){},E=E||function(){},Q=Q||function(){},p=p||function(){},H=H||function(){},j=j||function(){},Y=Y||function(){},Ne=Ne||!1,t=t||{},xe=xe||{},i=i||function(){},Be=Be||function(){},m=m||function(){},D=D||function(){},Y=Y||function(){};return ee.initFromConfig=function(a,n,r){t._listeners.fireEvent("info",{type:"info",msg:"Recieved config response."});try{if(a&&a.nol_GLOBALS){var i,o,s=Be(),l,d,c,u,p="localhost",m=a.nol_GLOBALS.debugSfcode||"uat-cert",f=a.nol_GLOBALS.nol_appid||"",v=a.nol_GLOBALS.nol_lsid||"",g=a.nol_GLOBALS.nol_emmURL||(a.nol_GLOBALS.nol_tagMap&&a.nol_GLOBALS.nol_tagMap.nol_defaults?a.nol_GLOBALS.nol_tagMap.nol_defaults.nol_emmURL:"")||"",_,y,h,P,S,b,T,O;if(r&&(t.optoutCookie&&"TOTAL"===t.optoutCookie&&"OPTOUT"!==t.localStorageId&&(v="OPTOUT",t._listeners.fireEvent("debug",{type:"debug",msg:'Optout cookie was set but lsid was "'+t.localStorageId+'". Setting lsid to OPTOUT'})),""===v&&("-1"===t.localStorageId?v="999":""===t.localStorageId?v=t.generateGUID():t.localStorageId&&(v=t.localStorageId))),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached lsid: "+t.localStorageId+"; config lsid: "+v}),t._listeners.fireEvent("sendOptOutStatus","OPTOUT"==v),void 0!==a.nol_GLOBALS.nol_maxRetry&&null!==a.nol_GLOBALS.nol_maxRetry&&""!==a.nol_GLOBALS.nol_maxRetry){var L=parseInt(a.nol_GLOBALS.nol_maxRetry);L>-1&&(Pe=L)}if(a&&a.hasOwnProperty("nol_GLOBALS")){var C=n||a.nol_GLOBALS.nol_playerId||0;if(!(o=t._players[C]))return;p=a.nol_GLOBALS.nol_sfcode||p,t._listeners.fireEvent("debug",{type:"debug",msg:'SDK instance "'+o.name+'" initialized with globals '+JSON.stringify(o.getConfigParams().ggParams)}),o.pauseObj={pauseTime:0,eventPauseTime:0,maxPauseTime:parseInt(a.nol_GLOBALS.nol_pauseTimeout)||1800,cmsPauseTime:parseInt(a.nol_GLOBALS.nol_pauseEventTimeoutPlayhead)||15},r&&(a.nol_GLOBALS.nol_serverTime=Be()/1e3>>0),O=t.localStorage?_e[C]?_e[C].nol_serverTime||t.localStorage.getItem("nol_serverTime"):t.localStorage.getItem("nol_serverTime")||0:_e[C]?_e[C].nol_serverTime:0,O===a.nol_GLOBALS.nol_serverTime?ye=_e[C]?_e[C].nolPriv_serverTimeOffset:a.nol_GLOBALS.nol_serverTime-Math.round(s/1e3):(ye=a.nol_GLOBALS.nol_serverTime-Math.round(s/1e3),t.localStorage&&t.localStorage.setItem("nol_serverTime",a.nol_GLOBALS.nol_serverTime)),Se=a.nol_GLOBALS.nol_errorWait||Se,i=o.getConfigParams().ggParams||{},_e[C]=z(_e[C]),_e[C].nolPriv_serverTimeOffset=ye,_e&&_e.hasOwnProperty(C)?_e[C].nol_nielsenAdSupportFlg=0:t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Invalid data object or playerId."}),Te&&(e.clearInterval(Te),Te=0),a.nol_GLOBALS.nol_sendTimer&&(Te=e.setInterval(function(){H({serverTimeOffset:_e[C].nolPriv_serverTimeOffset,url:"__sendIt",uoo:Y({data:fData,param:"nol_useroptout"}),
method:_e[C].nol_requestMethod})},1e3*a.nol_GLOBALS.nol_sendTimer));for(l in i)i.hasOwnProperty(l)&&(_e[C][l]=i[l]);for(l in a.nol_GLOBALS)a.nol_GLOBALS.hasOwnProperty(l)&&(_e[C][l]=a.nol_GLOBALS[l]);Ie[C]=_e[C].nol_eventFilter||{},Ae[C]=_e[C].nol_serviceFilter||{},Re=_e[C].nol_id3Map||{},De[C]=De[C]||{};for(l in _e[C].nol_clientCMSmap)_e[C].nol_clientCMSmap.hasOwnProperty(l)&&(y=_e[C].nol_clientCMSmap[l].toString()||"",h=y.replace(ve,""),S=y.match(ve)||[],P={clientField:h.toString(),encoding:S.join("")},De[C][l]=P);if(i&&i.hasOwnProperty("nol_override")&&Object.keys(i.nol_override).length>0)for(l in i.nol_override)i.nol_override[l].length>0&&(_e[C][l]=i.nol_override[l]);a.nol_GLOBALS.hasOwnProperty("nol_maxStaticInstances")&&te.hasOwnProperty("setTotalNumAssetsAllowed")&&te.setTotalNumAssetsAllowed(a.nol_GLOBALS.nol_maxStaticInstances),o.configLoaded=!0,r&&(_e[C].nol_prefProtocol=t.getPrefProtocol(a),_e[C].nol_playerId=C,_e[C].nol_nuid=v,_e[C].nol_lsid=v,_e[C].nol_bldv=ie,_e[C].nol_sdkv=o.sdkvForConfig,_e[C].nol_assetName=a.nol_GLOBALS.hasOwnProperty("nol_assetName")&&a.nol_GLOBALS.nol_assetName.length>0?a.nol_GLOBALS.nol_assetName:"defChnAsset",_e[C].nol_sfcode=i.sfcode,_e[C].nol_dcrsfcode=i.sfcode,_e[C].nol_apn=i.apn||(a.nol_GLOBALS.hasOwnProperty("nol_apn")&&a.nol_GLOBALS.nol_apn.length>0?a.nol_GLOBALS.nol_apn:""),_e[C].nol_nmspc="NOLBUNDLE"),_e[C].nol_lstrg="",_e[C].nol_userSessionId=o.sessionId,!0===o.optout||"true"===_e[C].nol_useroptout?_e[C].nol_useroptout="true":_e[C].nol_useroptout="",t.userAgent.isAndroid()?_e[C].nol_vriDeviceTypeId="0003":t.userAgent.isIOS()?_e[C].nol_vriDeviceTypeId="0002":_e[C].nol_vriDeviceTypeId="0001",v&&"999"!==v&&!t.userAgent.isFB()&&(_e[C].nol_lstrg="lstrg-"+v),t._listeners.fireEvent("debug",{type:"debug",msg:"Cached emm: "+t.EMMURL+"; config emm: "+g}),g=t.evalTemplate(g,_e[C]),_e[C].nol_emmURL=g;var w=a.nol_GLOBALS.hasOwnProperty("nol_emmsfcodelist")?a.nol_GLOBALS.nol_emmsfcodelist:[];t.setLsId(v,g,o.sessionId,w)}if(a&&a.hasOwnProperty("nol_TAGS"))for(_e[C].tagSize=a.nol_TAGS.length,_e[C].tags=[],t._listeners.fireEvent("debug",{type:"debug",msg:"NIELSEN TAGS EXPECTED TO FIRE:"}),l=0;l<_e[C].tagSize;l+=1)t._listeners.fireEvent("debug",{type:"debug",msg:String(a.nol_TAGS[l].nol_comment)}),_e[C].tags.push(new N(JSON.parse(JSON.stringify(a.nol_TAGS[l])),o));void 0!==t.enablePlayer&&t.enablePlayer(C,"PLDPR"),_e[C].bReInit=!1,i.nol_hybridCfg&&e&&e.JSON&&(_=e.document.createElement("script"),_.text="(function() {if (typeof "+i.nol_hybridCfg+" === 'function'){"+i.nol_hybridCfg+"('"+JSON.stringify(a)+"')}}())",e.document.head?(e.document.head.appendChild(_),e.document.head.removeChild(_)):(e.document.getElementsByTagName("head")[0].appendChild(_),e.document.getElementsByTagName("head")[0].removeChild(_))),_e[C].forceStreamRegen=!1;var E=t.getSdkvGlobal(_e[C].nsdkvOverride,"CADENCEOVERRIDE");_e[C].hasOwnProperty("nsdkvOverride")&&E&&(_e[C].nol_cadenceOverride||(_e[C].nol_cadenceOverride=E),_e[C].nol_cadenceOverrideEnabled=!0),t._listeners.addListener("tick",function(){o&&o.hasOwnProperty("pauseObj")&&o.pauseObj.hasOwnProperty("pauseTime")&&(!0===o._pauseTimeoutEnabled?o.pauseObj.pauseTime+=1:o.pauseObj.pauseTime=0,o.pauseObj.eventPauseTime+=1)}),o&&o.configLoaded&&e.NOLBUNDLE&&e.NOLBUNDLE.controllers&&e.NOLBUNDLE.controllers.util&&e.NOLBUNDLE.controllers.util.fireCustomEvent&&e.NOLBUNDLE.controllers.util.fireCustomEvent("NSDK_Initialized",{instanceName:o.name,instance:o}),t._listeners.fireEvent("flushQueue")}else e.console&&e.console.warn&&e.console.warn("Warning: CMS config response is not valid. Please ensure NOL global parameter values are correct."),t._listeners.fireEvent("warn",{type:"warn",msg:"Warning in initFromConfig. NOL global parameters are not valid."});return _e[C]}catch(a){e.console&&e.console.error&&e.console.error("Error initializing CMS config response. Please ensure NOL global parameter values are correct. "+a.message),t._listeners.fireEvent("error",{type:"error",msg:"Error in initFromConfig. Error parsing config response. "+a.message})}},ee.getCmsMap=function(e){try{if(void 0!==e&&"string"==typeof e||t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap. PlayerID must be passed as string data type."}),_e&&_e.hasOwnProperty(e)&&void 0!==_e[e].nol_clientCMSmap)return _e[e].nol_clientCMSmap}catch(e){t._listeners.fireEvent("error",{type:"error",msg:"Error in getCmsMap."})}},ee.resolveExpression=Z,ee.init=function(a){var n=a.getConfigParams()||{},r,i,o=t.getIfLsidShouldSend()?t.getLsId():void 0,s,l="",d=0===se.indexOf("https")?"https":"http";s={pli:{val:n.nol_playerId||0,protect:!0},nmspc:{val:"NOLBUNDLE",protect:!0},sdkv:{val:ae,protect:!0},fmt:{val:"jsonp",protect:!0},apn:{val:"Tester",protect:!1},fbtag:{val:"true",protect:!1},cfgv:{val:ue,protect:!0},bldv:{val:ie,protect:!0},prefprotocol:{val:d,protect:!1}},a.addListener("ggPM",function(e){W(e)}),a.lsPopulatedInterval=0,a.lsCurrentRetry=0,a.serviceSending={tsv:!1,stn:!1},a.ottStatusObj={},a.oServiceCall={},a.static={started:!1};for(r in n.ggParams)!n.ggParams.hasOwnProperty(r)||s[r]&&s[r].protect||0==r.indexOf("nol_")||(s[r]={val:q(n.ggParams[r])});for(r in s)s.hasOwnProperty(r)&&(l+=r+"="+s[r].val+"&");l=l.substr(0,l.length-1),i=se.replace(/[\w\W]*?:\/\//g,""),a.useCachedConfig||(void 0===o||a.lsPopulatedInterval?void 0===o&&(ke=d+"://"+i+oe+le+"?"+l+"&sendTime="+Math.floor(Be()/1e3),$({configReq:ke,player:a})):a.lsPopulatedInterval=e.setInterval(function(){o=t.getLsId(),"-1"!==o?(ke=d+"://"+i+oe+le+"?"+l+"&lsid="+o+"&sendTime="+Math.floor(Be()/1e3),$({configReq:ke,player:a})):2===a.lsCurrentRetry?(ke=d+"://"+i+oe+le+"?"+l+"&lsid=999&sendTime="+Math.floor(Be()/1e3),$({configReq:ke,player:a})):a.lsCurrentRetry+=1},1e3))},ee.built||(ee.built=!0,ee.BUILDVERSION=ie,ee.dataObj=_e,t.bindPlayers(ee,"PLDPR"),t._listeners.fireEvent("flushQueue")),ee}),e.NOLBUNDLE.registerLib("PLDCR",function(t){"use strict";function a(t,a){var n={};return n.set=function(e,t){return n.init=!0,n.elapsed=0,n.startTimeStamp=0,"function"==typeof e&&(n.funcCall=e),isNaN(t)||(n.intervalTime=t),n},n.play=function(e){return n.isActive||(e?(n.startTimeStamp=0,n.elapsed=0,n.setTimer()):n.setTimer(n.remaining),n.isActive=!0),n},n.pause=function(){return n.isActive&&(n.isActive=!1,n.remaining=n.remaining-(Date.now()-n.last),n.clearTimer()),n},n.stop=function(){return n.isActive=!1,n.remaining=n.intervalTime,n.clearTimer(),n},n.clearTimer=function(){e.clearTimeout(n.timeoutObject)},n.setTimer=function(t){var a=n;"function"==typeof n.funcCall&&(isNaN(t)&&(t=n.intervalTime),n.remaining=t,n.last=Date.now(),n.clearTimer(),n.timeoutObject=e.setTimeout(function(){a.tick()},t))},n.tick=function(){if(n.isActive){var e=n.last;n.remaining<n.intervalTime&&(e-=n.intervalTime-n.remaining),n.setTimer();var t=(n.last-e)/1e3;t<u.nol_maxTickDelta&&t>=0?n.elapsed=n.elapsed+t:n.elapsed++,n.funcCall()}},n.reset=function(){n.startTimeStamp=0,n.elapsed=0,n.remaining=n.intervalTime},n.init?n:(n.set(t,a),n)}function n(){u.dcrTimer&&(u.latestDcrTickVal=u.dcrTimer.elapsed,t._listeners.fireEvent("dcrHeartbeat",u.dcrTimer.elapsed))}function r(e){g&&clearTimeout(g),document.hasFocus&&!document.hasFocus()&&(g=setTimeout(function(){_&&u.dcrTimer&&(_=!1,document.hasFocus&&!document.hasFocus()&&(t._listeners.fireEvent("info",{type:"info",msg:"Safe Focus timeout"}),u.dcrTimer.pause(),t.flushEvent(e))),clearTimeout(g)},1e3*u.nol_idleTimeout),!_&&u.dcrTimer&&(t._listeners.fireEvent("info",{type:"info",msg:"Safe Focus initiated"}),u.dcrTimer.play(u._reset),u._reset=!1,_=!0))}function i(e){(self===top||self!==top&&t.globalHasFocus&&!t.globalHasFocus())&&(t._listeners.fireEvent("info",{type:"info",msg:JSON.stringify(e,["type","isTrusted"])}),u.dcrTimer&&u.dcrTimer.pause(),_&&(_=!1))}function o(e){t._listeners.fireEvent("info",{type:"info",msg:JSON.stringify(e,["type","isTrusted"])}),u.dcrTimer&&u.dcrTimer.play(u._reset),u._reset=!1}function s(e){r(e)}function l(e){if(y)return void(y=!1);r(e)}function d(e){!document.hidden&&t.globalHasFocus&&t.globalHasFocus()?(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - VISIBLE"}),u.dcrTimer&&u.dcrTimer.play(u._reset),u._reset=!1):(t._listeners.fireEvent("info",{type:"info",msg:"Page visibilityApi - HIDDEN"}),u.dcrTimer&&u.dcrTimer.pause(),_&&(_=!1))}function c(e){u.dcrTimer&&u.dcrTimer.stop()}var u=t.PLDCR=t.PLDCR||{dcrTimer:void 0,startDcrTime:0,latestDcrTickVal:0,_reset:!1,nol_idleTimeout:1800,nol_maxTickDelta:10,cadenceOverrideEnabled:!1,cadenceOverride:30},p="6.0.0",m="1",f=e.NOLBUNDLE,v=t.getBaseBuildVer?t.getBaseBuildVer()+"1":"6.0.01";(f.GLCFG.userAgent.isAndroid()||f.GLCFG.userAgent.isIOS())&&(f.GLCFG.userAgent.isFB()||f.GLCFG.userAgent.isInstagram())&&(t.PLDCR.cadenceOverrideEnabled=!0);var u=u||{};u.startDcrTick=function(){},u.latestDcrTick=function(){return u.latestDcrTickVal};var g,_=!1,y=!0;return u.start=function(e){var r=!t.globalHasFocus||t.globalHasFocus();u._reset=e,(null===u.dcrTimer||void 0===u.dcrTimer||e)&&(r?(u.dcrTimer=a(n,1e3).play(!0),u._reset=!1):u.dcrTimer=a(n,1e3))},u.stop=function(){u.dcrTimer&&u.dcrTimer.stop()},u.init=function(t){f.browserSafeAddEventListener({element:e,eventType:"blur",func:i,useCapture:!1}),f.browserSafeAddEventListener({element:e,eventType:"focus",func:o,useCapture:!1}),f.browserSafeAddEventListener({element:e,eventType:"touchstart",func:s,useCapture:!1}),f.browserSafeAddEventListener({element:e,eventType:"beforeunload",func:c,useCapture:!1}),f.browserSafeAddEventListener({element:e,eventType:"pagehide",func:c,useCapture:!1}),document.addEventListener&&document.addEventListener("visibilitychange",d)},u.built||(u.built=!0,u.BUILDVERSION=v,t.bindPlayers(u,"PLDCR")),u}),e.NOLBUNDLE.registerLib("PLLOG",function(t){"use strict";function a(e){if(e){var a=String(e).toUpperCase();if(f.hasOwnProperty(a))for(var n in f[a]){var r=String(n).toLowerCase();t._listeners.addListener(r,f[a][r])}}}function n(e){return e&&e.target&&e.target.hasOwnProperty("msg")?e.target.msg:""}function r(t){e.console&&console.info("Nielsen Log: Info - ",n(t))}function i(t){e.console&&console.log("Nielsen Log: Debug - ",n(t))}function o(t){e.console&&console.log("Nielsen Log: Logger - ",n(t))}function s(t){e.console&&console.warn("Nielsen Log: Warn - ",n(t))}function l(t){e.console&&console.error("Nielsen Log: Error - ",n(t))}var d=t.PLLOG=t.PLLOG||{},c=e.NOLBUNDLE,u="6.0.0",p="0",m=t.getBaseBuildVer?t.getBaseBuildVer()+"0":"6.0.0"+_localBuildVer,f={INFO:{info:r},DEBUG:{info:r,debug:i,warn:s,error:l},WARN:{info:r,warn:s},ERROR:{info:r,error:l},CONSOLE:{info:r},TRUE:{info:r},LOGGER:{logger:o}};return d.init=function(e){if(e&&e.getConfigParams){var t=e.getConfigParams();t.hasOwnProperty("ggParams")&&t.ggParams.hasOwnProperty("nol_sdkDebug")&&a(t.ggParams.nol_sdkDebug)}},d.built||(d.built=!0,d.BUILDVERSION=m,t.bindPlayers(d,"PLLOG")),d})):console&&console.warn&&console.warn("Warning: Your current browser environment does not sufficiently support ECMA5 standards. Nielsen SDK will not be initialized.")}catch(e){t("ERROR: "+e.message)}}(window);