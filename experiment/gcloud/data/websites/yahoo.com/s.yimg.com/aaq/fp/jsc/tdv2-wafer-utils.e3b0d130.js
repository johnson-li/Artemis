"use strict";function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}!function(){function s(){var n=f.YAHOO&&f.YAHOO.context||f.Af&&f.Af.context||{},o="";return e.forEach(function(e){"undefined"!==_typeof(n[e])&&(o+="&".concat(encodeURIComponent(e),"=").concat(encodeURIComponent(n[e])))}),o}function r(e,n){if(n){var o="string"==typeof n?n:n.message;if(!o||!i.test(o)){var t,r=n.toString();if(n){switch(r){case"[object String]":t={code:999,message:n};break;case"[object Error]":t={code:n.code||n.name||999,file:n.fileName||"",line:n.lineNumber||"",message:n.message};break;case"[object Object]":t=n;break;default:try{t={code:999,message:JSON.stringify(n)}}catch(e){}}t.message=t.message&&t.message.substring(0,300)||""}!function(e,n,o,t){e&&n||t&&t("Missing required params - type: ".concat(e,", src: ").concat(n));var r=new Image;r.onerror=function(e){var n=e instanceof Error?e.toString():e;t&&t(n)},r.onload=function(){t&&t()};var c=o||{};n&&(c.src=n),c._rdn=(new Date).getTime().toString().substr(7);var a=Object.keys(c).map(function(e){return encodeURIComponent(e)+"="+encodeURIComponent(c[e])}).join("&");r.src="".concat("/_td_api/beacon","/").concat(e,"?").concat(a).concat(s(),"&site=").concat(u.site),f.__testError&&(f.__testImg=r)}("error",e,t)}}}var f=window,c=f.onerror,e=["rid","bucketId","bucket","device","osName","browserName","browserVersion"],a=/^resource:\/\//,i=/ActionScript|Decompress\sfail/,u={beaconPath:"p.gif",site:"fp"};f.onerror=function(e,n,o){try{var t;a.test(n)||(t={code:e.name,file:e.fileName||"",line:e.lineNumber||o||"",message:e.message||e,url:n&&n.substring(0,300)},r("rt",t))}catch(e){}return"function"==typeof c&&c(e,n,o)};function n(e){e&&"IDB-connection-success"===e.name&&window.wafer.base.clearOldCache({timeDiffToDelete:13824e5})}function o(e){var n,o,t,r,c,a,i;e&&(n=e.meta,o=e.name,t=e.stack,c={downlink:(r=f.navigator&&(navigator.connection||navigator.mozConnection||navigator.webkitConnection)||{}).downlink||"",downlinkMax:r.downlinkMax||"",effectiveType:r.effectiveType||"",rtt:r.rtt||"",saveData:r.saveData||"",type:r.type||""},a=t&&t.message||"",i="/".concat(u.beaconPath,"?err=").concat(o,"&beaconType=wafer_err&info=").concat(escape(JSON.stringify(n)),"&stack=").concat(a,"&connection=").concat(escape(JSON.stringify(c))).concat(s()),f.wafer.utils.fireBeacon(i),f.__testError&&(f.__testBeaconUrl=i))}function t(){if(m)return 1;window.wafer.on("log",n),window.wafer.on("error",o),m=!0,window.YAHOO&&window.YAHOO.errBeaconConfig&&Object.assign(u,window.YAHOO.errBeaconConfig)}var m;window.wafer.ready?window.wafer.ready(function(){t()}):window.addEventListener("load",function(){t()}),f.__testError&&t()}();