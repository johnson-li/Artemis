hs = [30245.0, 23984.5, 32060.0, 32521.0, 42083.0, 40163.0, 42143.0, 44783.0, 61640.0, 67411.5, 41393.0, 51770.5, 45894.0, 50929.5, 68857.0, 61028.5, 86847.0, 90171.5, 71779.0, 58615.5, 95004.0, 108391.0, 61002.0, 70921.0, 64687.0, 122094.5, 147287.0, 111739.0, 64261.0, 132039.5, 137270.0, 64273.0, 76760.0, 186199.5, 87552.0, 126568.5, 159083.0, 103528.5, 106813.0, 181399.0, 131529.0, 194731.0, 141375.0, 100785.0, 111552.0, 91563.0, 194451.0, 192432.0, 168209.0, 195877.0, 137380.0, 190623.5, 205847.0, 184900.0, 234176.0, 190853.0, 223914.0, 193723.5, 179677.0, 178630.0, 199966.0, 125541.0, 113787.0, 186727.5, 191978.0, 144130.5, 249239.0, 243834.0, 227542.0, 180582.5, 190995.0, 162117.5, 126119.0, 265187.5, 231090.0, 290211.0, 146074.0, 266767.5, 266229.0, 253765.5, 288434.0, 153261.0, 289195.0, 332422.0, 178127.0, 351016.0, 344309.0, 314511.5, 358320.0, 365787.5, 160018.0, 330203.0, 371045.0, 294712.5, 248857.0, 314570.5, 329678.0, 156321.5, 295643.0, 256656.5] / 1000;
tf = [31129.0, 25398.0, 35293.0, 35873.5, 56656.0, 46687.0, 48488.0, 45321.5, 86208.0, 94715.5, 50488.0, 52318.0, 57588.0, 60489.0, 69616.0, 78805.5, 87728.0, 93548.0, 72622.0, 81272.5, 105740.0, 111017.5, 67310.0, 91847.0, 88645.0, 149657.0, 229205.0, 112607.5, 67872.0, 132851.5, 178051.0, 93930.5, 110014.0, 249162.5, 95939.0, 127254.5, 209258.0, 138169.0, 172801.0, 182188.0, 144892.0, 269616.0, 177376.0, 171381.5, 185978.0, 96233.0, 208103.0, 246726.0, 168848.0, 202986.0, 204256.0, 191306.5, 206483.0, 185691.5, 234883.0, 191657.0, 224576.0, 194379.0, 265870.0, 227199.0, 201470.0, 142002.5, 141358.0, 270157.0, 200045.0, 263794.5, 250113.0, 246628.5, 228327.0, 323884.5, 341013.0, 278414.0, 138190.0, 360156.0, 231709.0, 292014.5, 168521.0, 267405.5, 365098.0, 254381.0, 289123.0, 252040.0, 290087.0, 462244.5, 264261.0, 433973.0, 345137.0, 603741.5, 359206.0, 366549.0, 268970.0, 346607.5, 372047.0, 295549.5, 295509.0, 316081.0, 330276.0, 157809.5, 559987.0, 260961.5] / 1000;
bar([hs; tf]');
xlabel('Number of connections');
ylabel('Latency (ms)')
set(gca,'FontSize',20)
pbaspect([2 1 1])
axis([1 100 0 600])
legend('handshake latency', 'transport latency');
print('figures/direct-latency','-depsc');
cpu_cli = [0, 0, 0, 0, 0, 1.0, 1.0, 1.0, 1.0, 0, 1.0, 0, 1.0, 1.0, 2.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 3.0, 0, 2.0, 2.0, 2.0, 3.0, 2.0, 2.0, 3.0, 3.0, 3.0, 3.0, 4.0, 3.0, 4.0, 0, 4.0, 4.0, 4.0, 5.0, 5.0, 0, 0, 5.0, 6.0, 5.0, 6.0, 6.0, 6.0, 6.0, 6.0, 6.0, 5.0, 6.0, 6.0, 6.0, 6.0, 6.0, 7.0, 7.0, 6.0, 7.0, 7.0, 8.0, 8.0, 8.0, 8.0, 8.0, 9.0, 0, 8.0, 8.0, 8.0, 9.0, 9.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 0, 0, 9.0, 9.0, 9.0, 9.0, 5.5, 9.0, 5.5, 5.5, 5.5, 5.0, 6.0, 5.5];
cpu_ser = [7.2, 2.0, 1.0, 2.0, 2.0, 3.0, 3.0, 3.0, 4.0, 0, 4.0, 3.0, 5.0, 4.0, 5.0, 6.0, 7.0, 7.0, 7.0, 7.0, 7.0, 8.0, 0, 8.0, 8.0, 6.0, 6.0, 4.5, 0, 9.0, 9.0, 9.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.0, 0, 9.0, 9.0, 9.0, 8.5, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.5, 9.0, 9.0, 9.0, 9.0, 9.5, 9.0, 8.0, 9.5, 9.5, 0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.6, 9.6, 9.0, 8.0, 9.0, 9.5, 0, 9.0, 9.5, 9.5, 9.6, 9.5, 0, 9.5, 9.5, 9.5, 9.6, 9.5, 0, 9.0, 9.0, 9.0, 0, 9.0, 9.0, 9.0, 9.0, 0, 9.3, 9.0, 9.0];
bar([cpu_cli; cpu_ser]');
xlabel('Number of connections');
ylabel('CPU usage (%)')
set(gca,'FontSize',20)
pbaspect([2 1 1])
axis([1 100 0 13])
legend('client', 'server');
print('figures/direct-cpu','-depsc');
mem_cli = [28.79296875, 28.921875, 29.05078125, 29.05078125, 29.1875, 29.3125, 29.31640625, 29.44921875, 29.44921875, 29.58203125, 29.7109375, 29.7109375, 29.84765625, 29.97265625, 29.9765625, 30.11328125, 30.11328125, 30.24609375, 30.37109375, 30.37109375, 30.5078125, 30.63671875, 0, 30.7734375, 30.7734375, 30.90625, 31.03515625, 31.03515625, 31.171875, 31.296875, 31.30078125, 31.43359375, 31.43359375, 31.5703125, 31.6953125, 31.6953125, 0, 31.9609375, 31.9609375, 32.09765625, 32.09765625, 32.23046875, 0, 0, 32.4921875, 32.6171875, 32.62109375, 32.7578125, 32.7578125, 32.890625, 33.01953125, 33.01953125, 33.15625, 33.28125, 33.28515625, 33.41796875, 33.41796875, 33.5546875, 33.68359375, 33.68359375, 33.81640625, 33.9453125, 33.9453125, 34.08203125, 34.08203125, 34.21484375, 34.34375, 34.34375, 34.4765625, 34.60546875, 0, 34.7421875, 34.7421875, 34.87890625, 35.0078125, 35.0078125, 35.140625, 35.265625, 35.26953125, 35.40234375, 35.40234375, 35.5390625, 35.6640625, 35.6640625, 35.80078125, 0, 0, 36.06640625, 36.06640625, 36.19921875, 36.32421875, 36.32421875, 36.4609375, 36.58984375, 36.58984375, 36.73046875, 36.73046875, 36.86328125, 36.9921875, 36.9921875];
mem_ser = [28.78125, 28.9140625, 28.9140625, 29.03515625, 29.03515625, 29.15234375, 29.15234375, 29.171875, 29.2734375, 29.390625, 29.4375, 29.26953125, 29.53515625, 29.390625, 29.4375, 29.66796875, 29.53515625, 29.68359375, 29.66796875, 29.96484375, 29.66796875, 29.796875, 29.78515625, 30.05859375, 30.17578125, 29.93359375, 30.37890625, 29.96875, 30.1953125, 30.06640625, 30.3046875, 30.55859375, 30.67578125, 30.59765625, 30.64453125, 30.3671875, 31.02734375, 30.921875, 31.04296875, 30.58984375, 30.55078125, 31.1640625, 30.796875, 31.4140625, 31.47265625, 31.16015625, 31.1171875, 30.953125, 31.23828125, 31.37109375, 31.8046875, 31.12890625, 31.12890625, 31.125, 31.21875, 31.26171875, 31.2578125, 31.3515625, 32.3046875, 32.06640625, 31.55078125, 31.609375, 32.13671875, 32.078125, 31.76953125, 32.796875, 31.91796875, 31.79296875, 31.921875, 32.9921875, 32.984375, 33.15625, 32.30859375, 33.23828125, 32.375, 32.19140625, 32.546875, 32.234375, 32.9921875, 32.67578125, 32.4296875, 33.32421875, 32.45703125, 33.8203125, 33.50390625, 32.59765625, 32.69140625, 34.2265625, 32.68359375, 32.78515625, 33.96484375, 32.86328125, 32.953125, 32.90625, 34.09375, 33.14453125, 33.0390625, 32.99609375, 34.91796875, 33.12890625];
bar([mem_cli; mem_ser]');
xlabel('Number of connections');
ylabel('Memory (MB)')
pbaspect([2 1 1])
axis([1 100 25 42])
set(gca,'FontSize',20)
legend('client', 'server');
print('figures/direct-memory','-depsc');
