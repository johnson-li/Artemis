hs = [17854.0, 11965.5, 23986.0, 15833.0, 16660.0, 19679.5, 23110.0, 25736.5, 20121.0, 26524.0, 24772.0, 22004.5, 23788.0, 26108.0, 45043.0, 59029.0, 42645.0, 49026.5, 50074.0, 53410.5, 29580.0, 61641.5, 41065.0, 61475.5, 41063.0, 37390.0, 39901.0, 56765.0, 65197.0, 67103.0, 36140.0, 41790.0, 82325.0, 43894.5, 100659.0, 79727.0, 85532.0, 46953.0, 85375.0, 47548.0, 92717.0, 98833.5, 98790.0, 96368.0, 52335.0, 52541.5, 60252.0, 87752.0, 140297.0, 54171.5, 69965.0, 75287.5, 64201.0, 60274.0, 117885.0, 104951.0, 88907.0, 130541.0, 131397.0, 129736.5, 73030.0, 130912.5, 121757.0, 139985.5, 72218.0, 83767.5, 88720.0, 70699.0, 71791.0, 91658.5, 153286.0, 109023.5, 167520.0, 170701.5, 185183.0, 134110.0, 137415.0, 171691.5, 80063.0, 110885.0, 77642.0, 174192.0, 138664.0, 86957.0, 96385.0, 164506.5, 102749.0, 107863.5, 191099.0, 191678.0, 223121.0, 191440.5, 125814.0, 193930.0, 204965.0, 222693.0, 110358.0, 236688.0, 155264.0, 95660.5] / 1000;
tf = [20521.0, 14269.0, 31716.0, 19200.0, 21228.0, 28442.0, 41909.0, 50942.5, 29854.0, 36502.5, 37339.0, 33460.5, 37468.0, 43412.5, 72457.0, 119043.5, 91203.0, 104013.5, 104577.0, 114359.0, 50032.0, 124338.0, 74946.0, 89048.0, 73991.0, 66580.0, 71175.0, 108007.5, 118061.0, 158766.0, 71711.0, 79067.5, 178538.0, 87107.0, 213993.0, 178343.0, 176337.0, 88004.0, 179971.0, 90573.0, 206255.0, 214647.0, 216121.0, 230436.0, 97467.0, 102703.5, 115549.0, 153693.5, 232245.0, 109725.5, 171372.0, 156859.0, 124088.0, 117025.0, 275703.0, 219735.0, 170072.0, 293747.0, 283547.0, 290734.5, 151032.0, 210339.0, 194164.0, 309203.5, 140672.0, 215478.5, 195645.0, 150198.5, 148214.0, 161322.0, 358970.0, 239734.5, 290092.0, 329444.0, 375773.0, 235869.0, 269477.0, 393734.5, 171153.0, 202311.5, 236229.0, 279990.0, 241058.0, 176525.0, 193406.0, 268446.0, 214745.0, 231557.5, 426295.0, 431544.0, 423358.0, 437544.5, 364257.0, 442783.0, 363590.0, 386469.5, 398095.0, 347240.0, 293350.0, 206248.0] / 1000;
bar([hs; tf]');
xlabel('Number of connections');
ylabel('Latency (ms)')
set(gca,'FontSize',20)
pbaspect([2 1 1])
axis([1 100 0 600])
legend('handshake latency', 'transport latency');
print('figures/direct-latency','-depsc');
cpu_cli = [0, 0, 0, 0, 0, 0, 1.0, 0.1, 0, 0, 1.0, 1.0, 1.0, 0.2, 1.0, 1.0, 1.0, 2.0, 2.0, 2.0, 1.0, 2.0, 1.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 3.0, 4.0, 4.0, 4.0, 5.0, 4.0, 4.0, 4.0, 4.0, 5.0, 4.0, 4.0, 5.0, 5.0, 5.0, 5.0, 5.0, 5.0, 6.0, 6.0, 7.0, 5.0, 5.0, 5.0, 6.0, 6.0, 7.0, 6.0, 7.0, 5.0, 7.0, 8.0, 7.0, 7.0, 7.0, 7.0, 7.0, 7.0, 8.0, 7.0, 7.0, 7.0, 8.0, 7.0, 7.0, 8.0, 8.0, 9.0, 8.0, 9.0, 5.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 5.5, 5.0, 9.0, 9.0];
cpu_ser = [0.5, 2.0, 2.0, 1.0, 1.0, 2.0, 2.0, 3.0, 2.0, 2.0, 3.0, 1.5, 3.0, 4.0, 5.0, 3.0, 6.0, 6.0, 6.0, 3.0, 5.0, 8.0, 4.0, 5.0, 6.0, 6.0, 8.0, 4.0, 8.0, 9.0, 3.5, 8.0, 9.0, 5.0, 4.5, 9.0, 9.0, 5.0, 9.0, 8.0, 9.0, 6.0, 9.0, 9.0, 5.0, 8.0, 9.0, 9.0, 7.0, 8.0, 9.0, 9.0, 5.5, 9.0, 9.0, 9.5, 8.5, 9.0, 9.0, 8.5, 9.0, 9.0, 9.0, 9.0, 9.0, 9.5, 9.0, 8.0, 9.0, 9.5, 9.5, 9.5, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 8.5, 9.0, 9.0, 8.5, 9.5, 9.0, 9.0, 8.5, 9.0, 9.0, 9.0, 9.5, 9.5, 9.0, 9.6, 9.5, 9.0, 9.0, 9.6, 9.5, 9.0, 9.0];
bar([cpu_cli; cpu_ser]');
xlabel('Number of connections');
ylabel('CPU usage (%)')
set(gca,'FontSize',20)
pbaspect([2 1 1])
axis([1 100 0 13])
legend('client', 'server');
print('figures/direct-cpu','-depsc');
mem_cli = [28.79296875, 28.921875, 29.05078125, 29.05078125, 29.1875, 29.3125, 29.31640625, 29.44921875, 29.44921875, 29.58203125, 29.7109375, 29.7109375, 29.84765625, 29.97265625, 29.9765625, 30.11328125, 30.11328125, 30.24609375, 30.37109375, 30.37109375, 30.5078125, 30.63671875, 30.63671875, 30.7734375, 30.7734375, 30.90625, 31.03515625, 31.03515625, 31.171875, 31.296875, 31.30078125, 31.43359375, 31.43359375, 31.5703125, 31.6953125, 31.6953125, 31.83203125, 31.9609375, 31.9609375, 32.09765625, 32.09765625, 32.23046875, 32.35546875, 32.35546875, 32.4921875, 32.6171875, 32.62109375, 32.7578125, 32.7578125, 32.890625, 33.01953125, 33.01953125, 33.15625, 33.28125, 33.28515625, 33.41796875, 33.41796875, 33.5546875, 33.68359375, 33.68359375, 33.81640625, 33.9453125, 33.9453125, 34.08203125, 34.08203125, 34.21484375, 34.34375, 34.34375, 34.4765625, 34.60546875, 34.60546875, 34.7421875, 34.7421875, 34.87890625, 35.0078125, 35.0078125, 35.140625, 35.265625, 35.26953125, 35.40234375, 35.40234375, 35.5390625, 35.6640625, 35.6640625, 35.80078125, 35.9296875, 35.9296875, 36.06640625, 36.06640625, 36.19921875, 36.32421875, 36.32421875, 36.4609375, 36.58984375, 36.58984375, 36.73046875, 36.73046875, 36.86328125, 36.9921875, 36.9921875];
mem_ser = [28.78125, 28.9140625, 28.9140625, 29.04296875, 29.16015625, 29.1640625, 29.30078125, 29.30078125, 29.4296875, 29.53125, 29.55859375, 29.67578125, 29.6796875, 29.7265625, 29.85546875, 29.97265625, 29.94921875, 30.09765625, 30.09765625, 30.24609375, 30.33984375, 30.39453125, 30.4921875, 30.4921875, 30.6328125, 30.62890625, 30.7421875, 30.77734375, 30.91015625, 30.9375, 31.05859375, 31.12890625, 31.20703125, 31.203125, 31.3515625, 31.42578125, 31.5, 31.57421875, 31.62890625, 31.72265625, 31.73828125, 31.87109375, 31.9453125, 31.9453125, 32.04296875, 32.14453125, 32.2578125, 32.265625, 32.4140625, 32.4765625, 32.48046875, 32.609375, 32.609375, 32.70703125, 32.859375, 32.93359375, 32.99609375, 32.99609375, 33.12890625, 33.12890625, 33.19921875, 33.30078125, 33.4453125, 33.42578125, 33.51171875, 33.59765625, 33.734375, 33.71875, 33.8671875, 33.86328125, 34.015625, 34.06640625, 34.1875, 34.234375, 34.23828125, 34.32421875, 34.484375, 34.51171875, 34.60546875, 34.60546875, 34.75390625, 34.828125, 34.82421875, 34.99609375, 35.02734375, 35.1015625, 35.17578125, 35.22265625, 35.32421875, 35.34375, 35.4453125, 35.58203125, 35.56640625, 35.71484375, 35.81640625, 35.83984375, 35.89453125, 36.02734375, 36.03125, 36.16015625];
bar([mem_cli; mem_ser]');
xlabel('Number of connections');
ylabel('Memory (MB)')
pbaspect([2 1 1])
axis([1 100 25 42])
set(gca,'FontSize',20)
legend('client', 'server');
print('figures/direct-memory','-depsc');
