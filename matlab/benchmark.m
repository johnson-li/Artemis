hs = [14213.0, 11033.0, 11438.0, 16111.5, 13589.0, 19991.5, 17441.0, 16341.5, 16819.0, 17554.0, 36624.0, 16991.5, 19684.0, 41086.0, 25974.0, 44000.0, 23780.0, 46336.5, 55314.0, 32169.0, 56461.0, 57007.0, 75808.0, 60454.5, 61706.0, 67546.0, 89098.0, 36138.0, 36139.0, 42532.0, 33548.0, 34456.5, 42922.0, 52635.0, 63006.0, 38699.0, 109876.0, 55010.0, 89512.0, 45226.5, 75347.0, 101651.0, 50517.0, 48703.5, 108569.0, 120144.5, 115074.0, 61765.5, 57774.0, 77996.0, 56530.0, 51178.5, 61332.0, 124117.0, 88650.0, 137221.5, 58458.0, 137731.5, 74078.0, 86424.0, 90262.0, 143481.5, 59466.0, 73093.0, 73026.0, 63160.0, 78356.0, 165740.0, 79729.0, 90950.0, 161862.0, 79355.0, 167028.0, 155964.0, 75092.0, 105712.0, 76034.0, 80625.0, 79936.0, 71626.0, 74394.0, 207614.5, 75469.0, 85463.0, 84224.0, 208434.0, 91784.0, 204176.5, 205643.0, 112308.5, 93813.0, 243690.0, 215659.0, 102803.0, 90565.0, 103136.0, 116107.0, 240742.0, 149022.0, 174922.0] / 1000;
tf = [16595.0, 14236.5, 14661.0, 21491.5, 18821.0, 27119.0, 24290.0, 23184.5, 25086.0, 27443.0, 78027.0, 27350.0, 32520.0, 93776.5, 41746.0, 70586.0, 55187.0, 88423.0, 123787.0, 49320.0, 130999.0, 128924.0, 172542.0, 136086.5, 142425.0, 138247.0, 177671.0, 83296.5, 71977.0, 85631.0, 67455.0, 67214.5, 89116.0, 189266.0, 114270.0, 71707.0, 223782.0, 111064.0, 213084.0, 87873.5, 202334.0, 225423.0, 95968.0, 98419.0, 240988.0, 260938.5, 202654.0, 119623.0, 116982.0, 151027.0, 120427.0, 103840.0, 146187.0, 283086.0, 159612.0, 235179.0, 116855.0, 324440.5, 180001.0, 197885.0, 167936.0, 321133.0, 131276.0, 170781.0, 151745.0, 129543.5, 166936.0, 382103.5, 165937.0, 173821.5, 252481.0, 194302.0, 382259.0, 254924.0, 153146.0, 203952.0, 196417.0, 174197.0, 173739.0, 309794.5, 160206.0, 350244.0, 156738.0, 218720.5, 186742.0, 358175.0, 193567.0, 457028.5, 473986.0, 239973.0, 191857.0, 508002.5, 481188.0, 222257.5, 198511.0, 216188.0, 273439.0, 441026.5, 439235.0, 490952.0] / 1000;
bar([hs; tf]');
xlabel('Number of connections');
ylabel('Latencies (ms)')
set(gca,'FontSize',20)
pbaspect([2 1 1])
axis([1 100 0 600])
legend('handshake latency', 'transport latency');
print('figures/direct-latency','-depsc');
cpu_cli = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 1.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 2.0, 3.0, 2.0, 1.0, 2.0, 2.0, 2.0, 2.0, 3.0, 3.0, 3.0, 3.0, 3.0, 4.0, 3.0, 5.0, 0, 3.0, 3.0, 5.0, 0, 5.0, 4.0, 4.0, 5.0, 5.0, 5.0, 4.0, 6.0, 5.0, 5.0, 4.0, 6.0, 5.0, 6.0, 0, 6.0, 6.0, 0, 6.0, 6.0, 6.0, 7.0, 5.0, 5.0, 7.0, 7.0, 7.0, 7.0, 7.0, 5.0, 7.0, 7.0, 6.0, 7.0, 0, 8.0, 8.0, 8.0, 8.0, 8.0, 9.0, 9.0, 9.0, 0, 8.0, 5.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0];
cpu_ser = [1.0, 1.0, 1.0, 2.0, 1.0, 1.0, 2.0, 3.0, 3.0, 3.0, 4.0, 3.0, 3.0, 0, 4.0, 4.0, 4.0, 5.0, 6.0, 5.0, 7.0, 7.0, 9.0, 8.0, 8.0, 8.0, 8.0, 8.0, 8.0, 9.0, 8.0, 8.0, 8.0, 9.0, 9.0, 8.0, 9.0, 9.0, 9.0, 7.0, 9.0, 9.0, 9.0, 9.0, 9.0, 0, 9.0, 9.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 8.0, 9.0, 9.5, 8.5, 8.5, 9.0, 9.0, 9.0, 9.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.5, 9.5, 9.0, 0, 9.5, 9.0, 9.0, 9.0, 9.5, 9.0, 9.0, 9.5, 9.0, 9.0, 9.0, 8.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.0, 9.6, 9.6, 9.0, 9.0, 9.0, 9.0, 9.6, 9.5, 9.5];
bar([cpu_cli; cpu_ser]');
xlabel('Number of connections');
ylabel('CPU usage (%)')
set(gca,'FontSize',20)
pbaspect([2 1 1])
axis([1 100 0 13])
legend('client', 'server');
print('figures/direct-cpu','-depsc');
mem_cli = [28.79296875, 28.921875, 29.05078125, 29.05078125, 29.1875, 29.3125, 29.31640625, 29.44921875, 29.44921875, 29.58203125, 29.7109375, 29.7109375, 29.84765625, 29.97265625, 29.9765625, 30.11328125, 30.11328125, 30.24609375, 30.37109375, 30.37109375, 30.5078125, 30.63671875, 30.63671875, 30.7734375, 30.7734375, 30.90625, 31.03515625, 31.03515625, 31.171875, 31.296875, 31.30078125, 31.43359375, 31.43359375, 31.5703125, 31.6953125, 31.6953125, 31.83203125, 31.9609375, 31.9609375, 32.09765625, 0, 32.23046875, 32.35546875, 32.35546875, 0, 32.6171875, 32.62109375, 32.7578125, 32.7578125, 32.890625, 33.01953125, 33.01953125, 33.15625, 33.28125, 33.28515625, 33.41796875, 33.41796875, 33.5546875, 33.68359375, 0, 33.81640625, 33.9453125, 0, 34.08203125, 34.08203125, 34.21484375, 34.34375, 34.34375, 34.4765625, 34.60546875, 34.60546875, 34.7421875, 34.7421875, 34.87890625, 35.0078125, 35.0078125, 35.140625, 35.265625, 35.26953125, 0, 35.40234375, 35.5390625, 35.6640625, 35.6640625, 35.80078125, 35.9296875, 35.9296875, 36.06640625, 0, 36.19921875, 36.32421875, 36.32421875, 36.4609375, 36.58984375, 36.58984375, 36.73046875, 36.73046875, 36.86328125, 36.9921875, 36.9921875];
mem_ser = [28.78125, 28.9140625, 28.9140625, 29.04296875, 29.16015625, 29.1640625, 29.30078125, 29.30078125, 29.4296875, 29.53125, 29.58203125, 29.67578125, 29.6796875, 29.7265625, 29.81640625, 29.94921875, 29.94921875, 30.09765625, 30.11328125, 30.22265625, 30.3359375, 30.39453125, 30.39453125, 30.46875, 30.54296875, 30.640625, 30.6875, 30.76171875, 30.859375, 30.91015625, 31.0546875, 31.0546875, 31.12890625, 31.28125, 31.33203125, 31.44140625, 31.42578125, 31.58984375, 31.67578125, 31.72265625, 31.8125, 31.8125, 31.94140625, 31.99609375, 32.01953125, 32.1953125, 32.1640625, 32.265625, 32.38671875, 32.40234375, 32.4609375, 32.609375, 32.609375, 32.73828125, 32.84765625, 32.84765625, 32.90625, 32.99609375, 33.0703125, 33.12890625, 33.203125, 33.27734375, 33.375, 33.44921875, 33.5859375, 33.5703125, 33.66015625, 33.81640625, 33.79296875, 33.9375, 33.94140625, 34.015625, 34.08984375, 34.21484375, 34.32421875, 34.3984375, 34.3984375, 34.53125, 34.53125, 34.6328125, 34.6796875, 34.82421875, 34.92578125, 35.0, 35.0703125, 35.14453125, 35.2109375, 35.1953125, 35.26953125, 35.34375, 35.4921875, 35.51953125, 35.59375, 35.74609375, 35.765625, 35.890625, 35.890625, 35.96484375, 36.03125, 36.10546875];
bar([mem_cli; mem_ser]');
xlabel('Number of connections');
ylabel('Memory (MB)')
pbaspect([2 1 1])
axis([1 100 25 42])
set(gca,'FontSize',20)
legend('client', 'server');
print('figures/direct-memory','-depsc');
